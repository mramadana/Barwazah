const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DTGHDczv.js","./Ch8Jn6uB.js","./CXyoKjyT.js","./entry.B0b_3z4T.css"])))=>i.map(i=>d[i]);
import U from"./C7FT474U.js";import{_ as ke}from"./B_LT9m3A.js";import{A as z,r as l,h as I,m as V,J as _e,e as N,o as S,c as G,a as e,b as y,g as O,B as H,s as Z,l as q,w as J,u as i,i as $e,_ as Ae,y as Se,d as pe,t as B,x as ve}from"./CXyoKjyT.js";import{s as K}from"./C_n5yfhv.js";import{d as Q,_ as W,i as X,a as Y,b as ee,c as ae,f as ye,u as Me}from"./Ch8Jn6uB.js";import{_ as Ee}from"./BoAR1_pU.js";import{u as te,r as se}from"./DXutHP6I.js";import{u as oe}from"./605Qp5rE.js";import{i as le}from"./27_K5Ae3.js";import{_ as Ge}from"./6ODtZB8Y.js";import"./iv2B5YRi.js";import"./vLCjrXNG.js";import"./D4V6sImi.js";import"./DM0aJMkB.js";const Le=Q(W),Oe={key:0,class:"w-100"},Fe={class:"radio-container"},Pe=["id","name"],Re=["for"],Te=["id","name"],Be=["for"],je=["id","name"],Ve=["for"],qe={class:"d-flex align-items-center justify-content-center gap-4"},Ie={class:"with_cun_select custom-select"},Ne={class:"flex justify-content-center dropdown_card"},Ue={__name:"GradientArea",props:{initialMonths:{type:Array,required:!0},initialAllMonths:{type:Array,required:!0},initialOption:{type:Object,required:!0},initialMonthlyData:{type:Object,required:!0},initialSeriesData:{type:Array,required:!0}},emits:["rental_change"],async setup(T,{emit:f}){let x,F;const P=([x,F]=z(()=>H(()=>import("./DTGHDczv.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),x=await x,F(),x),p=T,M=f,_=l(Math.random().toString(36).substr(2,9)),{t:w}=I(),D=l(!1),v=l({id:0}),g=l(p.initialMonths),A=l(p.initialAllMonths),E=l(p.initialMonthlyData),s=l(null),h=t=>Array.from({length:t},()=>0),R=()=>{var r;if(console.log("handleMonthChange triggered",v.value),!v.value||typeof v.value.id>"u"){console.error("Invalid selected month: ",v.value);return}M("rental_change",v.value.id),console.log("Emitted rental_change with ID:",v.value.id);const t=v.value.id;if(t===0)a.value.xAxis.data=A.value,a.value.series[0].data=p.initialSeriesData[0]||[],a.value.series[1].data=p.initialSeriesData[1]||[];else{const u=g.value.find(b=>b.id===t);if(!u){console.error("Invalid month ID: ",t);return}const c=u.days,m=Array.from({length:c},(b,j)=>`اليوم ${j+1}`);a.value.xAxis={type:"category",boundaryGap:!1,data:m,axisLabel:{interval:0,rotate:45}};const C=E.value[t];C?(a.value.series[0].data=C.store||[],a.value.series[1].data=C.market||[]):(a.value.series[0].data=h(c),a.value.series[1].data=h(c))}(r=s.value)!=null&&r.chart?s.value.chart.setOption(a.value,!0):console.error("Chart instance is not ready.")},a=l({legend:{top:"5%",show:!1,selected:{[w("Global.marketData")]:!0,[w("Global.storeDataData")]:!0}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",show:!1},series:[{name:w("Global.marketData"),type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#4681f4"},itemStyle:{color:"#013660"},areaStyle:{color:new P.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(70, 129, 244, 0.6)"},{offset:1,color:"rgba(70, 129, 244, 0.2)"}])},data:[]},{name:w("Global.storeDataData"),type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#f75c5c"},itemStyle:{color:"#e5254a"},areaStyle:{color:new P.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(247, 92, 92, 0.6)"},{offset:1,color:"rgba(247, 92, 92, 0.2)"}])},data:[]}]}),d=t=>{var u;const r={id:Number(t.target.value)};if(r){const c=(u=s.value)==null?void 0:u.chart;if(!c)return;switch(r.id){case 0:a.value.legend.selected[w("Global.marketData")]=!0,a.value.legend.selected[w("Global.storeDataData")]=!0;break;case 1:a.value.legend.selected[w("Global.marketData")]=!1,a.value.legend.selected[w("Global.storeDataData")]=!0;break;case 2:a.value.legend.selected[w("Global.marketData")]=!0,a.value.legend.selected[w("Global.storeDataData")]=!1;break}c.setOption(a.value,!0)}};return V(()=>p.initialMonthlyData,t=>{var r;if(v.value&&v.value.id!==0){const u=v.value.id,c=t[u];c&&(a.value.series[0].data=c.store||[],a.value.series[1].data=c.market||[],(r=s.value)!=null&&r.chart&&s.value.chart.setOption(a.value,!0))}},{deep:!0}),V(()=>p.initialSeriesData,t=>{var r;t&&Array.isArray(t)&&t.length>0&&(a.value.series[0].data=t[0]||[],a.value.series[1].data=t[1]||[],(r=s.value)!=null&&r.chart&&s.value.chart.setOption(a.value,!0))},{deep:!0,immediate:!0}),_e(()=>{D.value=!0,a.value.xAxis.data=A.value,Array.isArray(p.initialSeriesData)&&p.initialSeriesData.length>=2&&(a.value.series[0].data=p.initialSeriesData[0]||[],a.value.series[1].data=p.initialSeriesData[1]||[])}),N(()=>{var t;(t=s.value)!=null&&t.chart&&s.value.chart.setOption(a.value,!0)}),(t,r)=>{const u=K,c=Le;return D.value?(S(),G("div",Oe,[e("div",Fe,[e("input",{type:"radio",id:`radio1-${_.value}`,name:`slider-${_.value}`,value:"1",onChange:d},null,40,Pe),e("label",{for:`radio1-${_.value}`,class:"cl-red"},"للمتجر",8,Re),e("input",{type:"radio",id:`radio2-${_.value}`,name:`slider-${_.value}`,value:"0",onChange:d,checked:""},null,40,Te),e("label",{for:`radio2-${_.value}`},"الكل",8,Be),e("input",{type:"radio",id:`radio3-${_.value}`,name:`slider-${_.value}`,value:"2",onChange:d},null,40,je),e("label",{for:`radio3-${_.value}`,class:"main-cl"},"للسوق",8,Ve),r[1]||(r[1]=e("div",{class:"marker"},null,-1))]),e("div",qe,[e("div",Ie,[e("div",Ne,[y(u,{modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=m=>v.value=m),onChange:R,options:g.value,optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),y(c,{ref_key:"chart",ref:s,option:a.value,style:{height:"250px",width:"100%",display:"block"}},null,8,["option"])])):O("",!0)}}},ze=Q(W),He={key:0,class:"skeleton-chart"},Ze={class:"skeleton-bars"},Je={class:"d-flex align-items-center gap-3 justify-content-end"},Ke={key:0,class:"w-100"},Qe={class:"d-flex align-items-center justify-content-center gap-4"},We={class:"with_cun_select custom-select"},Xe={class:"flex justify-content-center dropdown_card"},Ye={__name:"TimeLimit",props:{apiEndpoint:{type:String,required:!0}},async setup(T){let f,x;const F=te(),{response:P}=se(),{token:p}=Z(oe());I();const M=T,_=([f,x]=z(()=>H(()=>import("./DTGHDczv.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),f=await f,x(),f);_.use([le,X,Y,ee,ae]);const w=q(()=>({headers:{Authorization:`Bearer ${p.value}`}})),D=l(!1),v=l(null),g=l(null),A=l([]),E=l([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),s=l({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{interval:0,rotate:45}},yAxis:{type:"value",show:!1},series:[{type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#4681f4"},itemStyle:{color:"#013660"},areaStyle:{color:new _.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(70, 129, 244, 0.6)"},{offset:1,color:"rgba(70, 129, 244, 0.2)"}])},data:[]}]}),h=async(a=0)=>{var d,t,r;D.value=!0;try{const u=await F.get(`${M.apiEndpoint}${a?`?filterByMonth=${a}`:""}`,w.value);if(console.log("API Response:",u.data),P(u)==="success"){if(!((t=(d=u.data)==null?void 0:d.data)!=null&&t.peakTimeData)){console.log("No peakTimeData found in response"),s.value.xAxis.data=[],s.value.series[0].data=[];return}const c=u.data.data.peakTimeData;console.log("Chart Data:",c),A.value=c;try{a===0?(s.value.xAxis.data=c.map(m=>m.month),s.value.series[0].data=c.map(m=>m.value)):(s.value.xAxis.data=c.map(m=>`اليوم ${m.day}`),s.value.series[0].data=c.map(m=>m.value)),(r=g.value)!=null&&r.chart&&g.value.chart.setOption(s.value,!0)}catch(m){console.error("Error mapping data:",m),console.log("Data structure:",c),s.value.xAxis.data=[],s.value.series[0].data=[]}}}catch(u){console.error("Error fetching peak time data:",u),s.value.xAxis.data=[],s.value.series[0].data=[]}finally{D.value=!1}},R=async a=>{var t;const d=(t=a.value)==null?void 0:t.id;d!==void 0&&await h(d)};return N(async()=>{v.value=E.value[0],await h()}),V(A,()=>{var a;(a=g.value)!=null&&a.chart&&g.value.chart.setOption(s.value,!0)},{deep:!0}),(a,d)=>{const t=U,r=K,u=ze,c=ye;return S(),G("div",null,[D.value?(S(),G("div",He,[e("div",Ze,[e("div",Je,[y(t,{width:"5rem",height:".5rem"}),d[1]||(d[1]=e("div",{class:"skeleton-bar",style:{width:"80%"}},null,-1))])])])):O("",!0),y(c,null,{default:J(()=>[D.value?O("",!0):(S(),G("div",Ke,[e("div",Qe,[e("div",We,[e("div",Xe,[y(r,{modelValue:v.value,"onUpdate:modelValue":d[0]||(d[0]=m=>v.value=m),onChange:R,options:E.value,optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),y(u,{ref_key:"chart",ref:g,class:"custom-chart",option:s.value,style:{height:"265px",width:"100%",display:"block"}},null,8,["option"])]))]),_:1})])}}},ea=Q(W),aa={key:0,class:"skeleton-chart"},ta={class:"skeleton-bars"},sa={class:"d-flex align-items-center gap-3 justify-content-end"},oa={key:0,class:"w-100"},la={class:"d-flex align-items-center justify-content-center gap-4"},na={class:"with_cun_select custom-select"},ia={class:"flex justify-content-center dropdown_card"},ra={__name:"getOrders",props:{apiEndpoint:{type:String,required:!0}},async setup(T){let f,x;const F=te(),{response:P}=se(),{token:p}=Z(oe());I();const M=T,_=([f,x]=z(()=>H(()=>import("./DTGHDczv.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),f=await f,x(),f);_.use([le,X,Y,ee,ae]);const w=q(()=>({headers:{Authorization:`Bearer ${p.value}`}})),D=l(!1),v=l(null),g=l(null),A=l([]),E=l([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),s=l({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{interval:0,rotate:45}},yAxis:{type:"value",show:!1},series:[{type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#e5254a"},itemStyle:{color:"#e5254a"},areaStyle:{color:new _.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(247, 92, 92, 0.6)"},{offset:1,color:"rgba(247, 92, 92, 0.2)"}])},data:[]}]}),h=async(a=0)=>{var d,t,r,u,c;D.value=!0;try{const m=await F.get(`${M.apiEndpoint}${a?`?filterByMonth=${a}`:""}`,w.value);if(console.log("API Response:",m.data),P(m)==="success"){const C=((t=(d=m.data)==null?void 0:d.data)==null?void 0:t.peakTimeData)||((u=(r=m.data)==null?void 0:r.data)==null?void 0:u.requestRateData);if(!C){console.log("No data found in response"),s.value.xAxis.data=[],s.value.series[0].data=[];return}console.log("Chart Data:",C),A.value=C;try{a===0?(s.value.xAxis.data=C.map(b=>b.month),s.value.series[0].data=C.map(b=>b.value)):(s.value.xAxis.data=C.map(b=>`اليوم ${b.day}`),s.value.series[0].data=C.map(b=>b.value)),(c=g.value)!=null&&c.chart&&g.value.chart.setOption(s.value,!0)}catch(b){console.error("Error mapping data:",b),console.log("Data structure:",C),s.value.xAxis.data=[],s.value.series[0].data=[]}}}catch(m){console.error("Error fetching peak time data:",m),s.value.xAxis.data=[],s.value.series[0].data=[]}finally{D.value=!1}},R=async a=>{var t;const d=(t=a.value)==null?void 0:t.id;d!==void 0&&await h(d)};return N(async()=>{v.value=E.value[0],await h()}),V(A,()=>{var a;(a=g.value)!=null&&a.chart&&g.value.chart.setOption(s.value,!0)},{deep:!0}),(a,d)=>{const t=U,r=K,u=ea,c=ye;return S(),G("div",null,[i(D)?(S(),G("div",aa,[e("div",ta,[e("div",sa,[y(t,{width:"5rem",height:".5rem"}),d[1]||(d[1]=e("div",{class:"skeleton-bar",style:{width:"80%"}},null,-1))])])])):O("",!0),y(c,null,{default:J(()=>[i(D)?O("",!0):(S(),G("div",oa,[e("div",la,[e("div",na,[e("div",ia,[y(r,{modelValue:i(v),"onUpdate:modelValue":d[0]||(d[0]=m=>$e(v)?v.value=m:null),onChange:R,options:i(E),optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),y(u,{ref_key:"chart",ref:g,class:"custom-chart",option:i(s),style:{height:"300px",width:"100%",display:"block"}},null,8,["option"])]))]),_:1})])}}},ca="data:image/svg+xml,%3csvg%20width='67'%20height='65'%20viewBox='0%200%2067%2065'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='1.5'%20y='1.5'%20width='52'%20height='52'%20rx='12.5'%20stroke='%23E5254A'%20stroke-width='3'/%3e%3crect%20x='13.5'%20y='11.5'%20width='52'%20height='52'%20rx='12.5'%20fill='white'%20stroke='%23E5254A'%20stroke-width='3'/%3e%3c/svg%3e",da="data:image/svg+xml,%3csvg%20width='90'%20height='88'%20viewBox='0%200%2090%2088'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M28.3258%2023.2449H79.3447C80.7369%2023.2449%2082.1105%2023.5858%2083.3592%2024.2413C84.6078%2024.8967%2085.6981%2025.8492%2086.5456%2027.0249C87.3931%2028.2007%2087.9752%2029.5682%2088.2469%2031.0217C88.5185%2032.4752%2088.4724%2033.9758%2088.1121%2035.4073L83.6202%2053.2521C82.7419%2056.7413%2080.8066%2059.8245%2078.1143%2062.0235C75.422%2064.2225%2072.1233%2065.4145%2068.7298%2065.4145H38.9407C35.5472%2065.4145%2032.2485%2064.2225%2029.5562%2062.0235C26.8639%2059.8245%2024.9285%2056.7413%2024.0502%2053.2521L19.5584%2035.4073C19.1981%2033.9758%2019.1519%2032.4752%2019.4235%2031.0217C19.6951%2029.5682%2020.2772%2028.2007%2021.1248%2027.0249C21.9723%2025.8492%2023.0625%2024.8967%2024.3112%2024.2413C25.5599%2023.5858%2026.9336%2023.2449%2028.3258%2023.2449Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M21.1621%2041.7777L13.682%2012.0615C12.2046%206.19243%207.20811%202.11133%201.5%202.11133'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M42.6199%2081.8802C42.6199%2082.4066%2042.5225%2082.9278%2042.3332%2083.4142C42.144%2083.9005%2041.8667%2084.3424%2041.517%2084.7146C41.1673%2085.0868%2040.7522%2085.3821%2040.2953%2085.5835C39.8384%2085.7849%2039.3488%2085.8886%2038.8543%2085.8886C38.3598%2085.8886%2037.8702%2085.7849%2037.4133%2085.5835C36.9564%2085.3821%2036.5413%2085.0868%2036.1916%2084.7146C35.8419%2084.3424%2035.5646%2083.9005%2035.3753%2083.4142C35.1861%2082.9278%2035.0886%2082.4066%2035.0886%2081.8802C35.0886%2081.3538%2035.1861%2080.8326%2035.3753%2080.3463C35.5646%2079.86%2035.8419%2079.4181%2036.1916%2079.0459C36.5413%2078.6736%2036.9564%2078.3784%2037.4133%2078.177C37.8702%2077.9755%2038.3598%2077.8718%2038.8543%2077.8718C39.3488%2077.8718%2039.8384%2077.9755%2040.2953%2078.177C40.7522%2078.3784%2041.1673%2078.6736%2041.517%2079.0459C41.8667%2079.4181%2042.144%2079.86%2042.3332%2080.3463C42.5225%2080.8326%2042.6199%2081.3538%2042.6199%2081.8802Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M70.2618%2081.8802C70.2618%2082.4066%2070.1645%2082.9278%2069.9752%2083.4142C69.786%2083.9005%2069.5085%2084.3424%2069.1588%2084.7146C68.8091%2085.0868%2068.3941%2085.3821%2067.9373%2085.5835C67.4804%2085.7849%2066.9906%2085.8886%2066.4961%2085.8886C66.0016%2085.8886%2065.512%2085.7849%2065.0551%2085.5835C64.5982%2085.3821%2064.1831%2085.0868%2063.8334%2084.7146C63.4837%2084.3424%2063.2064%2083.9005%2063.0172%2083.4142C62.8279%2082.9278%2062.7305%2082.4066%2062.7305%2081.8802C62.7305%2081.3538%2062.8279%2080.8326%2063.0172%2080.3463C63.2064%2079.86%2063.4837%2079.4181%2063.8334%2079.0459C64.1831%2078.6736%2064.5982%2078.3784%2065.0551%2078.177C65.512%2077.9755%2066.0016%2077.8718%2066.4961%2077.8718C66.9906%2077.8718%2067.4804%2077.9755%2067.9373%2078.177C68.3941%2078.3784%2068.8091%2078.6736%2069.1588%2079.0459C69.5085%2079.4181%2069.786%2079.86%2069.9752%2080.3463C70.1645%2080.8326%2070.2618%2081.3538%2070.2618%2081.8802Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3ccircle%20cx='45.0089'%20cy='39.4178'%20r='1.56401'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3ccircle%20cx='62.1673'%20cy='39.4178'%20r='1.56401'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3cmask%20id='mask0_1093_3777'%20style='mask-type:alpha'%20maskUnits='userSpaceOnUse'%20x='24'%20y='3'%20width='60'%20height='60'%3e%3ccircle%20cx='54.2009'%20cy='32.6771'%20r='29.4145'%20fill='%23E5254A'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_1093_3777)'%3e%3ccircle%20cx='54.2009'%20cy='78.0243'%20r='27.9145'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3c/g%3e%3c/svg%3e",ua={class:"container"},ma={class:"row"},ha={class:"col-12 col-lg-6 mb-3 info-box"},pa={class:"info-box-item info-box-item align-items-center store-clients gap-3 flex-column-sm"},va={class:"d-flex"},_a={class:"info-content"},ya={key:0,class:"d-flex align-items-end"},fa={class:"hint-card"},ga={class:"col-12 col-lg-6 mb-3 info-box"},xa={class:"d-flex align-items-center gap-3"},wa={class:"info-content"},ba={key:0,class:"d-flex align-items-end"},Da={class:"col-12 mb-3"},Ca={class:"layout-form chart_layout"},ka={class:"main-title text-center fw-normal mb-4"},$a={class:"col-12 col-lg-6 mb-3"},Aa={class:"layout-form chart_layout"},Sa={class:"main-title text-center fw-normal mb-3"},Ma={class:"desc text-center mb-0"},Ea={class:"col-12 col-lg-6 mb-3"},Ga={class:"layout-form chart_layout"},La={class:"col-12 col-lg-6 mb-3"},Oa={class:"layout-form chart_layout"},Fa={class:"col-12 col-lg-6 mb-3"},Pa={class:"layout-form"},Ra={class:"col-12 mb-5"},Ta={class:"layout-form chart_layout"},Ba={__name:"sales",setup(T){I();const{response:f}=se(),x=te(),F=l("تحديد الجنس"),P=l({showAll:"الكل",males:"الذكور",females:"الإناث"}),p=l([]),M=l([]),_=q(()=>({headers:{Authorization:`Bearer ${D.value}`}}));Me([le,X,Y,ee,ae]);const w=oe(),{token:D,user:v}=Z(w);l([[40,50,60,70,65,75,85,80,90,95,110,115],[30,40,55,50,55,60,75,72,78,82,90,95]]);const g=l([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),A=l(["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]),E=l(!1),s=l({xAxis:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],series:null}),h=l(!0),R=l(null),a=l([[],[]]),d=l([[],[]]),t=l({}),r=l({}),u=l([]),c=q(()=>M.value?{labels:M.value.map(o=>({id:o.id,text:o.name,image:o.logo})),series:M.value.map(o=>Number(o.saleRate.toFixed(2))),colors:{bar:"#f75c5c",text:"#ffffff"}}:{labels:[],series:[],colors:{bar:"#f75c5c",text:"#ffffff"}}),m=async()=>{h.value=!0,await x.get("GetSalesHomeStaticData",_.value).then(o=>{f(o)=="success"&&(p.value=o.data.data),h.value=!1}).catch(o=>{console.error(o)})},C=async()=>{h.value=!0,await x.get("GetSalesCommonProductsData",_.value).then(o=>{f(o)=="success"&&(M.value=o.data.data.slice(0,4).reverse(),console.log(M.value,"HomeData")),h.value=!1}).catch(o=>{console.error(o)})},b=async(o=0)=>{h.value=!0;try{console.log(`Fetching data for monthId: ${o}`);const n=await x.get(`AverageShoppingCartSize?type=0&filterByMonth=${o}`,_.value);if(f(n)==="success"){const k=n.data.data;if(o===0)a.value=[k.marketData.map($=>$.value),k.storeDataData.map($=>$.value)];else{const $={market:k.marketData.map(L=>L.value),store:k.storeDataData.map(L=>L.value)};t.value[o]=$,console.log("Updated manualMonthlyData:",t.value)}R.value=k}}catch(n){console.error("Error fetching data:",n)}finally{h.value=!1}},j=async(o=0)=>{h.value=!0;try{console.log(`Fetching data for monthId: ${o}`);const n=await x.get(`GetSalesChartData?type=0&filterByMonth=${o}`,_.value);if(f(n)==="success"){const k=n.data.data;if(o===0)d.value=[k.marketData.map($=>$.value),k.storeDataData.map($=>$.value)];else{const $={market:k.marketData.map(L=>L.value),store:k.storeDataData.map(L=>L.value)};r.value[o]=$,console.log("Updated manualMonthlyData:",r.value)}R.value=k}}catch(n){console.error("Error fetching data:",n)}finally{h.value=!1}},fe=async()=>{h.value=!0;try{const o=await x.get("DemographicDataChartData?GenderType=0",_.value);if(f(o)==="success"){const n=o.data.data;Array.isArray(n)?(u.value=n,console.log("Updated Source Data:",u.value)):console.error("demographicData is not an array:",n)}}catch(o){console.error("Error fetching demographic data:",o)}finally{h.value=!1}},ge=async o=>{console.log(`Handling month change for monthId: ${o}`),await b(o),console.log("manualMonthlyData.value after update:",t.value)},xe=async o=>{console.log(`Handling month change for monthId: ${o}`),await j(o),console.log("manualMonthlyData.value after update:",t.value)};return N(async()=>{await b(0),await j(0),await fe(),await m(),await C()}),_e(()=>{E.value=!0,s.value={xAxis:A.value,series:[40,50,60,70,65,75,85,80,90,95,110,115]}}),(o,n)=>{var ie,re,ce,de;const k=U,$=Se("font-awesome-icon"),L=ke,ne=Ue,we=Ee,be=Ye,De=ra,Ce=Ge;return S(),G("div",null,[e("main",null,[e("div",ua,[e("div",ma,[e("div",ha,[e("div",pa,[e("div",va,[n[2]||(n[2]=e("img",{src:ca,alt:"Store Icon"},null,-1)),e("div",_a,[n[1]||(n[1]=e("span",{class:"main-cl main-title bold mb-2"},"معدل بيع منتجات للمتجر",-1)),!((ie=i(p))!=null&&ie.length)&&!i(h)?(S(),G("h2",ya,[pe(B((re=i(p))==null?void 0:re.storeSalesPercent)+" ",1),n[0]||(n[0]=e("div",{class:"hint-present"},"%",-1))])):O("",!0),(ce=i(p))!=null&&ce.length||i(h)?(S(),ve(k,{key:1,class:"mt-3",width:"5rem",height:".5rem"})):O("",!0)])]),e("h4",fa,"نسبة بيع المنتج الواحد من الكمية الكلية المتوفرة ترجمة الرقم: أنه اذا كانت الكمية الكلية للمنتج هي 100 اذن تم بيع "+B((de=i(p))==null?void 0:de.storeSalesPercent)+" تقريبا",1)])]),e("div",ga,[y(L,{to:"/salesDetails",class:"info-box-item cart-clients gap-3 flex-wrap justify-content-between"},{default:J(()=>{var ue,me,he;return[e("div",xa,[n[5]||(n[5]=e("img",{src:da,alt:"User Icon"},null,-1)),e("div",wa,[n[4]||(n[4]=e("span",null,"متوسط السلات المتروكة للمتجر",-1)),!((ue=i(p))!=null&&ue.length)&&!i(h)?(S(),G("h2",ba,[pe(B((me=i(p))==null?void 0:me.abondendCartAverage)+" ",1),n[3]||(n[3]=e("div",{class:"hint-span"},"سلة",-1))])):O("",!0),(he=i(p))!=null&&he.length||i(h)?(S(),ve(k,{key:1,class:"mt-2",width:"5rem",height:".5rem"})):O("",!0)])]),y($,{class:"fa-2x",icon:["fas","angle-left"]})]}),_:1})]),e("div",Da,[e("div",Ca,[e("h3",ka,B(o.$t("Global.sales")),1),y(ne,{initialMonths:i(g),initialAllMonths:i(A),initialMonthlyData:i(r),initialSeriesData:i(d),onRental_change:xe,loading:i(h)},null,8,["initialMonths","initialAllMonths","initialMonthlyData","initialSeriesData","loading"])])]),e("div",$a,[e("div",Aa,[e("h3",Sa,B(o.$t("Global.commercial_Products")),1),e("h3",Ma,B(o.$t("Global.highest_Sales")),1),y(we,{"data-ready":i(E),"products-data":i(c)},null,8,["data-ready","products-data"])])]),e("div",Ea,[e("div",Ga,[n[6]||(n[6]=e("h3",{class:"main-title text-center fw-normal mb-4"},"وقت الذروة",-1)),y(be,{apiEndpoint:"GetPeakTime"})])]),e("div",La,[e("div",Oa,[n[7]||(n[7]=e("h3",{class:"main-title fw-normal text-center mb-3"},"معدل الطلبات",-1)),y(De,{apiEndpoint:"GetRequestRateChartData"})])]),e("div",Fa,[e("div",Pa,[n[8]||(n[8]=e("h3",{class:"main-title text-center fw-normal mb-4"},"التحليل الديموغرافي",-1)),y(Ce,{"rental-names":i(P),"placeholder-text":i(F),"source-data":i(u)},null,8,["rental-names","placeholder-text","source-data"])])]),e("div",Ra,[e("div",Ta,[n[9]||(n[9]=e("h3",{class:"main-title fw-normal text-center mb-4"},"متوسط حجم سلة الشراء",-1)),y(ne,{initialMonths:i(g),initialAllMonths:i(A),initialMonthlyData:i(t),initialSeriesData:i(a),loading:i(h),onRental_change:ge},null,8,["initialMonths","initialAllMonths","initialMonthlyData","initialSeriesData","loading"])])])])])])])}}},Ya=Ae(Ba,[["__scopeId","data-v-23473cfa"]]);export{Ya as default};
