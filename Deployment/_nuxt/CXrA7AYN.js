import{s as z}from"./GKbYyDwc.js";import{h as B,r as o,s as G,e as M,c as p,a as e,t as l,f as N,j as y,p as w,u,i as h,b as F,w as k,d as U,g as j,o as _,n as $}from"./4aL2WHGa.js";import{u as R,r as q}from"./DXutHP6I.js";import{t as E}from"./MDezpcmL.js";import{u as L}from"./DsWR8yoU.js";import"./CXNM1hIW.js";import"./C3DeWKiO.js";import"./B0dH-q85.js";import"./BeNpBzLY.js";const H={class:"container"},J={class:"layout-form custom-width"},K={class:"main-title bold lg mb-5"},O={class:"row"},Q={class:"col-12 col-md-8 mr-auto"},W={class:"form-group"},X={class:"label"},Y={class:"main_input"},Z=["placeholder"],P={class:"form-group"},ee={class:"label"},se={class:"with_cun_select"},te={class:"main_input"},ae=["placeholder"],le={class:"card d-flex justify-content-center dropdown_card"},oe={key:0,class:"flex-group-me"},ne=["alt","src"],ie={key:1},ue={class:"flex-group-me"},ce=["alt","src"],re={class:"form-group"},de={class:"label"},me=["placeholder"],pe={class:"custom-btn w-100 mr-auto mt-4"},_e={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ve={__name:"Complaints",setup(ve){const{t:A}=B({useScope:"global"}),v=o(null),{response:f}=q(),{successToast:V,errorToast:g}=E(),b=R(),C=L(),{token:I}=G(C);`${I.value}`;const c=o(null),r=o(null),d=o(!1),m=o([]),n=o(null),i=o([]),x=()=>{let t=document.querySelectorAll(".validInputs");for(let s=0;s<t.length;s++)t[s].value===""&&m.value.push(A(`validation.${t[s].getAttribute("valid")}`))},D=async()=>{d.value=!0;const t=new FormData(v.value);t.append("country_code",n.value.key),x(),m.value.length?(g(m.value[0]),d.value=!1,m.value=[]):b.post("new-complaint",t).then(s=>{f(s)=="success"?(V(s.data.msg),v.value.reset(),r.value=null,c.value=null):g(s.data.msg),d.value=!1})},S=async()=>{await b.get("countries").then(t=>{if(f(t)=="success"){i.value=t.data.data;for(let s=0;s<i.value.length;s++)i.value[s].id==1&&(n.value=i.value[s])}}).catch(t=>console.log(t))};return M(async()=>{await S()}),(t,s)=>{const T=z;return _(),p("div",H,[e("div",J,[e("h1",K,l(t.$t("Global.complaints_suggestions")),1),e("form",{onSubmit:N(D,["prevent"]),ref_key:"complaintsForm",ref:v},[e("div",O,[e("div",Q,[e("div",W,[e("label",X,l(t.$t("Auth.username")),1),e("div",Y,[s[3]||(s[3]=e("i",{class:"fas fa-user sm-icon"},null,-1)),y(e("input",{type:"text",class:"custum-input-icon validInputs",valid:"name",name:"user_name","onUpdate:modelValue":s[0]||(s[0]=a=>h(c)?c.value=a:null),placeholder:t.$t("Auth.enter_username")},null,8,Z),[[w,u(c)]])])]),e("div",P,[e("label",ee,l(t.$t("Auth.mobile_number")),1),e("div",se,[e("div",te,[s[4]||(s[4]=e("i",{class:"fas fa-mobile-alt sm-icon"},null,-1)),y(e("input",{type:"number",class:"custum-input-icon validInputs",valid:"phone",name:"phone","onUpdate:modelValue":s[1]||(s[1]=a=>h(r)?r.value=a:null),placeholder:t.$t("Auth.please_mobile_number")},null,8,ae),[[w,u(r)]])]),e("div",le,[F(T,{modelValue:u(n),"onUpdate:modelValue":s[2]||(s[2]=a=>h(n)?n.value=a:null),options:u(i),optionLabel:"name"},{value:k(a=>[a.value?(_(),p("div",oe,[e("img",{alt:a.value.label,src:a.value.image,class:$(`mr-2 flag flag-${a.value.key}`),style:{width:"24px"},loading:"lazy"},null,10,ne),e("div",null,l(a.value.key),1)])):(_(),p("span",ie,l(a.placeholder),1))]),option:k(a=>[e("div",ue,[e("img",{alt:a.option.label,src:a.option.image,class:$(`mr-2 flag flag-${a.option.key}`),style:{width:"24px"},loading:"lazy"},null,10,ce),e("div",null,l(a.option.key),1)])]),_:1},8,["modelValue","options"])])])]),e("div",re,[e("label",de,l(t.$t("Global.complaintsuggestion")),1),e("textarea",{class:"main_input main_area mb-4 validInputs",valid:"complaint",name:"complaint",placeholder:t.$t("Global.please_enter_complaints")},null,8,me)]),e("button",pe,[U(l(t.$t("Global.send"))+" ",1),u(d)?(_(),p("span",_e)):j("",!0)])])])],544)])])}}};export{Ve as default};
