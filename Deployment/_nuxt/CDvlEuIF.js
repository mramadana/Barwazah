import{_ as I}from"./0iLxrGx8.js";import{e as D,r as o,s as B,c as v,a as t,t as l,b as M,f as R,g as h,v as y,u as i,i as b,n as g,d as F,h as U,o as P,j}from"./DbmvQK5j.js";import{_ as q}from"./D_hfAYml.js";import{u as z,a as E,r as G}from"./f4YB9Qgh.js";import{t as H}from"./BmTKqZTi.js";const J={class:"container"},K={class:"auth-layout flex-column"},L={class:"main-title bold lg mb-5"},O={class:"layout-form md custom-width"},Q={class:"row"},W={class:"col-12 col-md-10 mr-auto"},X={class:"main-title bold mb-4"},Y={class:"form-group"},Z={class:"label"},x={class:"main_input with_icon"},ss=["type","placeholder"],ts={class:"form-group"},es={class:"label"},os={class:"main_input with_icon"},as=["type","placeholder"],ns={class:"custom-btn mr-auto"},ls={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ms={__name:"confirmPassword",setup(is){const{t:m}=D({useScope:"global"}),r=o([]),d=o(""),u=o(""),{response:A}=G(),{successToast:N,errorToast:c}=H(),$=z(),T=E(),{user:f}=B(T),p=o(!1),V=o(null),a=o({definitelyNewPassword:!1,definitelyNewPassword_2:!1});function S(){r.value=[];let e=document.querySelectorAll(".validInputs");for(let s=0;s<e.length;s++)e[s].value===""&&r.value.push(m(`validation.${e[s].name}`))}const _=e=>a.value[e]?"text":"password",w=e=>{a.value[e]=!a.value[e]},k=async()=>{if(S(),r.value.length){c(r.value[0]);return}p.value=!0;try{const e={accountType:f.value.accountType,email:f.value.email,oldPassword:d.value,newPassword:u.value},s=await $.post("ChangePassword",e);A(s)==="success"?(N(m("Auth.confirm_new_password")),j("/Auth/passwordResets")):c(s.data.message)}catch(e){console.error(e),c("An error occurred. Please try again.")}finally{p.value=!1}};return(e,s)=>{const C=I;return P(),v("div",J,[t("div",K,[t("h1",L,l(e.$t("Auth.forgot_password")),1),t("div",O,[s[6]||(s[6]=t("img",{src:q,alt:"logo",class:"Auth-logo mb-5"},null,-1)),M(C,{activeSteps:[3,2,1]}),t("form",{onSubmit:R(k,["prevent"]),ref_key:"confirmPasswordForm",ref:V},[t("div",Q,[t("div",W,[t("p",X,l(e.$t("Auth.new_password")),1),t("div",Y,[t("label",Z,l(e.$t("Auth.password_2")),1),t("div",x,[h(t("input",{type:_("definitelyNewPassword"),name:"password","onUpdate:modelValue":s[0]||(s[0]=n=>b(d)?d.value=n:null),class:"custum-input-icon validInputs",placeholder:e.$t("Auth.password_2")},null,8,ss),[[y,i(d)]]),t("button",{class:g(["static-btn with_eye",{active_class:i(a).definitelyNewPassword}]),type:"button",onClick:s[1]||(s[1]=n=>w("definitelyNewPassword"))},s[4]||(s[4]=[t("i",{class:"far fa-eye icon"},null,-1)]),2)])]),t("div",ts,[t("label",es,l(e.$t("Auth.confirm_password")),1),t("div",os,[h(t("input",{type:_("definitelyNewPassword_2"),name:"password_confirmation","onUpdate:modelValue":s[2]||(s[2]=n=>b(u)?u.value=n:null),class:"custum-input-icon validInputs",placeholder:e.$t("Auth.confirm_password")},null,8,as),[[y,i(u)]]),t("button",{class:g(["static-btn with_eye",{active_class:i(a).definitelyNewPassword_2}]),type:"button",onClick:s[3]||(s[3]=n=>w("definitelyNewPassword_2"))},s[5]||(s[5]=[t("i",{class:"far fa-eye icon"},null,-1)]),2)])]),t("button",ns,[F(l(e.$t("Auth.save"))+" ",1),i(p)?(P(),v("span",ls)):U("",!0)])])])],544)])])])}}};export{ms as default};
