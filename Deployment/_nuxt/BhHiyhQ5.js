const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Khe5s5Tr.js","./BaWMyBvg.js","./geFSAwWZ.js","./entry.B0b_3z4T.css"])))=>i.map(i=>d[i]);
import{h as M,s as U,l as Y,A as H,B as q,r,e as J,u as l,o as x,c as C,a,b as k,i as V,F as K,C as Q,n as X,t as p,w as Z,d as F,g as ee}from"./geFSAwWZ.js";import{s as te}from"./BQxbvYH4.js";import{i as ae,a as oe,b as se,c as re,d as le,_ as ne}from"./BaWMyBvg.js";import ie from"./IdLGiH84.js";import{u as ce,r as ue}from"./DXutHP6I.js";import{u as de}from"./BysA7udR.js";import{i as me}from"./CG7frSKv.js";import"./BXR435Dz.js";import"./wPo5RTQS.js";import"./CouHgqNR.js";import"./Cq5wwh5R.js";const pe=le(ne),he={key:0,class:"w-100"},ye={class:"d-flex align-items-center justify-content-center gap-4 mb-4"},fe={class:"with_cun_select custom-select"},_e={class:"flex justify-content-center dropdown_card"},ve={class:"chart-container"},be={class:"year-labels"},ge=["onClick"],we={class:"year-text"},xe={class:"dialog-content"},Ce={class:"main-title bold text-center mb-3"},ke={class:"mb-2 d-flex gap-2 justify-content-center mb-3"},Se={class:"value"},De={class:"mb-2 d-flex gap-2 justify-content-center mb-3"},Ee={class:"value"},Fe={class:"mb-2 d-flex gap-2 justify-content-center mb-3"},Be={class:"value"},$e={__name:"businessGrowth",async setup(I){let h,y;M();const i=ce(),{response:f}=ue(),{token:z}=U(de()),_=Y(()=>({headers:{Authorization:`Bearer ${z.value}`}})),S=([h,y]=H(()=>q(()=>import("./Khe5s5Tr.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),h=await h,y(),h);S.use([me,ae,oe,se,re]);const B=r(!1),$=r(!1),g=r({marketData:[],storeDataData:[]}),c=r(null),u=r({}),n=r(null),R=r([{name:"عرض الكل",id:0},{name:"2018",id:2018},{name:"2019",id:2019},{name:"2020",id:2020},{name:"2021",id:2021},{name:"2022",id:2022},{name:"2023",id:2023},{name:"2024",id:2024},{name:"2025",id:2025}]),A=async(t=0)=>{try{$.value=!0;const e=await i.get(`BusinessGrowthChart?year=${t}`,_.value);f(e)==="success"&&(g.value=e.data.data,j())}catch(e){console.error("Error fetching chart data:",e)}finally{$.value=!1}},j=()=>{const t=g.value.marketData.map(e=>e.year);b.value.xAxis.data=t,b.value.series[0].data=g.value.marketData.map(e=>e.value),b.value.series[1].data=g.value.storeDataData.map(e=>e.value),c.value&&c.value.chart&&c.value.chart.setOption(b.value,!0)},N=async t=>{t&&(n.value=t,await A(t.id))},d=r(!1),v=r("");r({});const O=async t=>{if(t.componentType==="xAxis"){const e=parseInt(t.value,10);v.value=e;try{const o=await i.get(`YearIndicators?year=${e}`,_.value);f(o)==="success"&&(u.value=o.data.data,d.value=!0)}catch(o){console.error("Error fetching year indicators:",o)}}else if(t&&t.name){const e=parseInt(t.name,10);v.value=e;try{const o=await i.get(`YearIndicators?year=${e}`,_.value);f(o)==="success"&&(u.value=o.data.data,d.value=!0)}catch(o){console.error("Error fetching year indicators:",o)}}},T=async t=>{const e=parseInt(t,10);v.value=e;try{const o=await i.get(`YearIndicators?year=${e}`,_.value);f(o)==="success"&&(u.value=o.data.data,d.value=!0)}catch(o){console.error("Error fetching year indicators:",o)}},b=r({legend:{bottom:"5%",show:!0,left:"center",icon:"circle",itemWidth:8,itemHeight:8,itemGap:25,textStyle:{color:"#2B3674",fontSize:12,fontFamily:"Cairo"}},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#E2E8F0",width:1}},backgroundColor:"#fff",borderColor:"#E2E8F0",borderWidth:1,textStyle:{color:"#2B3674",fontFamily:"Cairo"}},grid:{left:"3%",right:"4%",bottom:"15%",top:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,data:[],axisLine:{lineStyle:{color:"#E2E8F0"}},axisLabel:{interval:0,color:"#2B3674",fontFamily:"Cairo",fontSize:12,show:!0,clickable:!0,rich:{a:{color:"#2B3674",fontFamily:"Cairo",fontSize:12,cursor:"pointer",textDecoration:"underline"}},formatter:function(t){return"{a|"+t+"}"}}},yAxis:{type:"value",show:!1,splitLine:{lineStyle:{color:"#E2E8F0",type:"dashed"}},axisLabel:{color:"#2B3674",fontFamily:"Cairo",fontSize:12}},series:[{name:"اجمالي المبيعات للمتجر خلال السنة",type:"line",smooth:.5,symbol:"circle",symbolSize:6,showSymbol:!0,lineStyle:{width:2,color:"#2B3674"},itemStyle:{color:"#2B3674",borderWidth:2},areaStyle:{opacity:.3,color:new S.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(43, 54, 116, 0.3)"},{offset:1,color:"rgba(43, 54, 116, 0.05)"}])},data:[]},{name:"الحصة السوقية للمتجر من السوق",type:"line",smooth:.5,symbol:"circle",symbolSize:6,showSymbol:!0,lineStyle:{width:2,color:"#FF647C"},itemStyle:{color:"#FF647C",borderWidth:2},areaStyle:{opacity:.3,color:new S.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(255, 100, 124, 0.3)"},{offset:1,color:"rgba(255, 100, 124, 0.05)"}])},data:[]}]}),P=Y(()=>{if(!n.value||n.value.id===0)return Object.keys(D);const t=n.value.id,e=Object.keys(D).map(Number),o=Math.max(...e),w=[];for(let m=t;m<=o;m++)D[m]&&w.push(m.toString());return w}),D={2018:{sales:85,market:90,repeatRate:10},2019:{sales:91,market:110,repeatRate:15},2020:{sales:91,market:110,repeatRate:15},2023:{sales:102,market:140,repeatRate:5},2024:{sales:108,market:105,repeatRate:20},2025:{sales:115,market:150,repeatRate:18}},G=r(""),W=async()=>{try{const t=await i.get("GetGrowthReport",_.value);f(t)==="success"&&(G.value=t.data.data)}catch(t){console.error("Error fetching growth report:",t)}};return J(async()=>{const t=R.value[0];n.value=t,await A(t.id),await W(),B.value=!0,c.value&&c.value.chart&&c.value.chart.on("click",O)}),(t,e)=>{const o=te,w=pe,m=ie;return l(B)?(x(),C("div",he,[a("div",ye,[e[3]||(e[3]=a("label",{class:"label mb-0"},"اختر السنة",-1)),a("div",fe,[a("div",_e,[k(o,{modelValue:l(n),"onUpdate:modelValue":e[0]||(e[0]=s=>V(n)?n.value=s:null),options:l(R),optionLabel:"name",onChange:e[1]||(e[1]=s=>N(s.value)),placeholder:"اختر السنة",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),a("div",ve,[k(w,{ref_key:"chart",ref:c,class:"custom-chart",option:l(b),style:{height:"300px",width:"100%",display:"block"}},null,8,["option"]),a("div",be,[(x(!0),C(K,null,Q(l(P),s=>(x(),C("div",{key:s,class:X(["year-label",{active:l(v)===s}]),onClick:E=>T(s)},p(s),11,ge))),128))]),a("div",we,[e[4]||(e[4]=a("h3",{class:"main-title bold main-cl mb-3"},"تقرير نمو",-1)),a("h5",null,p(l(G)),1)])]),k(m,{visible:l(d),"onUpdate:visible":e[2]||(e[2]=s=>V(d)?d.value=s:null),class:"auth-daialog custum_dialog_width",modal:""},{default:Z(()=>{var s,E,L;return[a("div",xe,[a("h3",Ce,"مؤشرات سنة "+p(l(v)),1),a("ul",null,[a("li",ke,[e[5]||(e[5]=F("مبيعات السنة: ")),a("span",Se,p((s=l(u))==null?void 0:s.salesYear),1)]),a("li",De,[e[6]||(e[6]=F("الحصة السوقية للمتجر: ")),a("span",Ee,p((E=l(u))==null?void 0:E.storeMarketShare),1)]),a("li",Fe,[e[7]||(e[7]=F("نسبة تكرار الشراء: ")),a("span",Be,p((L=l(u))==null?void 0:L.repeatPurchaseRate),1)])])])]}),_:1},8,["visible"])])):ee("",!0)}}},Re={class:"container"},Ae={class:"layout-form chart_layout"},We={__name:"businessGrowth",setup(I){return(h,y)=>{const i=$e;return x(),C("div",Re,[a("div",Ae,[y[0]||(y[0]=a("h3",{class:"main-title bold text-center mb-5"},"نمو الاعمال",-1)),k(i)])])}}};export{We as default};
