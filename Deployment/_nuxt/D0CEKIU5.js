import z from"./CQbogLMU.js";import S from"./rHSb1jOz.js";import{s as E,r as m,m as F,e as M,c as o,a as e,d as x,t as l,u as a,f as n,y as D,w as J,T as Q,F as T,g as A,b as u,o as s}from"./CDjVABWN.js";import{u as U}from"./CVjljgFj.js";import{u as j,r as q}from"./Bwfks3Mu.js";import{t as H}from"./CsKsy3XR.js";import"./ddM-4g7H.js";import"./D8qqV3WI.js";import"./vdJJGTyi.js";import"./GeIhuEdx.js";import"./BXjy7pqY.js";import"./BbxwispC.js";import"./CW519Sr4.js";import"./nsv0RxdI.js";import"./Bp0jXu8c.js";import"./CK2DS4sa.js";import"./PzxPI1gE.js";import"./EQ1-9wFH.js";import"./Dfj_rsVC.js";const I=""+new URL("black_logo.BEQdJbb7.png",import.meta.url).href,K={class:"custom-height"},O={class:"container"},W={class:"layout-form custom-width lg"},X={class:"main-title bold lg mb-5 position-relative"},Y={key:0,class:"far fa-trash-alt trash-icon"},Z={key:1,class:"spinner-border spinner-border-sm m-0",role:"status","aria-hidden":"true"},tt={class:"resp-text"},et={key:0,class:"layout-form sm"},st={class:"notificatin-card"},ot={class:"d-flex"},at={class:"text text-start"},it={class:"main-title normal wrap_text"},nt={class:"d-flex align-items-center gap-2"},rt={class:"main-disc sm"},ct={class:"main-disc sm"},lt={class:"delete-btn"},dt=["onClick"],mt={key:1,class:"spinner-border spinner-border-sm m-0",role:"status","aria-hidden":"true"},ut={key:0},_t={key:1},pt={class:"notification-items"},ht={class:"right"},ft={class:"not_body"},gt={class:"time mb-3"},vt={key:2},Dt={__name:"Notifications",setup(yt){const{response:h}=q(),f=j(),{successToast:k,errorToast:b}=H(),B=U(),{token:N}=E(B),r=m(!0),_=m(!1),c=m([]),w=m(1),g=m(),v=m(),y={headers:{Authorization:`Bearer ${N.value}`}},$=async()=>{r.value=!0,await f.get(`notifications?page=${w.value}`,y).then(t=>{h(t)=="success"&&(c.value=t.data.data.notifications.data,v.value=t.data.data.notifications.pagination.total_items,g.value=t.data.data.notifications.pagination.per_page),r.value=!1}).catch(t=>{console.error(t)})},P=t=>{r.value=!0,w.value=t.page+1,window.scrollTo(0,0),$()},C=async t=>{r.value=!0,await f.delete(`delete-notification/${c.value[t].id}`,y).then(i=>{h(i)=="success"?(c.value.splice(t,1),k(i.data.msg)):b(i.data.msg),r.value=!1}).catch(i=>{console.error(i)})},G=async()=>{r.value=!0,await f.delete("delete-notifications",y).then(t=>{h(t)=="success"?(c.value=[],k(t.data.msg)):b(t.data.msg),r.value=!1}).catch(t=>{console.error(t)})};let L=F(()=>v.value>g.value);return M(async()=>{await $()}),(t,i)=>{const p=z,R=S;return s(),o("div",K,[e("div",O,[e("div",W,[e("h1",X,[x(l(t.$t("Global.notifications"))+" ",1),a(c).length?(s(),o("button",{key:0,type:"button",class:"deleteAll-btn",onClick:G},[a(_)?n("",!0):(s(),o("i",Y)),a(_)?(s(),o("span",Z)):n("",!0),e("div",tt,l(t.$t("Global.delete_all")),1)])):n("",!0)]),a(r)?n("",!0):(s(),D(Q,{key:0,name:"fade"},{default:J(()=>[(s(!0),o(T,null,A(a(c),(d,V)=>(s(),o("div",{key:d.index},[a(c).length?(s(),o("div",et,[e("div",st,[e("div",ot,[i[2]||(i[2]=e("img",{src:I,loading:"lazy",alt:"notificatin-img",class:"notificatin-img"},null,-1)),e("div",at,[e("h1",it,l(d.body),1),e("div",nt,[i[1]||(i[1]=e("i",{class:"far fa-clock main-disc"},null,-1)),e("div",null,[e("span",rt,l(t.$t("order.since"))+" : "+l(d.created_at),1),i[0]||(i[0]=x(" Â  ")),e("span",ct,l(d.time),1)])])])]),e("button",lt,[a(_)?n("",!0):(s(),o("i",{key:0,class:"far fa-trash-alt trash-icon",onClick:kt=>C(V)},null,8,dt)),a(_)?(s(),o("span",mt)):n("",!0)])])])):n("",!0)]))),128)),a(c).length?n("",!0):(s(),o("div",ut,l(t.$t("Global.no_notifications")),1))]),_:1})),a(r)?(s(),o("div",_t,[e("div",pt,[(s(),o(T,null,A(5,d=>e("div",{class:"not-item d-flex",key:d},[e("div",ht,[u(p,{shape:"circle",size:"4rem"}),e("div",ft,[e("div",gt,[u(p,{height:".6rem",width:"4rem"})]),u(p,{height:".6rem",width:"14rem"})])]),u(p,{height:"1.2rem",width:".8rem"})])),64))])])):n("",!0),a(L)?(s(),o("div",vt,[u(R,{rows:a(g),onPage:P,totalRecords:a(v),class:"mt-5",dir:"ltr"},null,8,["rows","totalRecords"])])):n("",!0)])])])}}};export{Dt as default};
