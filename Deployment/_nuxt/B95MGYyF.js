import{_ as R}from"./Co5ZNJbx.js";import D from"./DmPp5oci.js";import{h as M,s as B,r as l,c as A,a as s,t as p,b as T,f as F,j as f,p as P,d as q,u as v,g as z,w as j,i as h,o as $,q as k,k as S}from"./uThEF0pG.js";import{_ as x}from"./C0J6pqR-.js";import{_ as E,a as G}from"./Cl29S7Vg.js";import{u as H}from"./Bd7qOfwp.js";import{u as J,r as K}from"./DXutHP6I.js";import{t as L}from"./D12V8fHa.js";const O={class:"container"},Q={class:"auth-layout flex-column"},W={class:"main-title bold lg mb-5"},X={class:"layout-form md custom-width"},Y={class:"row"},Z={class:"col-12 col-md-10 mr-auto"},ee={class:"mb-4"},se={class:"main-title"},te={class:"form-group mb-5"},oe={class:"label"},ae=["placeholder"],le={type:"submit",class:"custom-btn mr-auto"},ne={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ie={class:"text-center"},re={class:"section-btns mt-4 mb-5"},ue={class:"typeSection salla"},ce={class:"typeSection zid"},we={__name:"restorepassword",setup(de){const{locale:me,t:C}=M({useScope:"global"}),{response:g}=K(),{successToast:_,errorToast:i}=L(),b=J(),V=H(),{user:c,hasTwoAccount:I}=B(V),y=l(null),r=l(!1),n=l(null),d=l(!1),m=l([]);l({}),l([]);function U(){let t=document.querySelectorAll(".validInputs");for(let e=0;e<t.length;e++)t[e].value===""&&m.value.push(C(`validation.${t[e].name}`))}const N=async()=>{try{d.value=!0;const t=new FormData(y.value);if(U(),m.value.length){i(m.value[0]);return}const e=encodeURIComponent(t.get("email")),o=await b.post(`SendCode?email=${e}`);g(o)==="success"?(c.value.email=t.get("email"),_(o.data.message),I.value=o.data.hasTwoAccounts,o.data.hasTwoAccounts?r.value=!0:S("/Auth/restorepassword-check-code")):i(o.data.msg)}catch(t){console.error(t),d.value=!0,i("An error occurred. Please try again.")}finally{d.value=!1,m.value=[]}},w=async t=>{try{const e=encodeURIComponent(c.value.email),o=t==="salla"?1:2,u=await b.post(`SendCode?email=${e}&accountType=${o}`);g(u)==="success"?(_(u.data.message),r.value=!1,c.value.accountType=o,S("/Auth/restorepassword-check-code"),console.log(c.value,"new user")):i(u.data.msg)}catch(e){console.error(e),i("An error occurred. Please try again.")}finally{}};return(t,e)=>{const o=R,u=D;return $(),A("div",O,[s("div",Q,[s("h1",W,p(t.$t("Auth.forgot_password")),1),s("div",X,[e[10]||(e[10]=s("img",{src:x,alt:"logo",class:"Auth-logo mb-5"},null,-1)),T(o,{activeSteps:[3]}),s("form",{onSubmit:F(N,["prevent"]),ref_key:"forgetForm",ref:y},[s("div",Y,[s("div",Z,[s("div",ee,[s("p",se,p(t.$t("Auth.get_code")),1)]),s("div",te,[s("label",oe,p(t.$t("Auth.email")),1),f(s("input",{type:"email",class:"main_input validInputs",valid:"email",name:"email","onUpdate:modelValue":e[0]||(e[0]=a=>t.email=a),placeholder:t.$t("Auth.enter_email")},null,8,ae),[[P,t.email]])]),s("button",le,[q(p(t.$t("Auth.send"))+" ",1),v(d)?($(),A("span",ne)):z("",!0)])])])],544),T(u,{visible:v(r),"onUpdate:visible":e[5]||(e[5]=a=>h(r)?r.value=a:null),modal:"",class:"custum_dialog_width without-close auth-daialog",draggable:!1},{default:j(()=>[s("div",ie,[e[8]||(e[8]=s("h5",{class:"main-title sm blue mb-4"}," يمكنك ربط متجرك مع تطبيق بروزه من خلال سوق تطبيقات سله و زد ",-1)),e[9]||(e[9]=s("h4",{class:"main-title bold mb-5"}," متجرك على أي منصة؟ ",-1)),s("div",re,[s("label",ue,[f(s("input",{type:"radio",value:"1",name:"checkType","onUpdate:modelValue":e[1]||(e[1]=a=>h(n)?n.value=a:null),class:"d-none",onChange:e[2]||(e[2]=a=>w("salla"))},null,544),[[k,v(n)]]),e[6]||(e[6]=s("img",{src:E,alt:""},null,-1))]),s("label",ce,[f(s("input",{type:"radio",value:"2",name:"checkType","onUpdate:modelValue":e[3]||(e[3]=a=>h(n)?n.value=a:null),class:"d-none",onChange:e[4]||(e[4]=a=>w("zid"))},null,544),[[k,v(n)]]),e[7]||(e[7]=s("img",{src:G,alt:""},null,-1))])])])]),_:1},8,["visible"])])])])}}};export{we as default};
