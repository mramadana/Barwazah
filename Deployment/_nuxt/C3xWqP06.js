const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DNjufjcF.js","./COk7MDye.js","./DwAYQtRF.js","./entry.B0b_3z4T.css"])))=>i.map(i=>d[i]);
import U from"./BO-phMkl.js";import{_ as ke}from"./BCfPbeUE.js";import{A as H,l as V,r as n,h as I,m as q,J as ye,e as N,o as A,c as G,a as e,b as y,u as c,g as P,B as Z,s as J,w as W,i as $e,_ as Ae,y as Se,d as ve,t as T,x as _e}from"./DwAYQtRF.js";import{s as K}from"./Dm1NUbOX.js";import{d as Q,_ as X,i as Y,a as ee,b as te,c as ae,f as fe,u as Me}from"./COk7MDye.js";import{_ as Ee}from"./Bn9BfMNl.js";import{u as oe,r as se}from"./DXutHP6I.js";import{u as ne}from"./0ixJecxr.js";import{i as le}from"./B2gg3C8B.js";import{_ as Ge}from"./D4T2Buv7.js";import"./7gPfPZY0.js";import"./CrVJhx21.js";import"./ClJYkBEX.js";import"./BXKQeXJS.js";const Oe=Q(X),Le={key:0,class:"w-100"},Pe={class:"radio-container"},Fe=["id","name"],Be=["for"],Re=["id","name"],Te=["for"],je=["id","name"],Ve=["for"],qe={class:"d-flex align-items-center justify-content-center gap-4"},Ie={class:"with_cun_select custom-select"},Ne={class:"flex justify-content-center dropdown_card"},ze={__name:"GradientArea",props:{initialMonths:{type:Array,required:!0},initialAllMonths:{type:Array,required:!0},initialOption:{type:Object,required:!0},initialMonthlyData:{type:Object,required:!0},initialSeriesData:{type:Array,required:!0},showAllOption:{type:Boolean,default:!0}},emits:["rental_change"],async setup(R,{emit:f}){let g,F;const B=([g,F]=H(()=>Z(()=>import("./DNjufjcF.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),g=await g,F(),g),m=R,S=V(()=>m.showAllOption?m.initialMonths:m.initialMonths.filter(o=>o.id==0)),C=f,w=n(Math.random().toString(36).substr(2,9)),{t:_}=I(),$=n(!1),h=n({id:0}),M=n(m.initialMonths),E=n(m.initialAllMonths),d=n(m.initialMonthlyData),r=n(null),O=o=>Array.from({length:o},()=>0),v=()=>{var s;if(console.log("handleMonthChange triggered",h.value),!h.value||typeof h.value.id>"u"){console.error("Invalid selected month: ",h.value);return}C("rental_change",h.value.id),console.log("Emitted rental_change with ID:",h.value.id);const o=h.value.id;if(o===0)t.value.xAxis.data=E.value,t.value.series[0].data=m.initialSeriesData[0]||[],t.value.series[1].data=m.initialSeriesData[1]||[];else{const u=M.value.find(j=>j.id===o);if(!u){console.error("Invalid month ID: ",o);return}const l=u.days,b=Array.from({length:l},(j,z)=>`اليوم ${z+1}`);t.value.xAxis={type:"category",boundaryGap:!1,data:b,axisLabel:{interval:0,rotate:45}};const x=d.value[o];x?(t.value.series[0].data=x.store||[],t.value.series[1].data=x.market||[]):(t.value.series[0].data=O(l),t.value.series[1].data=O(l))}(s=r.value)!=null&&s.chart?r.value.chart.setOption(t.value,!0):console.error("Chart instance is not ready.")},t=n({legend:{top:"5%",show:!1,selected:{[_("Global.marketData")]:!0,[_("Global.storeDataData")]:!0}},tooltip:{trigger:"axis",padding:[10,20],textStyle:{fontSize:13,color:"#333",fontFamily:"Arial"},borderWidth:2,axisPointer:{type:"cross",type:"none",label:{backgroundColor:"#6a7985"}},formatter:function(o){let s='<div style="text-align: right; direction: rtl;">';return o.forEach(u=>{s+=`
          <div style="
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
          ">
            <span style="
              display: inline-block;
              width: 12px;
              height: 12px;
              background: ${u.color};
              border-radius: 2px;
            "></span>
            <strong>${u.seriesName}:</strong>
            <span>${u.value}</span>
          </div>
        `}),s+="</div>",s}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisPointer:{type:"none"}},yAxis:{type:"value",show:!1,axisPointer:{type:"none"}},series:[{name:_("Global.marketData"),type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#4681f4"},itemStyle:{color:"#013660"},areaStyle:{color:new B.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(70, 129, 244, 0.6)"},{offset:1,color:"rgba(70, 129, 244, 0.2)"}])},data:[]},{name:_("Global.storeDataData"),type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#f75c5c"},itemStyle:{color:"#e5254a"},areaStyle:{color:new B.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(247, 92, 92, 0.6)"},{offset:1,color:"rgba(247, 92, 92, 0.2)"}])},data:[]}]}),p=o=>{var u;const s={id:Number(o.target.value)};if(s){const l=(u=r.value)==null?void 0:u.chart;if(!l)return;switch(s.id){case 0:t.value.legend.selected[_("Global.marketData")]=!0,t.value.legend.selected[_("Global.storeDataData")]=!0;break;case 1:t.value.legend.selected[_("Global.marketData")]=!1,t.value.legend.selected[_("Global.storeDataData")]=!0;break;case 2:t.value.legend.selected[_("Global.marketData")]=!0,t.value.legend.selected[_("Global.storeDataData")]=!1;break}l.setOption(t.value,!0)}};return q(()=>m.initialMonthlyData,o=>{var s;if(h.value&&h.value.id!==0){const u=h.value.id,l=o[u];l&&(t.value.series[0].data=l.store||[],t.value.series[1].data=l.market||[],(s=r.value)!=null&&s.chart&&r.value.chart.setOption(t.value,!0))}},{deep:!0}),q(()=>m.initialSeriesData,o=>{var s;o&&Array.isArray(o)&&o.length>0&&(t.value.series[0].data=o[0]||[],t.value.series[1].data=o[1]||[],(s=r.value)!=null&&s.chart&&r.value.chart.setOption(t.value,!0))},{deep:!0,immediate:!0}),ye(()=>{$.value=!0,t.value.xAxis.data=E.value,Array.isArray(m.initialSeriesData)&&m.initialSeriesData.length>=2&&(t.value.series[0].data=m.initialSeriesData[0]||[],t.value.series[1].data=m.initialSeriesData[1]||[])}),N(()=>{var o;(o=r.value)!=null&&o.chart&&r.value.chart.setOption(t.value,!0)}),(o,s)=>{const u=K,l=Oe;return $.value?(A(),G("div",Le,[e("div",Pe,[e("input",{type:"radio",id:`radio1-${w.value}`,name:`slider-${w.value}`,value:"1",onChange:p},null,40,Fe),e("label",{for:`radio1-${w.value}`,class:"cl-red"},"للمتجر",8,Be),e("input",{type:"radio",id:`radio2-${w.value}`,name:`slider-${w.value}`,value:"0",onChange:p,checked:""},null,40,Re),e("label",{for:`radio2-${w.value}`},"الكل",8,Te),e("input",{type:"radio",id:`radio3-${w.value}`,name:`slider-${w.value}`,value:"2",onChange:p},null,40,je),e("label",{for:`radio3-${w.value}`,class:"main-cl"},"للسوق",8,Ve),s[1]||(s[1]=e("div",{class:"marker"},null,-1))]),e("div",qe,[e("div",Ie,[e("div",Ne,[y(u,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=b=>h.value=b),onChange:v,options:c(S),optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),y(l,{ref_key:"chart",ref:r,option:t.value,style:{height:"250px",width:"100%",display:"block"}},null,8,["option"])])):P("",!0)}}},Ue=Q(X),He={key:0,class:"skeleton-chart"},Ze={class:"skeleton-bars"},Je={class:"d-flex align-items-center gap-3 justify-content-end"},We={key:0,class:"w-100"},Ke={class:"d-flex align-items-center justify-content-center gap-4"},Qe={class:"with_cun_select custom-select"},Xe={class:"flex justify-content-center dropdown_card"},Ye={__name:"TimeLimit",props:{apiEndpoint:{type:String,required:!0}},async setup(R){let f,g;const F=oe(),{response:B}=se(),{token:m}=J(ne());I();const S=R,C=([f,g]=H(()=>Z(()=>import("./DNjufjcF.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),f=await f,g(),f);C.use([le,Y,ee,te,ae]);const w=V(()=>({headers:{Authorization:`Bearer ${m.value}`}})),_=n(!1),$=n(null),h=n(null),M=n([]),E=n([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),d=n({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{interval:0,rotate:45}},yAxis:{type:"value",show:!1},series:[{type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#4681f4"},itemStyle:{color:"#013660"},areaStyle:{color:new C.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(70, 129, 244, 0.6)"},{offset:1,color:"rgba(70, 129, 244, 0.2)"}])},data:[]}]}),r=async(v=0)=>{var t,p,o;_.value=!0;try{const s=await F.get(`${S.apiEndpoint}${v?`?filterByMonth=${v}`:""}`,w.value);if(console.log("API Response:",s.data),B(s)==="success"){if(!((p=(t=s.data)==null?void 0:t.data)!=null&&p.peakTimeData)){console.log("No peakTimeData found in response"),d.value.xAxis.data=[],d.value.series[0].data=[];return}const u=s.data.data.peakTimeData;console.log("Chart Data:",u),M.value=u;try{v===0?(d.value.xAxis.data=u.map(l=>l.month),d.value.series[0].data=u.map(l=>l.value)):(d.value.xAxis.data=u.map(l=>`اليوم ${l.day}`),d.value.series[0].data=u.map(l=>l.value)),(o=h.value)!=null&&o.chart&&h.value.chart.setOption(d.value,!0)}catch(l){console.error("Error mapping data:",l),console.log("Data structure:",u),d.value.xAxis.data=[],d.value.series[0].data=[]}}}catch(s){console.error("Error fetching peak time data:",s),d.value.xAxis.data=[],d.value.series[0].data=[]}finally{_.value=!1}},O=async v=>{var p;const t=(p=v.value)==null?void 0:p.id;t!==void 0&&await r(t)};return N(async()=>{$.value=E.value[0],await r()}),q(M,()=>{var v;(v=h.value)!=null&&v.chart&&h.value.chart.setOption(d.value,!0)},{deep:!0}),(v,t)=>{const p=U,o=K,s=Ue,u=fe;return A(),G("div",null,[_.value?(A(),G("div",He,[e("div",Ze,[e("div",Je,[y(p,{width:"5rem",height:".5rem"}),t[1]||(t[1]=e("div",{class:"skeleton-bar",style:{width:"80%"}},null,-1))])])])):P("",!0),y(u,null,{default:W(()=>[_.value?P("",!0):(A(),G("div",We,[e("div",Ke,[e("div",Qe,[e("div",Xe,[y(o,{modelValue:$.value,"onUpdate:modelValue":t[0]||(t[0]=l=>$.value=l),onChange:O,options:E.value,optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),y(s,{ref_key:"chart",ref:h,class:"custom-chart",option:d.value,style:{height:"265px",width:"100%",display:"block"}},null,8,["option"])]))]),_:1})])}}},et=Q(X),tt={key:0,class:"skeleton-chart"},at={class:"skeleton-bars"},ot={class:"d-flex align-items-center gap-3 justify-content-end"},st={key:0,class:"w-100"},nt={class:"d-flex align-items-center justify-content-center gap-4"},lt={class:"with_cun_select custom-select"},it={class:"flex justify-content-center dropdown_card"},rt={__name:"getOrders",props:{apiEndpoint:{type:String,required:!0}},async setup(R){let f,g;const F=oe(),{response:B}=se(),{token:m}=J(ne());I();const S=R,C=([f,g]=H(()=>Z(()=>import("./DNjufjcF.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),f=await f,g(),f);C.use([le,Y,ee,te,ae]);const w=V(()=>({headers:{Authorization:`Bearer ${m.value}`}})),_=n(!1),$=n(null),h=n(null),M=n([]),E=n([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),d=n({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{interval:0,rotate:45}},yAxis:{type:"value",show:!1},series:[{type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#e5254a"},itemStyle:{color:"#e5254a"},areaStyle:{color:new C.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(247, 92, 92, 0.6)"},{offset:1,color:"rgba(247, 92, 92, 0.2)"}])},data:[]}]}),r=async(v=0)=>{var t,p,o,s,u;_.value=!0;try{const l=await F.get(`${S.apiEndpoint}${v?`?filterByMonth=${v}`:""}`,w.value);if(console.log("API Response:",l.data),B(l)==="success"){const b=((p=(t=l.data)==null?void 0:t.data)==null?void 0:p.peakTimeData)||((s=(o=l.data)==null?void 0:o.data)==null?void 0:s.requestRateData);if(!b){console.log("No data found in response"),d.value.xAxis.data=[],d.value.series[0].data=[];return}console.log("Chart Data:",b),M.value=b;try{v===0?(d.value.xAxis.data=b.map(x=>x.month),d.value.series[0].data=b.map(x=>x.value)):(d.value.xAxis.data=b.map(x=>`اليوم ${x.day}`),d.value.series[0].data=b.map(x=>x.value)),(u=h.value)!=null&&u.chart&&h.value.chart.setOption(d.value,!0)}catch(x){console.error("Error mapping data:",x),console.log("Data structure:",b),d.value.xAxis.data=[],d.value.series[0].data=[]}}}catch(l){console.error("Error fetching peak time data:",l),d.value.xAxis.data=[],d.value.series[0].data=[]}finally{_.value=!1}},O=async v=>{var p;const t=(p=v.value)==null?void 0:p.id;t!==void 0&&await r(t)};return N(async()=>{$.value=E.value[0],await r()}),q(M,()=>{var v;(v=h.value)!=null&&v.chart&&h.value.chart.setOption(d.value,!0)},{deep:!0}),(v,t)=>{const p=U,o=K,s=et,u=fe;return A(),G("div",null,[c(_)?(A(),G("div",tt,[e("div",at,[e("div",ot,[y(p,{width:"5rem",height:".5rem"}),t[1]||(t[1]=e("div",{class:"skeleton-bar",style:{width:"80%"}},null,-1))])])])):P("",!0),y(u,null,{default:W(()=>[c(_)?P("",!0):(A(),G("div",st,[e("div",nt,[e("div",lt,[e("div",it,[y(o,{modelValue:c($),"onUpdate:modelValue":t[0]||(t[0]=l=>$e($)?$.value=l:null),onChange:O,options:c(E),optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),y(s,{ref_key:"chart",ref:h,class:"custom-chart",option:c(d),style:{height:"300px",width:"100%",display:"block"}},null,8,["option"])]))]),_:1})])}}},ct="data:image/svg+xml,%3csvg%20width='67'%20height='65'%20viewBox='0%200%2067%2065'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='1.5'%20y='1.5'%20width='52'%20height='52'%20rx='12.5'%20stroke='%23E5254A'%20stroke-width='3'/%3e%3crect%20x='13.5'%20y='11.5'%20width='52'%20height='52'%20rx='12.5'%20fill='white'%20stroke='%23E5254A'%20stroke-width='3'/%3e%3c/svg%3e",dt="data:image/svg+xml,%3csvg%20width='90'%20height='88'%20viewBox='0%200%2090%2088'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M28.3258%2023.2449H79.3447C80.7369%2023.2449%2082.1105%2023.5858%2083.3592%2024.2413C84.6078%2024.8967%2085.6981%2025.8492%2086.5456%2027.0249C87.3931%2028.2007%2087.9752%2029.5682%2088.2469%2031.0217C88.5185%2032.4752%2088.4724%2033.9758%2088.1121%2035.4073L83.6202%2053.2521C82.7419%2056.7413%2080.8066%2059.8245%2078.1143%2062.0235C75.422%2064.2225%2072.1233%2065.4145%2068.7298%2065.4145H38.9407C35.5472%2065.4145%2032.2485%2064.2225%2029.5562%2062.0235C26.8639%2059.8245%2024.9285%2056.7413%2024.0502%2053.2521L19.5584%2035.4073C19.1981%2033.9758%2019.1519%2032.4752%2019.4235%2031.0217C19.6951%2029.5682%2020.2772%2028.2007%2021.1248%2027.0249C21.9723%2025.8492%2023.0625%2024.8967%2024.3112%2024.2413C25.5599%2023.5858%2026.9336%2023.2449%2028.3258%2023.2449Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M21.1621%2041.7777L13.682%2012.0615C12.2046%206.19243%207.20811%202.11133%201.5%202.11133'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M42.6199%2081.8802C42.6199%2082.4066%2042.5225%2082.9278%2042.3332%2083.4142C42.144%2083.9005%2041.8667%2084.3424%2041.517%2084.7146C41.1673%2085.0868%2040.7522%2085.3821%2040.2953%2085.5835C39.8384%2085.7849%2039.3488%2085.8886%2038.8543%2085.8886C38.3598%2085.8886%2037.8702%2085.7849%2037.4133%2085.5835C36.9564%2085.3821%2036.5413%2085.0868%2036.1916%2084.7146C35.8419%2084.3424%2035.5646%2083.9005%2035.3753%2083.4142C35.1861%2082.9278%2035.0886%2082.4066%2035.0886%2081.8802C35.0886%2081.3538%2035.1861%2080.8326%2035.3753%2080.3463C35.5646%2079.86%2035.8419%2079.4181%2036.1916%2079.0459C36.5413%2078.6736%2036.9564%2078.3784%2037.4133%2078.177C37.8702%2077.9755%2038.3598%2077.8718%2038.8543%2077.8718C39.3488%2077.8718%2039.8384%2077.9755%2040.2953%2078.177C40.7522%2078.3784%2041.1673%2078.6736%2041.517%2079.0459C41.8667%2079.4181%2042.144%2079.86%2042.3332%2080.3463C42.5225%2080.8326%2042.6199%2081.3538%2042.6199%2081.8802Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M70.2618%2081.8802C70.2618%2082.4066%2070.1645%2082.9278%2069.9752%2083.4142C69.786%2083.9005%2069.5085%2084.3424%2069.1588%2084.7146C68.8091%2085.0868%2068.3941%2085.3821%2067.9373%2085.5835C67.4804%2085.7849%2066.9906%2085.8886%2066.4961%2085.8886C66.0016%2085.8886%2065.512%2085.7849%2065.0551%2085.5835C64.5982%2085.3821%2064.1831%2085.0868%2063.8334%2084.7146C63.4837%2084.3424%2063.2064%2083.9005%2063.0172%2083.4142C62.8279%2082.9278%2062.7305%2082.4066%2062.7305%2081.8802C62.7305%2081.3538%2062.8279%2080.8326%2063.0172%2080.3463C63.2064%2079.86%2063.4837%2079.4181%2063.8334%2079.0459C64.1831%2078.6736%2064.5982%2078.3784%2065.0551%2078.177C65.512%2077.9755%2066.0016%2077.8718%2066.4961%2077.8718C66.9906%2077.8718%2067.4804%2077.9755%2067.9373%2078.177C68.3941%2078.3784%2068.8091%2078.6736%2069.1588%2079.0459C69.5085%2079.4181%2069.786%2079.86%2069.9752%2080.3463C70.1645%2080.8326%2070.2618%2081.3538%2070.2618%2081.8802Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3ccircle%20cx='45.0089'%20cy='39.4178'%20r='1.56401'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3ccircle%20cx='62.1673'%20cy='39.4178'%20r='1.56401'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3cmask%20id='mask0_1093_3777'%20style='mask-type:alpha'%20maskUnits='userSpaceOnUse'%20x='24'%20y='3'%20width='60'%20height='60'%3e%3ccircle%20cx='54.2009'%20cy='32.6771'%20r='29.4145'%20fill='%23E5254A'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_1093_3777)'%3e%3ccircle%20cx='54.2009'%20cy='78.0243'%20r='27.9145'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3c/g%3e%3c/svg%3e",ut={class:"container"},mt={class:"row"},ht={class:"col-12 col-lg-6 mb-3 info-box"},pt={class:"info-box-item info-box-item align-items-center store-clients gap-3 flex-column-sm"},vt={class:"d-flex"},_t={class:"info-content"},yt={key:0,class:"d-flex align-items-end"},ft={class:"hint-card"},gt={class:"col-12 col-lg-6 mb-3 info-box"},xt={class:"d-flex align-items-center gap-3"},wt={class:"info-content"},bt={key:0,class:"d-flex align-items-end"},Dt={class:"col-12 mb-3"},Ct={class:"layout-form chart_layout"},kt={class:"main-title text-center fw-normal mb-4"},$t={class:"col-12 col-lg-6 mb-3"},At={class:"layout-form chart_layout"},St={class:"main-title text-center fw-normal mb-3"},Mt={class:"desc text-center mb-0"},Et={class:"col-12 col-lg-6 mb-3"},Gt={class:"layout-form chart_layout"},Ot={class:"col-12 col-lg-6 mb-3"},Lt={class:"layout-form chart_layout"},Pt={class:"col-12 col-lg-6 mb-3"},Ft={class:"layout-form"},Bt={class:"col-12 mb-5"},Rt={class:"layout-form chart_layout"},Tt={__name:"sales",setup(R){I();const{response:f}=se(),g=oe(),F=n("تحديد الجنس"),B=n({showAll:"الكل",males:"الذكور",females:"الإناث"}),m=n([]),S=n([]),C=V(()=>({headers:{Authorization:`Bearer ${_.value}`}}));Me([le,Y,ee,te,ae]);const w=ne(),{token:_,user:$}=J(w);n([[40,50,60,70,65,75,85,80,90,95,110,115],[30,40,55,50,55,60,75,72,78,82,90,95]]);const h=n([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),M=n(["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]),E=n(!1),d=n({xAxis:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],series:null}),r=n(!0),O=n(null),v=n([[],[]]),t=n([[],[]]),p=n({}),o=n({}),s=n([]),u=V(()=>S.value?{labels:S.value.map(a=>({id:a.id,text:a.name,image:a.logo})),series:S.value.map(a=>Number(a.saleRate.toFixed(2))),colors:{bar:"#f75c5c",text:"#ffffff"}}:{labels:[],series:[],colors:{bar:"#f75c5c",text:"#ffffff"}}),l=async()=>{r.value=!0,await g.get("GetSalesHomeStaticData",C.value).then(a=>{f(a)=="success"&&(m.value=a.data.data),r.value=!1}).catch(a=>{console.error(a)})},b=async()=>{r.value=!0,await g.get("GetSalesCommonProductsData",C.value).then(a=>{f(a)=="success"&&(S.value=a.data.data.slice(0,4).reverse(),console.log(S.value,"HomeData")),r.value=!1}).catch(a=>{console.error(a)})},x=async(a=0)=>{r.value=!0;try{console.log(`Fetching data for monthId: ${a}`);const i=await g.get(`AverageShoppingCartSize?type=0&filterByMonth=${a}`,C.value);if(f(i)==="success"){const D=i.data.data;if(a===0)v.value=[D.marketData.map(k=>k.value),D.storeDataData.map(k=>k.value)];else{const k={market:D.marketData.map(L=>L.value),store:D.storeDataData.map(L=>L.value)};p.value[a]=k,console.log("Updated manualMonthlyData:",p.value)}O.value=D}}catch(i){console.error("Error fetching data:",i)}finally{r.value=!1}},j=async(a=0)=>{r.value=!0;try{console.log(`Fetching data for monthId: ${a}`);const i=await g.get(`GetSalesChartData?type=0&filterByMonth=${a}`,C.value);if(f(i)==="success"){const D=i.data.data;if(a===0)t.value=[D.marketData.map(k=>k.value),D.storeDataData.map(k=>k.value)];else{const k={market:D.marketData.map(L=>L.value),store:D.storeDataData.map(L=>L.value)};o.value[a]=k,console.log("Updated manualMonthlyData:",o.value)}O.value=D}}catch(i){console.error("Error fetching data:",i)}finally{r.value=!1}},z=async()=>{r.value=!0;try{const a=await g.get("DemographicDataChartData?GenderType=0",C.value);if(f(a)==="success"){const i=a.data.data;Array.isArray(i)?(s.value=i,console.log("Updated Source Data:",s.value)):console.error("demographicData is not an array:",i)}}catch(a){console.error("Error fetching demographic data:",a)}finally{r.value=!1}},ge=async a=>{console.log(`Handling month change for monthId: ${a}`),await x(a),console.log("manualMonthlyData.value after update:",p.value)},xe=async a=>{console.log(`Handling month change for monthId: ${a}`),await j(a),console.log("manualMonthlyData.value after update:",p.value)};return N(async()=>{await x(0),await j(0),await z(),await l(),await b()}),ye(()=>{E.value=!0,d.value={xAxis:M.value,series:[40,50,60,70,65,75,85,80,90,95,110,115]}}),(a,i)=>{var re,ce,de,ue;const D=U,k=Se("font-awesome-icon"),L=ke,ie=ze,we=Ee,be=Ye,De=rt,Ce=Ge;return A(),G("div",null,[e("main",null,[e("div",ut,[e("div",mt,[e("div",ht,[e("div",pt,[e("div",vt,[i[2]||(i[2]=e("img",{src:ct,alt:"Store Icon"},null,-1)),e("div",_t,[i[1]||(i[1]=e("span",{class:"main-cl main-title bold mb-2"},"معدل بيع المنتجات للمتجر",-1)),!((re=c(m))!=null&&re.length)&&!c(r)?(A(),G("h2",yt,[ve(T((ce=c(m))==null?void 0:ce.storeSalesPercent)+" ",1),i[0]||(i[0]=e("div",{class:"hint-present"},"%",-1))])):P("",!0),(de=c(m))!=null&&de.length||c(r)?(A(),_e(D,{key:1,class:"mt-3",width:"5rem",height:".5rem"})):P("",!0)])]),e("h4",ft,"نسبة بيع المنتج الواحد من الكمية الكلية المتوفرة ترجمة الرقم: أنه اذا كانت الكمية الكلية للمنتج هي 100 اذن تم بيع "+T((ue=c(m))==null?void 0:ue.storeSalesPercent)+" تقريبا",1)])]),e("div",gt,[y(L,{to:"/salesDetails",class:"info-box-item cart-clients gap-3 flex-wrap justify-content-between"},{default:W(()=>{var me,he,pe;return[e("div",xt,[i[5]||(i[5]=e("img",{src:dt,alt:"User Icon"},null,-1)),e("div",wt,[i[4]||(i[4]=e("span",null,"متوسط السلات المتروكة للمتجر",-1)),!((me=c(m))!=null&&me.length)&&!c(r)?(A(),G("h2",bt,[ve(T((he=c(m))==null?void 0:he.abondendCartAverage)+" ",1),i[3]||(i[3]=e("div",{class:"hint-span"},"سلة",-1))])):P("",!0),(pe=c(m))!=null&&pe.length||c(r)?(A(),_e(D,{key:1,class:"mt-2",width:"5rem",height:".5rem"})):P("",!0)])]),y(k,{class:"fa-2x",icon:["fas","angle-left"]})]}),_:1})]),e("div",Dt,[e("div",Ct,[e("h3",kt,T(a.$t("Global.sales")),1),y(ie,{initialMonths:c(h),initialAllMonths:c(M),initialMonthlyData:c(o),initialSeriesData:c(t),onRental_change:xe,loading:c(r),showAllOption:!0},null,8,["initialMonths","initialAllMonths","initialMonthlyData","initialSeriesData","loading"])])]),e("div",$t,[e("div",At,[e("h3",St,T(a.$t("Global.commercial_Products")),1),e("h3",Mt,T(a.$t("Global.highest_Sales")),1),y(we,{"data-ready":c(E),"products-data":c(u)},null,8,["data-ready","products-data"])])]),e("div",Et,[e("div",Gt,[i[6]||(i[6]=e("h3",{class:"main-title text-center fw-normal mb-4"},"وقت الذروة",-1)),y(be,{apiEndpoint:"GetPeakTime"})])]),e("div",Ot,[e("div",Lt,[i[7]||(i[7]=e("h3",{class:"main-title fw-normal text-center mb-3"},"معدل الطلبات",-1)),y(De,{apiEndpoint:"GetRequestRateChartData"})])]),e("div",Pt,[e("div",Ft,[i[8]||(i[8]=e("h3",{class:"main-title text-center fw-normal mb-4"},"التحليل الديموغرافي",-1)),y(Ce,{"rental-names":c(B),"placeholder-text":c(F),"source-data":c(s)},null,8,["rental-names","placeholder-text","source-data"])])]),e("div",Bt,[e("div",Rt,[i[9]||(i[9]=e("h3",{class:"main-title fw-normal text-center mb-4"},"متوسط حجم سلة الشراء",-1)),y(ie,{initialMonths:c(h),initialAllMonths:c(M),initialMonthlyData:c(p),initialSeriesData:c(v),loading:c(r),onRental_change:ge,showAllOption:!1},null,8,["initialMonths","initialAllMonths","initialMonthlyData","initialSeriesData","loading"])])])])])])])}}},Yt=Ae(Tt,[["__scopeId","data-v-99fdbac3"]]);export{Yt as default};
