const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D0Uutl0B.js","./qYMLPQxU.js","./CDjVABWN.js"])))=>i.map(i=>d[i]);
import{A as B,r as n,j as L,p as C,E,e as G,o as O,c as q,a as d,b as x,f as R,B as j,s as z,m as N}from"./CDjVABWN.js";import{s as V}from"./D8qqV3WI.js";import{d as P,_ as T,u as U,i as F,a as H,b as J,c as K}from"./qYMLPQxU.js";import{u as Q,r as W}from"./Bwfks3Mu.js";import{u as X}from"./CVjljgFj.js";import{i as Y}from"./BOjzTTy3.js";import"./vdJJGTyi.js";import"./GeIhuEdx.js";import"./BXjy7pqY.js";import"./BbxwispC.js";const Z=P(T),ee={key:0,class:"w-100"},ae={class:"radio-container"},te=["id","name"],le=["for"],oe=["id","name"],se=["for"],ne=["id","name"],ie=["for"],re={class:"d-flex align-items-center justify-content-center gap-4"},de={class:"with_cun_select custom-select"},ue={class:"flex justify-content-center dropdown_card"},ce={__name:"Gradient_test",props:{initialMonths:{type:Array,required:!0},initialAllMonths:{type:Array,required:!0},initialOption:{type:Object,required:!0},initialMonthlyData:{type:Object,required:!0},initialSeriesData:{type:Array,required:!0}},emits:["rental_change"],async setup($,{emit:A}){let p,y;const g=([p,y]=B(()=>j(()=>import("./D0Uutl0B.js"),__vite__mapDeps([0,1,2]),import.meta.url)),p=await p,y(),p),o=$,f=A,u=n(Math.random().toString(36).substr(2,9)),{t:i}=L(),b=n(!1),s=n({id:0}),_=n(o.initialMonths),D=n(o.initialAllMonths),c=n(o.initialMonthlyData),l=n(null),m=a=>Array.from({length:a},()=>0),v=()=>{var t;if(console.log("handleMonthChange triggered",s.value),!s.value||typeof s.value.id>"u"){console.error("Invalid selected month: ",s.value);return}f("rental_change",s.value.id),console.log("Emitted rental_change with ID:",s.value.id);const a=s.value.id;if(a===0)e.value.xAxis.data=D.value,e.value.series[0].data=o.initialSeriesData[0]||[],e.value.series[1].data=o.initialSeriesData[1]||[];else{const h=_.value.find(k=>k.id===a);if(!h){console.error("Invalid month ID: ",a);return}const r=h.days,S=Array.from({length:r},(k,I)=>`اليوم ${I+1}`);e.value.xAxis={type:"category",boundaryGap:!1,data:S,axisLabel:{interval:0,rotate:45}};const w=c.value[a];w?(e.value.series[0].data=w.store||[],e.value.series[1].data=w.market||[]):(e.value.series[0].data=m(r),e.value.series[1].data=m(r))}(t=l.value)!=null&&t.chart?l.value.chart.setOption(e.value,!0):console.error("Chart instance is not ready.")},e=n({legend:{top:"5%",show:!1,selected:{[i("Global.females")]:!0,[i("Global.males")]:!0}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",show:!1},series:[{name:i("Global.females"),type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#4681f4"},itemStyle:{color:"#013660"},areaStyle:{color:new g.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(70, 129, 244, 0.6)"},{offset:1,color:"rgba(70, 129, 244, 0.2)"}])},data:[]},{name:i("Global.males"),type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#f75c5c"},itemStyle:{color:"#e5254a"},areaStyle:{color:new g.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(247, 92, 92, 0.6)"},{offset:1,color:"rgba(247, 92, 92, 0.2)"}])},data:[]}]}),M=a=>{var h;const t={id:Number(a.target.value)};if(t){const r=(h=l.value)==null?void 0:h.chart;if(!r)return;switch(t.id){case 0:e.value.legend.selected[i("Global.females")]=!0,e.value.legend.selected[i("Global.males")]=!0;break;case 1:e.value.legend.selected[i("Global.females")]=!1,e.value.legend.selected[i("Global.males")]=!0;break;case 2:e.value.legend.selected[i("Global.females")]=!0,e.value.legend.selected[i("Global.males")]=!1;break}r.setOption(e.value,!0)}};return C(()=>o.initialMonthlyData,a=>{var t;if(s.value&&s.value.id!==0){const h=s.value.id,r=a[h];r&&(e.value.series[0].data=r.store||[],e.value.series[1].data=r.market||[],(t=l.value)!=null&&t.chart&&l.value.chart.setOption(e.value,!0))}},{deep:!0}),C(()=>o.initialSeriesData,a=>{var t;a&&Array.isArray(a)&&a.length>0&&(e.value.series[0].data=a[0]||[],e.value.series[1].data=a[1]||[],(t=l.value)!=null&&t.chart&&l.value.chart.setOption(e.value,!0))},{deep:!0,immediate:!0}),E(()=>{b.value=!0,e.value.xAxis.data=D.value,Array.isArray(o.initialSeriesData)&&o.initialSeriesData.length>=2&&(e.value.series[0].data=o.initialSeriesData[0]||[],e.value.series[1].data=o.initialSeriesData[1]||[])}),G(()=>{var a;(a=l.value)!=null&&a.chart&&l.value.chart.setOption(e.value,!0)}),(a,t)=>{const h=V,r=Z;return b.value?(O(),q("div",ee,[d("div",ae,[d("input",{type:"radio",id:`radio1-${u.value}`,name:`slider-${u.value}`,value:"1",onChange:M},null,40,te),d("label",{for:`radio1-${u.value}`,class:"main-cl"},"للمتجر",8,le),d("input",{type:"radio",id:`radio2-${u.value}`,name:`slider-${u.value}`,value:"0",onChange:M,checked:""},null,40,oe),d("label",{for:`radio2-${u.value}`},"الكل",8,se),d("input",{type:"radio",id:`radio3-${u.value}`,name:`slider-${u.value}`,value:"2",onChange:M},null,40,ne),d("label",{for:`radio3-${u.value}`,class:"cl-red"},"للسوق",8,ie),t[1]||(t[1]=d("div",{class:"marker"},null,-1))]),d("div",re,[t[2]||(t[2]=d("label",{class:"label mb-0"},"اختر الشهر",-1)),d("div",de,[d("div",ue,[x(h,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=S=>s.value=S),onChange:v,options:_.value,optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),x(r,{ref_key:"chart",ref:l,option:e.value,style:{height:"250px",width:"100%",display:"block"}},null,8,["option"])])):R("",!0)}}},Ae={__name:"test222",setup($){U([Y,F,H,J,K]);const A=n(["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]),p=n([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),y=n(!0),g=n(null),o=n([[],[]]),f=n({}),u=Q(),{response:i}=W(),{token:b}=z(X()),s=N(()=>({headers:{Authorization:`Bearer ${b.value}`}})),_=async(c=0)=>{y.value=!0;try{console.log(`Fetching data for monthId: ${c}`);const l=await u.get(`AverageShoppingCartSize?type=0&filterByMonth=${c}`,s.value);if(i(l)==="success"){const m=l.data.data;if(c===0)o.value=[m.marketData.map(v=>v.value),m.storeDataData.map(v=>v.value)];else{const v={market:m.marketData.map(e=>e.value),store:m.storeDataData.map(e=>e.value)};f.value[c]=v,console.log("Updated manualMonthlyData:",f.value)}g.value=m}}catch(l){console.error("Error fetching data:",l)}finally{y.value=!1}},D=async c=>{console.log(`Handling month change for monthId: ${c}`),await _(c),console.log("manualMonthlyData.value after update:",f.value)};return G(async()=>{await _(0)}),(c,l)=>{const m=ce;return O(),q("div",null,[x(m,{initialMonths:p.value,initialAllMonths:A.value,initialMonthlyData:f.value,initialSeriesData:o.value,initialOption:c.chartOptions,loading:y.value,onRental_change:D},null,8,["initialMonths","initialAllMonths","initialMonthlyData","initialSeriesData","initialOption","loading"])])}}};export{Ae as default};
