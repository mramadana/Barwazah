import{h as D,s as G,r as a,c as $,a as e,t as i,f as z,d as m,j as v,v as _,u as l,i as h,n as y,g as F,o as N,k as M}from"./4aL2WHGa.js";import{_ as U}from"./6A6vq8b4.js";import{u as R}from"./DsWR8yoU.js";import{u as j,r as q}from"./DXutHP6I.js";import{t as E}from"./MDezpcmL.js";const H={class:"container"},J={class:"layout-form custom-width"},K={class:"main-title bold lg mb-5"},L={class:"row"},O={class:"col-12 col-md-8 mr-auto"},Q={class:"text-center mb-5"},W={class:"main-title"},X={class:"form-group"},Y={class:"label"},Z={class:"main_input with_icon"},x=["type","placeholder"],ss={class:"form-group"},es={class:"label"},ts={class:"main_input with_icon"},os=["type","placeholder"],as={class:"form-group"},ls={class:"label"},ns={class:"main_input with_icon"},is=["type","placeholder"],rs={class:"custom-btn w-100 mr-auto"},ds={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},vs={__name:"changePassword",setup(us){const{t:b}=D({useScope:"global"}),A=R(),{token:k}=G(A),u=a(""),r=a([]),d=a(""),p=a(""),{response:V}=q(),{successToast:I,errorToast:g}=E(),T=j(),c=a(!1),P=a(null),n=a({definitelyNewPassword:!1,definitelyNewPassword_2:!1}),w=t=>{n.value[t]=!n.value[t]},f=t=>n.value[t]?"text":"password";function C(){let t=document.querySelectorAll(".validInputs");for(let s=0;s<t.length;s++)t[s].value===""&&r.value.push(b(`validation.${t[s].name}`));d.value!==p.value&&r.value.push(b("validation.confirmPassword"))}const S={headers:{Authorization:`Bearer ${k.value}`}},B=async()=>{c.value=!0;const t=new FormData(P.value);C(),r.value.length?(g(r.value[0]),c.value=!1,r.value=[]):await T.patch(`update-password?old_password=${u.value}&password=${d.value}`,t,S).then(s=>{V(s)=="success"?(I(s.data.msg),M("/settings")):g(s.data.msg),c.value=!1}).catch(s=>console.log(s))};return(t,s)=>(N(),$("div",H,[e("div",J,[e("h1",K,i(t.$t("Global.change_password")),1),e("form",{onSubmit:z(B,["prevent"]),ref_key:"changePasswordForm",ref:P},[e("div",L,[e("div",O,[e("div",Q,[s[6]||(s[6]=e("img",{src:U,loading:"lazy",alt:"restore-image",class:"restore-image mb-4"},null,-1)),e("p",W,i(t.$t("Global.enter_old_password_new_password")),1)]),e("div",X,[e("label",Y,[m(i(t.$t("Global.old_password"))+" ",1),s[7]||(s[7]=e("span",{class:"hint-red"},"*",-1))]),e("div",Z,[v(e("input",{type:f("oldPassword"),name:"password","onUpdate:modelValue":s[0]||(s[0]=o=>h(u)?u.value=o:null),class:"custum-input-icon validInputs",placeholder:t.$t("Auth.please_enter_password")},null,8,x),[[_,l(u)]]),e("button",{class:y(["static-btn with_eye",{active_class:l(n).oldPassword}]),type:"button",onClick:s[1]||(s[1]=o=>w("oldPassword"))},s[8]||(s[8]=[e("i",{class:"far fa-eye icon"},null,-1)]),2)])]),e("div",ss,[e("label",es,[m(i(t.$t("Auth.new_password"))+" ",1),s[9]||(s[9]=e("span",{class:"hint-red"},"*",-1))]),e("div",ts,[v(e("input",{type:f("definitelyNewPassword"),name:"password","onUpdate:modelValue":s[2]||(s[2]=o=>h(d)?d.value=o:null),class:"custum-input-icon validInputs",placeholder:t.$t("Auth.please_enter_password")},null,8,os),[[_,l(d)]]),e("button",{class:y(["static-btn with_eye",{active_class:l(n).definitelyNewPassword}]),type:"button",onClick:s[3]||(s[3]=o=>w("definitelyNewPassword"))},s[10]||(s[10]=[e("i",{class:"far fa-eye icon"},null,-1)]),2)])]),e("div",as,[e("label",ls,[m(i(t.$t("Auth.definitely_new_password"))+" ",1),s[11]||(s[11]=e("span",{class:"hint-red"},"*",-1))]),e("div",ns,[v(e("input",{type:f("definitelyNewPassword_2"),name:"confirmPassword",valid:"confirmPassword","onUpdate:modelValue":s[4]||(s[4]=o=>h(p)?p.value=o:null),class:"custum-input-icon validInputs",placeholder:t.$t("Auth.please_confirm_password")},null,8,is),[[_,l(p)]]),e("button",{class:y(["static-btn with_eye",{active_class:l(n).definitelyNewPassword_2}]),type:"button",onClick:s[5]||(s[5]=o=>w("definitelyNewPassword_2"))},s[12]||(s[12]=[e("i",{class:"far fa-eye icon"},null,-1)]),2)])]),e("button",rs,[m(i(t.$t("Global.save"))+" ",1),l(c)?(N(),$("span",ds)):F("",!0)])])])],544)])]))}};export{vs as default};
