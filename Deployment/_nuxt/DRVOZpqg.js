import{s as C,r as i,e as D,c as _,a as e,t as a,f as M,b as N,u as n,i as S,d as f,n as V,g as B,o as h}from"./4aL2WHGa.js";import{_ as x}from"./6A6vq8b4.js";import{e as z}from"./CNonl51M.js";import{u as I}from"./DsWR8yoU.js";import{u as R,r as E}from"./DXutHP6I.js";import{t as F}from"./MDezpcmL.js";const H={class:"container"},U={class:"layout-form custom-width"},j={class:"main-title bold lg mb-5"},q={class:"row"},G={class:"col-12 col-md-8 mr-auto"},J={class:"text-center mb-5"},K={class:"main-title"},L={class:"layout-activate d-flex",dir:"ltr"},O={type:"submit",class:"custom-btn w-100 mr-auto"},P={class:"new-sign mt-4"},Q=["disabled"],W={key:0,class:"text-center mt-3 main-cl"},at={__name:"activateAccount",setup(X){const{response:b}=E(),{successToast:d,errorToast:m}=F(),g=R(),p=I(),{verificationHandler:y}=p,{user:c,notificationToken:w}=C(p),o=i(!1),u=i(60),v=i(!1),A=i(null),l=i(""),r=()=>{o.value=!0,u.value>0?setTimeout(()=>{u.value-=1,r()},1e3):(o.value=!1,u.value=60)},T=async()=>{v.value=!0;const t=new FormData;t.append("code",l.value),t.append("phone",c.value.phone),t.append("country_code",c.value.country_code),t.append("device_id",w.value),t.append("device_type","web");const s=await y(t);s.status=="success"?d(s.msg):m(s.msg),v.value=!1},$=async()=>{await g.get(`resend-code?country_code=${c.value.country_code}&phone=${c.value.phone}`).then(t=>{b(t)=="success"?(d(t.data.msg),o.value=!0,r()):m(t.data.msg)}).catch(t=>console.log(t))};return D(()=>{r()}),(t,s)=>(h(),_("div",H,[e("div",U,[e("h1",j,a(t.$t("Auth.activation_code")),1),e("form",{onSubmit:M(T,["prevent"])},[e("div",q,[e("div",G,[e("div",J,[s[1]||(s[1]=e("img",{src:x,loading:"lazy",alt:"restore-image",class:"restore-image mb-4"},null,-1)),e("p",K,a(t.$t("Auth.please_enter_activation_code")),1)]),e("div",L,[N(n(z),{ref_key:"otpInput",ref:A,value:n(l),"onUpdate:value":s[0]||(s[0]=k=>S(l)?l.value=k:null),"input-classes":"otp-input",separator:" ","num-inputs":6,"should-auto-focus":!0,"is-input-num":!0},null,8,["value"])]),e("button",O,a(t.$t("Auth.confirmation")),1),e("div",P,[f(a(t.$t("Auth.havent_received_code"))+" ",1),e("button",{type:"button",onClick:$,disabled:n(o),class:V({disabledClass:n(o)})},a(t.$t("Auth.resend_code")),11,Q)]),n(o)?(h(),_("div",W,[e("span",null,a(n(u)),1),s[2]||(s[2]=f(" : ")),s[3]||(s[3]=e("span",null,"00",-1))])):B("",!0)])])],32)])]))}};export{at as default};
