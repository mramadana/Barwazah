const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Dtmsk6tV.js","./CCyUVvU4.js","./t6dwkVRB.js","./entry.B0b_3z4T.css"])))=>i.map(i=>d[i]);
import{_ as M,h as U,s as H,l as Y,A as q,B as J,r,e as K,u as n,o as x,c as C,a,b as k,i as I,F as Q,C as X,n as Z,t as p,w as ee,d as F,g as te}from"./t6dwkVRB.js";import{s as ae}from"./CVvfuK2Z.js";import{i as oe,a as se,b as re,c as ne,d as le,_ as ie}from"./CCyUVvU4.js";import ce from"./F7b-IcHV.js";import{u as ue,r as de}from"./DXutHP6I.js";import{u as me}from"./C5EdPX3e.js";import{i as pe}from"./BqCHD34v.js";import"./DeonAvUM.js";import"./CV0YnTgi.js";import"./ijydQKJh.js";import"./CHWeVuB8.js";const he=le(ie),ye={key:0,class:"w-100"},_e={class:"d-flex align-items-center justify-content-center gap-4 mb-4"},fe={class:"with_cun_select custom-select"},ve={class:"flex justify-content-center dropdown_card"},be={class:"chart-container"},ge={class:"year-labels"},we=["onClick"],xe={class:"year-text"},Ce={class:"dialog-content"},ke={class:"main-title bold text-center mb-3"},Se={class:"mb-2 d-flex gap-2 justify-content-center mb-3"},De={class:"value"},Ee={class:"mb-2 d-flex gap-2 justify-content-center mb-3"},Fe={class:"value"},Be={class:"mb-2 d-flex gap-2 justify-content-center mb-3"},$e={class:"value"},Re={__name:"businessGrowth",async setup(V){let h,y;U();const i=ue(),{response:_}=de(),{token:z}=H(me()),f=Y(()=>({headers:{Authorization:`Bearer ${z.value}`}})),S=([h,y]=q(()=>J(()=>import("./Dtmsk6tV.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),h=await h,y(),h);S.use([pe,oe,se,re,ne]);const B=r(!1),$=r(!1),g=r({marketData:[],storeDataData:[]}),c=r(null),u=r({}),l=r(null),R=r([{name:"عرض الكل",id:0},{name:"2018",id:2018},{name:"2019",id:2019},{name:"2020",id:2020},{name:"2021",id:2021},{name:"2022",id:2022},{name:"2023",id:2023},{name:"2024",id:2024},{name:"2025",id:2025}]),A=async(t=0)=>{try{$.value=!0;const e=await i.get(`BusinessGrowthChart?year=${t}`,f.value);_(e)==="success"&&(g.value=e.data.data,j())}catch(e){console.error("Error fetching chart data:",e)}finally{$.value=!1}},j=()=>{const t=g.value.marketData.map(e=>e.year);b.value.xAxis.data=t,b.value.series[0].data=g.value.marketData.map(e=>e.value),b.value.series[1].data=g.value.storeDataData.map(e=>e.value),c.value&&c.value.chart&&c.value.chart.setOption(b.value,!0)},N=async t=>{t&&(l.value=t,await A(t.id))},d=r(!1),v=r("");r({});const O=async t=>{if(t.componentType==="xAxis"){const e=parseInt(t.value,10);v.value=e;try{const o=await i.get(`YearIndicators?year=${e}`,f.value);_(o)==="success"&&(u.value=o.data.data,d.value=!0)}catch(o){console.error("Error fetching year indicators:",o)}}else if(t&&t.name){const e=parseInt(t.name,10);v.value=e;try{const o=await i.get(`YearIndicators?year=${e}`,f.value);_(o)==="success"&&(u.value=o.data.data,d.value=!0)}catch(o){console.error("Error fetching year indicators:",o)}}},T=async t=>{const e=parseInt(t,10);v.value=e;try{const o=await i.get(`YearIndicators?year=${e}`,f.value);_(o)==="success"&&(u.value=o.data.data,d.value=!0)}catch(o){console.error("Error fetching year indicators:",o)}},b=r({legend:{bottom:"5%",show:!0,left:"center",icon:"circle",itemWidth:8,itemHeight:8,itemGap:25,textStyle:{color:"#2B3674",fontSize:12,fontFamily:"Cairo"}},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#E2E8F0",width:1}},backgroundColor:"#fff",borderColor:"#E2E8F0",borderWidth:1,textStyle:{color:"#2B3674",fontFamily:"Cairo"}},grid:{left:"3%",right:"4%",bottom:"15%",top:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,data:[],axisLine:{lineStyle:{color:"#E2E8F0"}},axisLabel:{interval:0,color:"#2B3674",fontFamily:"Cairo",fontSize:12,show:!0,clickable:!0,rich:{a:{color:"#2B3674",fontFamily:"Cairo",fontSize:12,cursor:"pointer",textDecoration:"underline"}},formatter:function(t){return"{a|"+t+"}"}}},yAxis:{type:"value",show:!1,splitLine:{lineStyle:{color:"#E2E8F0",type:"dashed"}},axisLabel:{color:"#2B3674",fontFamily:"Cairo",fontSize:12}},series:[{name:"اجمالي المبيعات للمتجر خلال السنة",type:"line",smooth:.5,symbol:"circle",symbolSize:6,showSymbol:!0,lineStyle:{width:2,color:"#2B3674"},itemStyle:{color:"#2B3674",borderWidth:2},areaStyle:{opacity:.3,color:new S.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(43, 54, 116, 0.3)"},{offset:1,color:"rgba(43, 54, 116, 0.05)"}])},data:[]},{name:"الحصة السوقية للمتجر من السوق",type:"line",smooth:.5,symbol:"circle",symbolSize:6,showSymbol:!0,lineStyle:{width:2,color:"#FF647C"},itemStyle:{color:"#FF647C",borderWidth:2},areaStyle:{opacity:.3,color:new S.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(255, 100, 124, 0.3)"},{offset:1,color:"rgba(255, 100, 124, 0.05)"}])},data:[]}]}),P=Y(()=>{if(!l.value||l.value.id===0)return Object.keys(D);const t=l.value.id,e=Object.keys(D).map(Number),o=Math.max(...e),w=[];for(let m=t;m<=o;m++)D[m]&&w.push(m.toString());return w}),D={2018:{sales:85,market:90,repeatRate:10},2019:{sales:91,market:110,repeatRate:15},2020:{sales:91,market:110,repeatRate:15},2023:{sales:102,market:140,repeatRate:5},2024:{sales:108,market:105,repeatRate:20},2025:{sales:115,market:150,repeatRate:18}},G=r(""),W=async()=>{try{const t=await i.get("GetGrowthReport",f.value);_(t)==="success"&&(G.value=t.data.data)}catch(t){console.error("Error fetching growth report:",t)}};return K(async()=>{const t=R.value[0];l.value=t,await A(t.id),await W(),B.value=!0,c.value&&c.value.chart&&c.value.chart.on("click",O)}),(t,e)=>{const o=ae,w=he,m=ce;return n(B)?(x(),C("div",ye,[a("div",_e,[a("div",fe,[a("div",ve,[k(o,{modelValue:n(l),"onUpdate:modelValue":e[0]||(e[0]=s=>I(l)?l.value=s:null),options:n(R),optionLabel:"name",onChange:e[1]||(e[1]=s=>N(s.value)),placeholder:"اختر السنة",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),a("div",be,[k(w,{ref_key:"chart",ref:c,class:"custom-chart",option:n(b),style:{height:"300px",width:"100%",display:"block"}},null,8,["option"]),a("div",ge,[(x(!0),C(Q,null,X(n(P),s=>(x(),C("div",{key:s,class:Z(["year-label",{active:n(v)===s}]),onClick:E=>T(s)},p(s),11,we))),128))]),a("div",xe,[e[3]||(e[3]=a("h3",{class:"main-title bold main-cl mb-3"},"تقرير نمو",-1)),a("h5",null,p(n(G)),1)])]),k(m,{visible:n(d),"onUpdate:visible":e[2]||(e[2]=s=>I(d)?d.value=s:null),class:"auth-daialog custum_dialog_width",modal:""},{default:ee(()=>{var s,E,L;return[a("div",Ce,[a("h3",ke,"مؤشرات سنة "+p(n(v)),1),a("ul",null,[a("li",Se,[e[4]||(e[4]=F("مبيعات السنة: ")),a("span",De,p((s=n(u))==null?void 0:s.salesYear),1)]),a("li",Ee,[e[5]||(e[5]=F("الحصة السوقية للمتجر: ")),a("span",Fe,p((E=n(u))==null?void 0:E.storeMarketShare),1)]),a("li",Be,[e[6]||(e[6]=F("نسبة تكرار الشراء: ")),a("span",$e,p((L=n(u))==null?void 0:L.repeatPurchaseRate),1)])])])]}),_:1},8,["visible"])])):te("",!0)}}},Ae=M(Re,[["__scopeId","data-v-215e03fe"]]),Ge={class:"container"},Le={class:"layout-form chart_layout"},Ue={__name:"businessGrowth",setup(V){return(h,y)=>{const i=Ae;return x(),C("div",Ge,[a("div",Le,[y[0]||(y[0]=a("h3",{class:"main-title fw-normal text-center mb-4"},"نمو الاعمال",-1)),k(i)])])}}};export{Ue as default};
