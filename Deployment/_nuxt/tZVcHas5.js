const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PTrpCiPf.js","./CUJchad6.js","./8xQljP0o.js","./entry.B0b_3z4T.css"])))=>i.map(i=>d[i]);
import{_ as ne,h as ie,s as ce,l as Q,A as ue,B as de,r as n,e as me,u as a,o as d,c as m,a as o,b as C,i as X,F as pe,C as he,n as ye,t as f,w as fe,d as R,g as k}from"./8xQljP0o.js";import{s as _e}from"./DbXRVtgV.js";import{i as ve,a as be,b as ge,c as xe,d as we,_ as ke}from"./CUJchad6.js";import Se from"./DHfluqW0.js";import{u as Ce,r as De}from"./DXutHP6I.js";import{u as $e}from"./DoPWajBm.js";import{i as Ye}from"./Bmvbube3.js";import"./BYuOmsIA.js";import"./CZGijt7S.js";import"./Dbr_Mq8N.js";import"./B0o1YKYH.js";const Re=we(ke),Be={key:0,class:"w-100"},Ee={class:"d-flex align-items-center justify-content-center gap-4 mb-4"},Fe={class:"with_cun_select custom-select"},Ve={class:"flex justify-content-center dropdown_card"},Ae={class:"chart-container"},Ge={class:"year-labels"},Ie=["onClick"],Le={class:"year-text"},Ne={class:"dialog-content"},Me={class:"main-title main-cl lg normal text-center mb-4"},je={key:0,class:"mb-2 d-flex gap-2 justify-content-between main-cl mb-3"},ze={class:"value"},Pe={key:1,class:"mb-2 d-flex gap-2 justify-content-between main-cl mb-3"},Oe={class:"value"},Te={key:2,class:"mb-2 d-flex gap-2 justify-content-between main-cl mb-3"},We={class:"value"},Ue={key:0,class:"d-flex gap-2 justify-content-center main-cl mt-4 mb-3"},He={__name:"businessGrowth",async setup(Z){let _,v;ie();const p=Ce(),{response:b}=De(),{token:ee}=ce($e()),g=Q(()=>({headers:{Authorization:`Bearer ${ee.value}`}})),D=([_,v]=ue(()=>de(()=>import("./PTrpCiPf.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),_=await _,v(),_);D.use([Ye,ve,be,ge,xe]);const B=n(!1),E=n(!1),S=n({marketData:[],storeDataData:[]}),h=n(null),r=n({}),i=n(null),F=n([{name:"عرض الكل",id:0},{name:"2018",id:2018},{name:"2019",id:2019},{name:"2020",id:2020},{name:"2021",id:2021},{name:"2022",id:2022},{name:"2023",id:2023},{name:"2024",id:2024},{name:"2025",id:2025}]),V=async(t=0)=>{try{E.value=!0;const e=await p.get(`BusinessGrowthChart?year=${t}`,g.value);b(e)==="success"&&(S.value={marketData:e.data.data.marketData,storeDataData:e.data.data.storeDataData},te())}catch(e){console.error("Error fetching chart data:",e)}finally{E.value=!1}},te=()=>{const t=S.value.marketData.map(e=>e.year);w.value.xAxis.data=t,w.value.series[0].data=S.value.marketData.map(e=>e.value),w.value.series[1].data=S.value.storeDataData.map(e=>e.value),h.value&&h.value.chart&&h.value.chart.setOption(w.value,!0)},ae=async t=>{t&&(i.value=t,await V(t.id))},y=n(!1),x=n("");n({});const se=async t=>{if(t.componentType==="xAxis"){const e=parseInt(t.value,10);x.value=e;try{const s=await p.get(`YearIndicators?year=${e}`,g.value);b(s)==="success"&&(r.value=s.data.data,y.value=!0)}catch(s){console.error("Error fetching year indicators:",s)}}else if(t&&t.name){const e=parseInt(t.name,10);x.value=e;try{const s=await p.get(`YearIndicators?year=${e}`,g.value);b(s)==="success"&&(r.value=s.data.data,y.value=!0)}catch(s){console.error("Error fetching year indicators:",s)}}},re=async t=>{const e=parseInt(t,10);x.value=e;try{const s=await p.get(`YearIndicators?year=${e}`,g.value);b(s)==="success"&&(r.value=s.data.data,y.value=!0)}catch(s){console.error("Error fetching year indicators:",s)}},w=n({legend:{bottom:"0%",show:!0,left:"center",icon:"circle",itemWidth:8,itemHeight:8,itemGap:25,textStyle:{color:"#2B3674",fontSize:11,fontFamily:"Cairo",padding:[0,10,0,0]}},tooltip:{trigger:"axis",formatter:t=>{let e=`<div style="padding: 5px;">${t[0].axisValue}</div>`;return t.forEach(s=>{const c=Number(s.value),u=Number.isInteger(c)?`${c}%`:`${c.toFixed(3)}%`;e+=`
        <div style="display: flex; align-items: center; gap: 8px;">
          <span style="display:inline-block;width:8px;height:8px;border-radius:50%;background:${s.color};"></span>
          <span>${s.seriesName}: <b>${u}</b></span>
        </div>
      `}),e}},grid:{left:"3%",right:"4%",bottom:"15%",top:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,data:[],axisLine:{lineStyle:{color:"#E2E8F0"}},axisLabel:{interval:0,color:"#2B3674",fontFamily:"Cairo",fontSize:12,show:!0,clickable:!0,rich:{a:{color:"#2B3674",fontFamily:"Cairo",fontSize:12,cursor:"pointer",textDecoration:"underline"}},formatter:function(t){return"{a|"+t+"}"}}},yAxis:{type:"value",show:!1,splitLine:{lineStyle:{color:"#E2E8F0",type:"dashed"}},axisLabel:{color:"#2B3674",fontFamily:"Cairo",fontSize:12}},series:[{name:"اجمالي المبيعات للمتجر خلال السنة",type:"line",smooth:.5,symbol:"circle",symbolSize:6,showSymbol:!0,lineStyle:{width:2,color:"#2B3674"},itemStyle:{color:"#2B3674",borderWidth:2},areaStyle:{opacity:.3,color:new D.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(43, 54, 116, 0.3)"},{offset:1,color:"rgba(43, 54, 116, 0.05)"}])},data:[]},{name:"الحصة السوقية للمتجر من السوق",type:"line",smooth:.5,symbol:"circle",symbolSize:6,showSymbol:!0,lineStyle:{width:2,color:"#FF647C"},itemStyle:{color:"#FF647C",borderWidth:2},areaStyle:{opacity:.3,color:new D.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(255, 100, 124, 0.3)"},{offset:1,color:"rgba(255, 100, 124, 0.05)"}])},data:[]}]}),oe=Q(()=>{if(!i.value||i.value.id===0)return Object.keys($);const t=i.value.id,e=Object.keys($).map(Number),s=Math.max(...e),c=[];for(let u=t;u<=s;u++)$[u]&&c.push(u.toString());return c}),$={2018:{sales:85,market:90,repeatRate:10},2019:{sales:91,market:110,repeatRate:15},2020:{sales:91,market:110,repeatRate:15},2023:{sales:102,market:140,repeatRate:5},2024:{sales:108,market:105,repeatRate:20},2025:{sales:115,market:150,repeatRate:18}},A=n(""),le=async()=>{try{const t=await p.get("GetGrowthReport",g.value);b(t)==="success"&&(A.value=t.data.data)}catch(t){console.error("Error fetching growth report:",t)}};return me(async()=>{const t=F.value[0];i.value=t,await V(t.id),await le(),B.value=!0,h.value&&h.value.chart&&h.value.chart.on("click",se)}),(t,e)=>{const s=_e,c=Re,u=Se;return a(B)?(d(),m("div",Be,[o("div",Ee,[o("div",Fe,[o("div",Ve,[C(s,{modelValue:a(i),"onUpdate:modelValue":e[0]||(e[0]=l=>X(i)?i.value=l:null),options:a(F),optionLabel:"name",onChange:e[1]||(e[1]=l=>ae(l.value)),placeholder:"اختر السنة",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),o("div",Ae,[C(c,{ref_key:"chart",ref:h,class:"custom-chart chart-height",option:a(w),style:{height:"300px",width:"100%",display:"block"}},null,8,["option"]),o("div",Ge,[(d(!0),m(pe,null,he(a(oe),l=>(d(),m("div",{key:l,class:ye(["year-label",{active:a(x)===l}]),onClick:Y=>re(l)},f(l),11,Ie))),128))]),o("div",Le,[e[3]||(e[3]=o("h3",{class:"main-title bold main-cl mb-3"},"تقرير نمو",-1)),o("h5",null,f(a(A)),1)])]),C(u,{visible:a(y),"onUpdate:visible":e[2]||(e[2]=l=>X(y)?y.value=l:null),class:"auth-daialog custum_dialog_width",modal:""},{default:fe(()=>{var l,Y,G,I,L,N,M,j,z,P,O,T,W,U,H,q,J,K;return[o("div",Ne,[o("h3",Me,"مؤشرات سنة "+f(a(x)),1),o("ul",null,[((l=a(r))==null?void 0:l.salesYear)!==null&&((Y=a(r))==null?void 0:Y.salesYear)!=="0%"&&((G=a(r))==null?void 0:G.salesYear)!=="0ريال"?(d(),m("li",je,[e[4]||(e[4]=R("مبيعات السنة: ")),o("span",ze,f((I=a(r))==null?void 0:I.salesYear),1)])):k("",!0),((L=a(r))==null?void 0:L.storeMarketShare)!==null&&((N=a(r))==null?void 0:N.storeMarketShare)!=="0%"&&((M=a(r))==null?void 0:M.storeMarketShare)!=="0ريال"?(d(),m("li",Pe,[e[5]||(e[5]=R("الحصة السوقية للمتجر: ")),o("span",Oe,f((j=a(r))==null?void 0:j.storeMarketShare),1)])):k("",!0),((z=a(r))==null?void 0:z.repeatPurchaseRate)!==null&&((P=a(r))==null?void 0:P.repeatPurchaseRate)!=="0%"&&((O=a(r))==null?void 0:O.repeatPurchaseRate)!=="0ريال"?(d(),m("li",Te,[e[6]||(e[6]=R("نسبة تكرار الشراء: ")),o("span",We,f((T=a(r))==null?void 0:T.repeatPurchaseRate),1)])):k("",!0)]),((W=a(r))==null?void 0:W.salesYear)===null||((U=a(r))==null?void 0:U.salesYear)==="0%"||((H=a(r))==null?void 0:H.salesYear)==="0ريال"||((q=a(r))==null?void 0:q.storeMarketShare)===null||((J=a(r))==null?void 0:J.storeMarketShare)==="0%"||((K=a(r))==null?void 0:K.storeMarketShare)==="0ريال"?(d(),m("li",Ue,e[7]||(e[7]=[o("span",{class:"value"},"ليس لديك بيانات مسجله لهذه السنة",-1)]))):k("",!0)])]}),_:1},8,["visible"])])):k("",!0)}}},qe=ne(He,[["__scopeId","data-v-e55adc19"]]),Je={class:"container"},Ke={class:"layout-form chart_layout"},it={__name:"businessGrowth",setup(Z){return(_,v)=>{const p=qe;return d(),m("div",Je,[o("div",Ke,[v[0]||(v[0]=o("h3",{class:"main-title fw-normal text-center mb-4"},"نمو الاعمال",-1)),C(p)])])}}};export{it as default};
