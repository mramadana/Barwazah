import cs from"./BfgpWYwB.js";import rs from"./CRoE8naS.js";import{_ as ds,s as us,e as ms,r as i,k as _s,I as ps,c,a as s,u as e,d as b,q as L,t as l,L as hs,h as d,b as R,w as J,i as g,o as n,f as fs,g as vs,m as bs,j as K}from"./Z9epnRCn.js";import{_ as gs}from"./CRNCPBld.js";import{a as Q,u as ys,r as ks}from"./C0270F3a.js";import{t as ws}from"./C3IH1iHz.js";const xs={class:"container"},Ss={class:"row"},As={class:"col-12 col-md-6 mb-4"},$s={class:"settings-card info"},Cs={class:"store-image"},Ns=["src"],Ts={class:"store-info"},Es={class:"store-name d-flex align-items-center"},Is={key:1,class:"ms-2"},Bs={key:0,class:"progress-container mb-2"},Ds={class:"progress-bar-side"},Fs={class:"store-category d-flex align-items-center"},Vs={key:1,class:"ms-2"},Ms={class:"col-12 col-md-6 mb-4"},Ps={class:"settings-card black info"},Gs={class:"store-info"},Hs={class:"store-name mb-2"},Os={class:"social-icons"},Us=["href"],js=["href"],qs=["href"],zs=["href"],Ls={class:"mb-5"},Rs={class:"row layout-form chart_layout accordion accordion-flush m-0"},Js={class:"col-12 col-xl-4 col-md-6 mb-4"},Ks={class:"accordion-item"},Qs={id:"flush-collapseOne",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},Ws={class:"accordion-body"},Xs={class:"col-12 col-xl-4 col-md-6 mb-4"},Ys={class:"accordion-item"},Zs={id:"flush-collapseSector",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},st={class:"accordion-body"},tt={class:"col-12 col-xl-4 col-md-6 mb-4"},et={class:"accordion-item"},ot={id:"flush-collapseEmail",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},at={class:"accordion-body"},lt={class:"col-12 col-xl-4 col-md-6 mb-4"},nt={class:"text-center"},it={class:"main-title bold mb-5"},ct={class:"form-group"},rt={class:"label"},dt=["placeholder"],ut={class:"section-btns mt-4"},mt={type:"submit",class:"custom-btn sm d-inline-flex"},_t={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},pt={class:"text-center"},ht={class:"main-title bold mb-4"},ft={class:"main-title normal mb-4"},vt={class:"section-btns mt-5"},bt={__name:"settings",setup(gt){const{token:W,user:X,newemail:Y}=us(Q()),Z=Q(),{response:y}=ks(),{successToast:k,errorToast:p}=ws(),w=ys(),{deleteAccountHandler:ss}=Z,{t:ts}=ms({useScope:"global"}),u=i(""),x=i(null),h=i(!1),f=i([]),m=i(!0),es=i(!1),_=i(!1),a=i({}),v=i(!1),os=_s(()=>({headers:{Authorization:`Bearer ${W.value}`}}));function as(){let o=document.querySelectorAll(".validInputs");for(let t=0;t<o.length;t++)o[t].value===""&&f.value.push(ts(`validation.${o[t].name}`))}const ls=async()=>{m.value=!0,await w.get("SettingHome",os.value).then(o=>{y(o)=="success"&&(a.value=o.data.data,console.log(a.value,"settingsData")),m.value=!1}).catch(o=>{console.error(o)})},ns=async()=>{try{h.value=!0;const o=new FormData(x.value);if(as(),f.value.length){p(f.value[0]);return}const t=await w.post(`SendCode?email=${u.value}&accountType=${X.value.platformType}`);y(t)==="success"?(k(t.data.message),K("/emailActivateCode"),Y.value=u.value):p(t.data.msg)}catch(o){console.error(o),h.value=!0,p("An error occurred. Please try again.")}finally{h.value=!1,f.value=[]}};ps(async()=>{await ls()});const is=async()=>{es.value=!0,_.value=!1,localStorage.clear();const o=await ss();o.status=="success"?k(o.msg):p(o.msg),K("/Auth/register")};return(o,t)=>{var $,C,N,T,E,I,B,D,F,V,M,P,G,H,O,U,j,q,z;const S=cs,A=rs;return n(),c("div",null,[s("div",xs,[s("div",Ss,[s("div",As,[s("div",$s,[s("div",Cs,[s("img",{onerror:"this.src='main-logo.jpg'",src:($=e(a))==null?void 0:$.storeImage,alt:"Store Logo"},null,8,Ns)]),s("div",Ts,[s("div",Es,[t[5]||(t[5]=b("المتجر: ")),(C=e(a))!=null&&C.length||e(m)?(n(),L(S,{key:0,class:"ms-3",width:"5rem",height:".5rem"})):(n(),c("span",Is,l((N=e(a))==null?void 0:N.storeName),1))]),!((T=e(a))!=null&&T.length)&&!e(m)?(n(),c("div",Bs,[s("div",Ds,[s("div",{class:"progress-fill",style:hs({width:((E=e(a))==null?void 0:E.classificationPercentage)+"%"})},null,4)])])):d("",!0),s("div",Fs,[t[6]||(t[6]=b(" الفئة: ")),(I=e(a))!=null&&I.length||e(m)?(n(),L(S,{key:0,class:"ms-3",width:"5rem",height:".5rem"})):(n(),c("span",Vs,l((B=e(a))==null?void 0:B.storeClassification),1))])])])]),s("div",Ms,[s("div",Ps,[t[11]||(t[11]=s("div",{class:"store-image"},null,-1)),s("div",Gs,[s("div",Hs,"التاجر: "+l((D=e(a))==null?void 0:D.userName),1),s("div",Os,[(F=e(a))!=null&&F.instagram?(n(),c("a",{key:0,href:(V=e(a))==null?void 0:V.instagram,target:"_blank"},t[7]||(t[7]=[s("i",{class:"fab fa-instagram"},null,-1)]),8,Us)):d("",!0),(M=e(a))!=null&&M.twitter?(n(),c("a",{key:1,class:"twitter",href:(P=e(a))==null?void 0:P.twitter,target:"_blank"},t[8]||(t[8]=[s("img",{src:gs,alt:"twitter"},null,-1)]),8,js)):d("",!0),(G=e(a))!=null&&G.snapchat?(n(),c("a",{key:2,href:(H=e(a))==null?void 0:H.snapchat,target:"_blank"},t[9]||(t[9]=[s("i",{class:"fab fa-snapchat-ghost"},null,-1)]),8,qs)):d("",!0),(O=e(a))!=null&&O.facebook?(n(),c("a",{key:3,href:(U=e(a))==null?void 0:U.facebook,target:"_blank"},t[10]||(t[10]=[s("i",{class:"fab fa-facebook-f"},null,-1)]),8,zs)):d("",!0)])])])])]),s("div",Ls,[s("div",Rs,[s("div",Js,[s("div",Ks,[t[12]||(t[12]=s("h2",{class:"accordion-header"},[s("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne"},[s("span",{class:"hint-accordion"},"رقم الهاتف")])],-1)),s("div",Qs,[s("div",Ws,l((j=e(a))==null?void 0:j.phoneNumber),1)])])]),s("div",Xs,[s("div",Ys,[t[13]||(t[13]=s("h2",{class:"accordion-header"},[s("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseSector","aria-expanded":"false","aria-controls":"flush-collapseSector"},[s("span",{class:"hint-accordion"},"القطاع الخاص بك")])],-1)),s("div",Zs,[s("div",st,l((q=e(a))==null?void 0:q.nisheName),1)])])]),s("div",tt,[s("div",et,[t[14]||(t[14]=s("h2",{class:"accordion-header"},[s("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseEmail","aria-expanded":"false","aria-controls":"flush-collapseEmail"},[s("span",null,"البريد الإلكتروني")])],-1)),s("div",ot,[s("div",at,l((z=e(a))==null?void 0:z.email),1)])])]),s("div",lt,[s("div",{class:"settings-card blue-bg",onClick:t[0]||(t[0]=r=>v.value=!0)},t[15]||(t[15]=[s("div",{class:"card-content"},[s("span",{class:"card-label"},"تغيير كلمة السر")],-1),s("button",{class:"edit-button"},"***",-1)]))])])])]),R(A,{visible:e(v),"onUpdate:visible":t[2]||(t[2]=r=>g(v)?v.value=r:null),modal:"",class:"custum_dialog_width auth-daialog",draggable:!1},{default:J(()=>[s("div",nt,[s("h1",it,l(o.$t("Auth.change_password")),1),s("form",{onSubmit:fs(ns,["prevent"]),ref_key:"forgetForm",ref:x},[s("div",ct,[s("label",rt,l(o.$t("Auth.email")),1),vs(s("input",{type:"email",class:"main_input validInputs",valid:"email",name:"email","onUpdate:modelValue":t[1]||(t[1]=r=>g(u)?u.value=r:null),placeholder:o.$t("Auth.enter_email")},null,8,dt),[[bs,e(u)]])]),s("div",ut,[s("button",mt,[b(l(o.$t("Auth.confirmation"))+" ",1),e(h)?(n(),c("span",_t)):d("",!0)])])],544)])]),_:1},8,["visible"]),R(A,{visible:e(_),"onUpdate:visible":t[4]||(t[4]=r=>g(_)?_.value=r:null),modal:"",class:"custum_dialog_width",draggable:!1},{default:J(()=>[s("div",pt,[s("h1",ht,l(o.$t("Global.sure_delete_account")),1),s("h1",ft,l(o.$t("Global.delete_account_info")),1),s("div",vt,[s("button",{type:"button",class:"custom-btn sm d-inline-flex",onClick:t[3]||(t[3]=r=>_.value=!1)},l(o.$t("Home.retreat")),1),s("button",{type:"button",class:"custom-btn logout sm d-inline-flex",onClick:is},l(o.$t("Global.delete")),1)])])]),_:1},8,["visible"])])}}},$t=ds(bt,[["__scopeId","data-v-79c9be1a"]]);export{$t as default};
