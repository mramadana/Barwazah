import ts from"./CQbogLMU.js";import es from"./F3QQJnpl.js";import{_ as os,s as as,j as ls,r as n,m as ns,E as is,c as M,a as s,t as l,u as o,y as V,f,b as G,w as O,i as v,o as p,h as cs,k as rs,q as ds,d as us,l as P}from"./CDjVABWN.js";import{_ as ms}from"./sLfZeFHp.js";import{u as U}from"./CVjljgFj.js";import{u as hs,r as _s}from"./Bwfks3Mu.js";import{t as ps}from"./CsKsy3XR.js";const fs="data:image/svg+xml,%3csvg%20width='14'%20height='15'%20viewBox='0%200%2014%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%200.230957L5.39047%208.10596L0.114171%2014.231H1.28317L5.90675%208.86007L9.58322%2014.231H14L8.36826%206.00409L13.3379%200.230957H12.1725L7.85126%205.24782L4.41678%200.230957H0ZM1.39591%200.967799H4.02975L12.6041%2013.4941H9.97025L1.39591%200.967799Z'%20fill='white'/%3e%3c/svg%3e",vs={class:"container"},gs={class:"main-title bold lg mb-5"},bs={class:"row"},ys={class:"col-12 col-md-6 mb-4"},ws={class:"settings-card"},ks={class:"store-info"},xs={class:"store-name mb-2"},Ss={class:"store-category"},$s={class:"col-12 col-md-6 mb-4"},As={class:"settings-card black"},Ls={class:"store-image"},Hs=["src"],Es={class:"store-info"},Ns={class:"store-name mb-2"},Ts={class:"social-icons"},Bs=["href"],Cs=["href"],Ds=["href"],Fs=["href"],Is={class:"row layout-form chart_layout accordion accordion-flush"},Ms={class:"col-12 col-xl-4 col-md-6 mb-4"},Vs={class:"accordion-item"},Gs={id:"flush-collapseOne",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},Os={class:"accordion-body"},Ps={class:"col-12 col-xl-4 col-md-6 mb-4"},Us={class:"accordion-item"},qs={id:"flush-collapseSector",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},Rs={class:"accordion-body"},Zs={class:"col-12 col-xl-4 col-md-6 mb-4"},js={class:"accordion-item"},zs={id:"flush-collapseEmail",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},Js={class:"accordion-body"},Ks={class:"col-12 col-xl-4 col-md-6 mb-4"},Qs={class:"text-center"},Ws={class:"main-title bold mb-5"},Xs={class:"form-group"},Ys={class:"label"},st=["placeholder"],tt={class:"section-btns mt-4"},et={type:"submit",class:"custom-btn sm d-inline-flex"},ot={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},at={class:"text-center"},lt={class:"main-title bold mb-4"},nt={class:"main-title normal mb-4"},it={class:"section-btns mt-5"},ct={__name:"settings",setup(rt){const{token:q,user:R,newemail:Z}=as(U()),{response:g}=_s(),{successToast:b,errorToast:d}=ps(),y=hs(),j=U(),{deleteAccountHandler:z}=j,{t:J}=ls({useScope:"global"}),c=n(""),w=n(null),u=n(!1),m=n([]),h=n(!0),K=n(!1),r=n(!1),a=n({}),_=n(!1),Q=ns(()=>({headers:{Authorization:`Bearer ${q.value}`}}));function W(){let e=document.querySelectorAll(".validInputs");for(let t=0;t<e.length;t++)e[t].value===""&&m.value.push(J(`validation.${e[t].name}`))}const X=async()=>{h.value=!0,await y.get("SettingHome",Q.value).then(e=>{g(e)=="success"&&(a.value=e.data.data,console.log(a.value,"settingsData")),h.value=!1}).catch(e=>{console.error(e)})},Y=async()=>{try{u.value=!0;const e=new FormData(w.value);if(W(),m.value.length){d(m.value[0]);return}const t=await y.post(`SendCode?email=${c.value}&accountType=${R.value.platformType}`);g(t)==="success"?(b(t.data.message),P("/emailActivateCode"),Z.value=c.value):d(t.data.msg)}catch(e){console.error(e),u.value=!0,d("An error occurred. Please try again.")}finally{u.value=!1,m.value=[]}};is(async()=>{await X()});const ss=async()=>{K.value=!0,r.value=!1,localStorage.clear();const e=await z();e.status=="success"?b(e.msg):d(e.msg),P("/Auth/register")};return(e,t)=>{var S,$,A,L,H,E,N,T,B,C,D,F,I;const k=ts,x=es;return p(),M("div",null,[s("div",vs,[s("h1",gs,l(e.$t("Home.settings")),1),s("div",bs,[s("div",ys,[s("div",ws,[t[5]||(t[5]=s("div",{class:"store-image"},[s("img",{src:ms,alt:"Store Logo"})],-1)),s("div",ks,[s("div",xs,"المتجر: "+l((S=o(a))==null?void 0:S.storeName),1),($=o(a))!=null&&$.length||o(h)?(p(),V(k,{key:0,class:"mt-2",width:"5rem",height:".5rem"})):f("",!0),s("div",Ss,"الفئة: "+l((A=o(a))==null?void 0:A.store_category),1),(L=o(a))!=null&&L.length||o(h)?(p(),V(k,{key:1,class:"mt-2",width:"5rem",height:".5rem"})):f("",!0)])])]),s("div",$s,[s("div",As,[s("div",Ls,[s("img",{src:(H=o(a))==null?void 0:H.userImage,alt:"Store Logo"},null,8,Hs)]),s("div",Es,[s("div",Ns,"التاجر: "+l((E=o(a))==null?void 0:E.userName),1),s("div",Ts,[s("a",{href:(N=o(a))==null?void 0:N.instagram,target:"_blank"},t[6]||(t[6]=[s("i",{class:"fab fa-instagram"},null,-1)]),8,Bs),s("a",{href:(T=o(a))==null?void 0:T.twitter,target:"_blank"},t[7]||(t[7]=[s("img",{src:fs,alt:"twitter"},null,-1)]),8,Cs),s("a",{href:(B=o(a))==null?void 0:B.snapchat,target:"_blank"},t[8]||(t[8]=[s("i",{class:"fab fa-snapchat-ghost"},null,-1)]),8,Ds),s("a",{href:(C=o(a))==null?void 0:C.facebook,target:"_blank"},t[9]||(t[9]=[s("i",{class:"fab fa-facebook-f"},null,-1)]),8,Fs)])])])])]),s("div",Is,[s("div",Ms,[s("div",Vs,[t[10]||(t[10]=s("h2",{class:"accordion-header"},[s("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne"},[s("span",{class:"hint-accordion"},"رقم الهاتف")])],-1)),s("div",Gs,[s("div",Os,l((D=o(a))==null?void 0:D.phoneNumber),1)])])]),s("div",Ps,[s("div",Us,[t[11]||(t[11]=s("h2",{class:"accordion-header"},[s("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseSector","aria-expanded":"false","aria-controls":"flush-collapseSector"},[s("span",{class:"hint-accordion"},"القطاع الخاص بك")])],-1)),s("div",qs,[s("div",Rs,l((F=o(a))==null?void 0:F.nisheName),1)])])]),s("div",Zs,[s("div",js,[t[12]||(t[12]=s("h2",{class:"accordion-header"},[s("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseEmail","aria-expanded":"false","aria-controls":"flush-collapseEmail"},[s("span",null,"البريد الإلكتروني")])],-1)),s("div",zs,[s("div",Js,l((I=o(a))==null?void 0:I.email),1)])])]),s("div",Ks,[s("div",{class:"settings-card blue-bg",onClick:t[0]||(t[0]=i=>_.value=!0)},t[13]||(t[13]=[s("div",{class:"card-content"},[s("span",{class:"card-label"},"تغيير كلمة السر")],-1),s("button",{class:"edit-button"},"***",-1)]))])])]),G(x,{visible:o(_),"onUpdate:visible":t[2]||(t[2]=i=>v(_)?_.value=i:null),modal:"",class:"custum_dialog_width auth-daialog",draggable:!1},{default:O(()=>[s("div",Qs,[s("h1",Ws,l(e.$t("Auth.change_password")),1),s("form",{onSubmit:cs(Y,["prevent"]),ref_key:"forgetForm",ref:w},[s("div",Xs,[s("label",Ys,l(e.$t("Auth.email")),1),rs(s("input",{type:"email",class:"main_input validInputs",valid:"email",name:"email","onUpdate:modelValue":t[1]||(t[1]=i=>v(c)?c.value=i:null),placeholder:e.$t("Auth.enter_email")},null,8,st),[[ds,o(c)]])]),s("div",tt,[s("button",et,[us(l(e.$t("Auth.confirmation"))+" ",1),o(u)?(p(),M("span",ot)):f("",!0)])])],544)])]),_:1},8,["visible"]),G(x,{visible:o(r),"onUpdate:visible":t[4]||(t[4]=i=>v(r)?r.value=i:null),modal:"",class:"custum_dialog_width",draggable:!1},{default:O(()=>[s("div",at,[s("h1",lt,l(e.$t("Global.sure_delete_account")),1),s("h1",nt,l(e.$t("Global.delete_account_info")),1),s("div",it,[s("button",{type:"button",class:"custom-btn sm d-inline-flex",onClick:t[3]||(t[3]=i=>r.value=!1)},l(e.$t("Home.retreat")),1),s("button",{type:"button",class:"custom-btn logout sm d-inline-flex",onClick:ss},l(e.$t("Global.delete")),1)])])]),_:1},8,["visible"])])}}},vt=os(ct,[["__scopeId","data-v-14c8cb4b"]]);export{vt as default};
