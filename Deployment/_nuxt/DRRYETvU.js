const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DiOpFFf5.js","./CxN763Ve.js","./Z9epnRCn.js","./entry.B0b_3z4T.css"])))=>i.map(i=>d[i]);
import W from"./BfgpWYwB.js";import{_ as Ee}from"./M7-NroZz.js";import{y as J,r as s,e as I,l as N,I as Ce,x as Z,o as G,c as j,a as e,b as _,h as q,z as K,s as Q,k as H,w as X,u as r,i as Ge,_ as Le,H as Oe,d as we,t as z,q as be}from"./Z9epnRCn.js";import{s as ee}from"./BMaamftT.js";import{d as ae,_ as te,i as se,a as oe,b as le,c as ne,f as De,u as Ve}from"./CxN763Ve.js";import{_ as Fe}from"./BsR_wpHR.js";import{u as ie,a as re,r as ce}from"./C0270F3a.js";import{i as de}from"./CmP3pNQu.js";import{_ as Ye}from"./B-1zY4ZY.js";import"./Baqsf8IJ.js";import"./msjwsnvi.js";import"./130--f_B.js";import"./Bx6FFj0s.js";const je=ae(te),Pe={key:0,class:"w-100"},qe={class:"radio-container"},Re=["id","name"],Te=["for"],Be=["id","name"],Ue=["for"],ze=["id","name"],Ne=["for"],He={class:"d-flex align-items-center justify-content-center gap-4"},Ie={class:"with_cun_select custom-select"},Ze={class:"flex justify-content-center dropdown_card"},We={class:"with_cun_select custom-select"},Je={class:"flex justify-content-center dropdown_card"},Ke={__name:"GradientArea",props:{initialMonths:{type:Array,required:!0},initialAllMonths:{type:Array,required:!0},initialOption:{type:Object,required:!0},initialMonthlyData:{type:Object,required:!0},initialSeriesData:{type:Array,required:!0},initialYears:{type:Array,required:!0}},emits:["rental_change","year_change"],async setup(B,{emit:f}){let C,P;const R=([C,P]=J(()=>K(()=>import("./DiOpFFf5.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),C=await C,P(),C),g=B,$=f,w=s({id:0}),F=s(g.initialYears),L=()=>{console.log("Selected Year ID:",w.value.id),$("year_change",w.value.id)},u=s(Math.random().toString(36).substr(2,9)),{t:p}=I(),D=s(!1),y=s({id:0}),v=s(g.initialMonths),O=s(g.initialAllMonths),M=s(g.initialMonthlyData),d=s(null),x=o=>Array.from({length:o},()=>0),m=()=>{var l;if(console.log("handleMonthChange triggered",y.value),!y.value||typeof y.value.id>"u"){console.error("Invalid selected month: ",y.value);return}$("rental_change",y.value.id),console.log("Emitted rental_change with ID:",y.value.id);const o=y.value.id;if(o===0)a.value.xAxis.data=O.value,a.value.series[0].data=g.initialSeriesData[0]||[],a.value.series[1].data=g.initialSeriesData[1]||[];else{const n=v.value.find(T=>T.id===o);if(!n){console.error("Invalid month ID: ",o);return}const c=n.days,b=Array.from({length:c},(T,Y)=>`اليوم ${Y+1}`);a.value.xAxis={type:"category",boundaryGap:!1,data:b,axisLabel:{interval:0,rotate:45}};const k=M.value[o];k?(a.value.series[0].data=k.store||[],a.value.series[1].data=k.market||[]):(a.value.series[0].data=x(c),a.value.series[1].data=x(c))}(l=d.value)!=null&&l.chart?d.value.chart.setOption(a.value,!0):console.error("Chart instance is not ready.")},a=s({legend:{top:"5%",show:!1,selected:{[p("Global.marketData")]:!0,[p("Global.storeDataData")]:!0}},tooltip:{trigger:"axis",padding:[10,20],textStyle:{fontSize:13,color:"#333",fontFamily:"Arial"},borderWidth:2,axisPointer:{type:"cross",type:"none",label:{backgroundColor:"#6a7985"}},formatter:function(o){let l='<div style="text-align: right; direction: rtl;">';return o.forEach(n=>{l+=`
          <div style="
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
          ">
            <span style="
              display: inline-block;
              width: 12px;
              height: 12px;
              background: ${n.color};
              border-radius: 2px;
            "></span>
            <strong>${n.seriesName}:</strong>
            <span>${n.value} ريال</span>
          </div>
        `}),l+="</div>",l}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisPointer:{type:"none"}},yAxis:{type:"value",show:!1,axisPointer:{type:"none"}},series:[{name:p("Global.marketData"),type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#4681f4"},itemStyle:{color:"#013660"},areaStyle:{color:new R.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(70, 129, 244, 0.6)"},{offset:1,color:"rgba(70, 129, 244, 0.2)"}])},data:[]},{name:p("Global.storeDataData"),type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#f75c5c"},itemStyle:{color:"#e5254a"},areaStyle:{color:new R.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(247, 92, 92, 0.6)"},{offset:1,color:"rgba(247, 92, 92, 0.2)"}])},data:[]}]}),h=o=>{var n;const l={id:Number(o.target.value)};if(l){const c=(n=d.value)==null?void 0:n.chart;if(!c)return;switch(l.id){case 0:a.value.legend.selected[p("Global.marketData")]=!0,a.value.legend.selected[p("Global.storeDataData")]=!0;break;case 1:a.value.legend.selected[p("Global.marketData")]=!1,a.value.legend.selected[p("Global.storeDataData")]=!0;break;case 2:a.value.legend.selected[p("Global.marketData")]=!0,a.value.legend.selected[p("Global.storeDataData")]=!1;break}c.setOption(a.value,!0)}};return N(()=>g.initialMonthlyData,o=>{var l;if(y.value&&y.value.id!==0){const n=y.value.id,c=o[n];c&&(a.value.series[0].data=c.store||[],a.value.series[1].data=c.market||[],(l=d.value)!=null&&l.chart&&d.value.chart.setOption(a.value,!0))}},{deep:!0}),N(()=>g.initialSeriesData,o=>{var l;o&&Array.isArray(o)&&o.length>0&&(a.value.series[0].data=o[0]||[],a.value.series[1].data=o[1]||[],(l=d.value)!=null&&l.chart&&d.value.chart.setOption(a.value,!0))},{deep:!0,immediate:!0}),Ce(()=>{D.value=!0,a.value.xAxis.data=O.value,Array.isArray(g.initialSeriesData)&&g.initialSeriesData.length>=2&&(a.value.series[0].data=g.initialSeriesData[0]||[],a.value.series[1].data=g.initialSeriesData[1]||[])}),Z(()=>{var o;(o=d.value)!=null&&o.chart&&d.value.chart.setOption(a.value,!0)}),(o,l)=>{const n=ee,c=je;return D.value?(G(),j("div",Pe,[e("div",qe,[e("input",{type:"radio",id:`radio1-${u.value}`,name:`slider-${u.value}`,value:"1",onChange:h},null,40,Re),e("label",{for:`radio1-${u.value}`,class:"cl-red"},"للمتجر",8,Te),e("input",{type:"radio",id:`radio2-${u.value}`,name:`slider-${u.value}`,value:"0",onChange:h,checked:""},null,40,Be),e("label",{for:`radio2-${u.value}`},"الكل",8,Ue),e("input",{type:"radio",id:`radio3-${u.value}`,name:`slider-${u.value}`,value:"2",onChange:h},null,40,ze),e("label",{for:`radio3-${u.value}`,class:"main-cl"},"للسوق",8,Ne),l[2]||(l[2]=e("div",{class:"marker"},null,-1))]),e("div",He,[e("div",Ie,[e("div",Ze,[_(n,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=b=>y.value=b),onChange:m,options:v.value,optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])]),e("div",We,[e("div",Je,[_(n,{modelValue:w.value,"onUpdate:modelValue":l[1]||(l[1]=b=>w.value=b),onChange:L,options:F.value,optionLabel:"name",placeholder:"اختر السنة",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),_(c,{ref_key:"chart",ref:d,option:a.value,style:{height:"250px",width:"100%",display:"block"}},null,8,["option"])])):q("",!0)}}},Qe=ae(te),Xe={key:0,class:"skeleton-chart"},ea={class:"skeleton-bars"},aa={class:"d-flex align-items-center gap-3 justify-content-end"},ta={key:0,class:"w-100"},sa={class:"d-flex align-items-center justify-content-center gap-4"},oa={class:"with_cun_select custom-select"},la={class:"flex justify-content-center dropdown_card"},na={class:"with_cun_select custom-select"},ia={class:"flex justify-content-center dropdown_card"},ra={__name:"TimeLimit",props:{apiEndpoint:{type:String,required:!0},initialYears:{type:Array,default:()=>[{name:"2024",id:2024},{name:"2025",id:2025}]}},async setup(B){let f,C;const P=ie(),{response:R}=ce(),{token:g}=Q(re());I();const $=B,w=s($.initialYears),F=s(w.value[0]),L=async()=>{var l,n;const h=((l=O.value)==null?void 0:l.id)||0,o=((n=F.value)==null?void 0:n.id)||0;await a(h,o)},u=async h=>{O.value=h.value,await L()},p=async h=>{F.value=h.value,await L()},D=([f,C]=J(()=>K(()=>import("./DiOpFFf5.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),f=await f,C(),f);D.use([de,se,oe,le,ne]);const y=H(()=>({headers:{Authorization:`Bearer ${g.value}`}})),v=s(!1),O=s(null),M=s(null),d=s([]),x=s([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),m=s({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"},type:"none"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{interval:0,rotate:45}},yAxis:{type:"value",show:!1},series:[{type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#4681f4"},itemStyle:{color:"#013660"},areaStyle:{color:new D.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(70, 129, 244, 0.6)"},{offset:1,color:"rgba(70, 129, 244, 0.2)"}])},data:[]}]}),a=async(h=0,o=0)=>{var l,n,c;v.value=!0;try{let b=$.apiEndpoint;const k=[];h>0&&k.push(`filterByMonth=${h}`),o>0&&k.push(`year=${o}`),k.length>0&&(b+=`?${k.join("&")}`);const T=await P.get(b,y.value);if(R(T)==="success"){if(!((n=(l=T.data)==null?void 0:l.data)!=null&&n.peakTimeData)){m.value.xAxis.data=[],m.value.series[0].data=[];return}const Y=T.data.data.peakTimeData;d.value=Y;try{h===0?(m.value.xAxis.data=Y.map(E=>E.month),m.value.series[0].data=Y.map(E=>E.value)):(m.value.xAxis.data=Y.map(E=>`اليوم ${E.day}`),m.value.series[0].data=Y.map(E=>E.value)),(c=M.value)!=null&&c.chart&&M.value.chart.setOption(m.value,!0)}catch(E){console.error("Error mapping data:",E),console.log("Data structure:",Y),m.value.xAxis.data=[],m.value.series[0].data=[]}}}catch(b){console.error("Error fetching peak time data:",b),m.value.xAxis.data=[],m.value.series[0].data=[]}finally{v.value=!1}};return Z(async()=>{await a()}),N(d,()=>{var h;(h=M.value)!=null&&h.chart&&M.value.chart.setOption(m.value,!0)},{deep:!0}),(h,o)=>{const l=W,n=ee,c=Qe,b=De;return G(),j("div",null,[v.value?(G(),j("div",Xe,[e("div",ea,[e("div",aa,[_(l,{width:"5rem",height:".5rem"}),o[2]||(o[2]=e("div",{class:"skeleton-bar",style:{width:"80%"}},null,-1))])])])):q("",!0),_(b,null,{default:X(()=>[v.value?q("",!0):(G(),j("div",ta,[e("div",sa,[e("div",oa,[e("div",la,[_(n,{modelValue:O.value,"onUpdate:modelValue":o[0]||(o[0]=k=>O.value=k),onChange:u,options:x.value,optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])]),e("div",na,[e("div",ia,[_(n,{modelValue:F.value,"onUpdate:modelValue":o[1]||(o[1]=k=>F.value=k),onChange:p,options:w.value,optionLabel:"name",placeholder:"اختر السنة"},null,8,["modelValue","options"])])])]),_(c,{ref_key:"chart",ref:M,class:"custom-chart",option:m.value,style:{height:"265px",width:"100%",display:"block"}},null,8,["option"])]))]),_:1})])}}},ca=ae(te),da={key:0,class:"skeleton-chart"},ua={class:"skeleton-bars"},ma={class:"d-flex align-items-center gap-3 justify-content-end"},ha={key:0,class:"w-100"},pa={class:"d-flex align-items-center justify-content-center gap-4"},va={class:"with_cun_select custom-select"},_a={class:"flex justify-content-center dropdown_card"},ya={__name:"getOrders",props:{apiEndpoint:{type:String,required:!0}},async setup(B){let f,C;const P=ie(),{response:R}=ce(),{token:g}=Q(re());I();const $=B,w=([f,C]=J(()=>K(()=>import("./DiOpFFf5.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),f=await f,C(),f);w.use([de,se,oe,le,ne]);const F=H(()=>({headers:{Authorization:`Bearer ${g.value}`}})),L=s(!1),u=s(null),p=s(null),D=s([]),y=s([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),v=s({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"},type:"none"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{interval:0,rotate:45}},yAxis:{type:"value",show:!1},series:[{type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#e5254a"},itemStyle:{color:"#e5254a"},areaStyle:{color:new w.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(247, 92, 92, 0.6)"},{offset:1,color:"rgba(247, 92, 92, 0.2)"}])},data:[]}]}),O=async(d=0)=>{var x,m,a,h,o;L.value=!0;try{const l=await P.get(`${$.apiEndpoint}${d?`?filterByMonth=${d}`:""}`,F.value);if(console.log("API Response:",l.data),R(l)==="success"){const n=((m=(x=l.data)==null?void 0:x.data)==null?void 0:m.peakTimeData)||((h=(a=l.data)==null?void 0:a.data)==null?void 0:h.requestRateData);if(!n){console.log("No data found in response"),v.value.xAxis.data=[],v.value.series[0].data=[];return}console.log("Chart Data:",n),D.value=n;try{d===0?(v.value.xAxis.data=n.map(c=>c.month),v.value.series[0].data=n.map(c=>c.value)):(v.value.xAxis.data=n.map(c=>`اليوم ${c.day}`),v.value.series[0].data=n.map(c=>c.value)),(o=p.value)!=null&&o.chart&&p.value.chart.setOption(v.value,!0)}catch(c){console.error("Error mapping data:",c),console.log("Data structure:",n),v.value.xAxis.data=[],v.value.series[0].data=[]}}}catch(l){console.error("Error fetching peak time data:",l),v.value.xAxis.data=[],v.value.series[0].data=[]}finally{L.value=!1}},M=async d=>{var m;const x=(m=d.value)==null?void 0:m.id;x!==void 0&&await O(x)};return Z(async()=>{u.value=y.value[0],await O()}),N(D,()=>{var d;(d=p.value)!=null&&d.chart&&p.value.chart.setOption(v.value,!0)},{deep:!0}),(d,x)=>{const m=W,a=ee,h=ca,o=De;return G(),j("div",null,[r(L)?(G(),j("div",da,[e("div",ua,[e("div",ma,[_(m,{width:"5rem",height:".5rem"}),x[1]||(x[1]=e("div",{class:"skeleton-bar",style:{width:"80%"}},null,-1))])])])):q("",!0),_(o,null,{default:X(()=>[r(L)?q("",!0):(G(),j("div",ha,[e("div",pa,[e("div",va,[e("div",_a,[_(a,{modelValue:r(u),"onUpdate:modelValue":x[0]||(x[0]=l=>Ge(u)?u.value=l:null),onChange:M,options:r(y),optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),_(h,{ref_key:"chart",ref:p,class:"custom-chart",option:r(v),style:{height:"300px",width:"100%",display:"block"}},null,8,["option"])]))]),_:1})])}}},fa="data:image/svg+xml,%3csvg%20width='67'%20height='65'%20viewBox='0%200%2067%2065'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='1.5'%20y='1.5'%20width='52'%20height='52'%20rx='12.5'%20stroke='%23E5254A'%20stroke-width='3'/%3e%3crect%20x='13.5'%20y='11.5'%20width='52'%20height='52'%20rx='12.5'%20fill='white'%20stroke='%23E5254A'%20stroke-width='3'/%3e%3c/svg%3e",ga="data:image/svg+xml,%3csvg%20width='90'%20height='88'%20viewBox='0%200%2090%2088'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M28.3258%2023.2449H79.3447C80.7369%2023.2449%2082.1105%2023.5858%2083.3592%2024.2413C84.6078%2024.8967%2085.6981%2025.8492%2086.5456%2027.0249C87.3931%2028.2007%2087.9752%2029.5682%2088.2469%2031.0217C88.5185%2032.4752%2088.4724%2033.9758%2088.1121%2035.4073L83.6202%2053.2521C82.7419%2056.7413%2080.8066%2059.8245%2078.1143%2062.0235C75.422%2064.2225%2072.1233%2065.4145%2068.7298%2065.4145H38.9407C35.5472%2065.4145%2032.2485%2064.2225%2029.5562%2062.0235C26.8639%2059.8245%2024.9285%2056.7413%2024.0502%2053.2521L19.5584%2035.4073C19.1981%2033.9758%2019.1519%2032.4752%2019.4235%2031.0217C19.6951%2029.5682%2020.2772%2028.2007%2021.1248%2027.0249C21.9723%2025.8492%2023.0625%2024.8967%2024.3112%2024.2413C25.5599%2023.5858%2026.9336%2023.2449%2028.3258%2023.2449Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M21.1621%2041.7777L13.682%2012.0615C12.2046%206.19243%207.20811%202.11133%201.5%202.11133'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M42.6199%2081.8802C42.6199%2082.4066%2042.5225%2082.9278%2042.3332%2083.4142C42.144%2083.9005%2041.8667%2084.3424%2041.517%2084.7146C41.1673%2085.0868%2040.7522%2085.3821%2040.2953%2085.5835C39.8384%2085.7849%2039.3488%2085.8886%2038.8543%2085.8886C38.3598%2085.8886%2037.8702%2085.7849%2037.4133%2085.5835C36.9564%2085.3821%2036.5413%2085.0868%2036.1916%2084.7146C35.8419%2084.3424%2035.5646%2083.9005%2035.3753%2083.4142C35.1861%2082.9278%2035.0886%2082.4066%2035.0886%2081.8802C35.0886%2081.3538%2035.1861%2080.8326%2035.3753%2080.3463C35.5646%2079.86%2035.8419%2079.4181%2036.1916%2079.0459C36.5413%2078.6736%2036.9564%2078.3784%2037.4133%2078.177C37.8702%2077.9755%2038.3598%2077.8718%2038.8543%2077.8718C39.3488%2077.8718%2039.8384%2077.9755%2040.2953%2078.177C40.7522%2078.3784%2041.1673%2078.6736%2041.517%2079.0459C41.8667%2079.4181%2042.144%2079.86%2042.3332%2080.3463C42.5225%2080.8326%2042.6199%2081.3538%2042.6199%2081.8802Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M70.2618%2081.8802C70.2618%2082.4066%2070.1645%2082.9278%2069.9752%2083.4142C69.786%2083.9005%2069.5085%2084.3424%2069.1588%2084.7146C68.8091%2085.0868%2068.3941%2085.3821%2067.9373%2085.5835C67.4804%2085.7849%2066.9906%2085.8886%2066.4961%2085.8886C66.0016%2085.8886%2065.512%2085.7849%2065.0551%2085.5835C64.5982%2085.3821%2064.1831%2085.0868%2063.8334%2084.7146C63.4837%2084.3424%2063.2064%2083.9005%2063.0172%2083.4142C62.8279%2082.9278%2062.7305%2082.4066%2062.7305%2081.8802C62.7305%2081.3538%2062.8279%2080.8326%2063.0172%2080.3463C63.2064%2079.86%2063.4837%2079.4181%2063.8334%2079.0459C64.1831%2078.6736%2064.5982%2078.3784%2065.0551%2078.177C65.512%2077.9755%2066.0016%2077.8718%2066.4961%2077.8718C66.9906%2077.8718%2067.4804%2077.9755%2067.9373%2078.177C68.3941%2078.3784%2068.8091%2078.6736%2069.1588%2079.0459C69.5085%2079.4181%2069.786%2079.86%2069.9752%2080.3463C70.1645%2080.8326%2070.2618%2081.3538%2070.2618%2081.8802Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3ccircle%20cx='45.0089'%20cy='39.4178'%20r='1.56401'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3ccircle%20cx='62.1673'%20cy='39.4178'%20r='1.56401'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3cmask%20id='mask0_1093_3777'%20style='mask-type:alpha'%20maskUnits='userSpaceOnUse'%20x='24'%20y='3'%20width='60'%20height='60'%3e%3ccircle%20cx='54.2009'%20cy='32.6771'%20r='29.4145'%20fill='%23E5254A'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_1093_3777)'%3e%3ccircle%20cx='54.2009'%20cy='78.0243'%20r='27.9145'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3c/g%3e%3c/svg%3e",xa={class:"container"},wa={class:"row"},ba={class:"col-12 col-lg-6 mb-3 info-box"},Ca={class:"info-box-item info-box-item align-items-center store-clients gap-3 flex-column-sm"},Da={class:"d-flex"},ka={class:"info-content"},$a={key:0,class:"d-flex align-items-end"},Aa={class:"hint-card"},Sa={class:"col-12 col-lg-6 mb-3 info-box"},Ma={class:"d-flex align-items-center gap-3"},Ea={class:"info-content"},Ga={key:0,class:"d-flex align-items-end"},La={class:"col-12 mb-3"},Oa={class:"layout-form chart_layout"},Va={class:"main-title text-center fw-normal mb-4"},Fa={class:"col-12 col-lg-6 mb-3"},Ya={class:"layout-form chart_layout"},ja={class:"main-title text-center fw-normal mb-3"},Pa={class:"desc text-center mb-0"},qa={class:"col-12 col-lg-6 mb-3"},Ra={class:"layout-form chart_layout"},Ta={class:"col-12 col-lg-6 mb-3"},Ba={class:"layout-form chart_layout"},Ua={class:"col-12 col-lg-6 mb-3"},za={class:"layout-form"},Na={class:"col-12 mb-5"},Ha={class:"layout-form chart_layout"},Ia={__name:"sales",setup(B){I();const f=s(2025),C=s(0),P=s([{name:"2024",id:2024},{name:"2025",id:2025}]),R=t=>{f.value=t,he(C.value,t)},g=t=>{f.value=t,me(C.value,t)},{response:$}=ce(),w=ie(),F=s("تحديد الجنس"),L=s({showAll:"الكل",males:"الذكور",females:"الإناث"}),u=s([]),p=s([]),D=H(()=>({headers:{Authorization:`Bearer ${v.value}`}}));Ve([de,se,oe,le,ne]);const y=re(),{token:v,user:O}=Q(y);s([[40,50,60,70,65,75,85,80,90,95,110,115],[30,40,55,50,55,60,75,72,78,82,90,95]]);const M=s([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),d=s(["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]),x=s(!1),m=s({xAxis:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],series:null}),a=s(!0),h=s(null),o=s([[],[]]),l=s([[],[]]),n=s({}),c=s({}),b=s([]),k=H(()=>p.value?{labels:p.value.map(t=>({id:t.id,text:t.name,image:t.logo})),series:p.value.map(t=>Number(t.saleRate.toFixed(2))),colors:{bar:"#E5254A",text:"#ffffff"}}:{labels:[],series:[],colors:{bar:"#E5254A",text:"#ffffff"}}),T=async()=>{a.value=!0,await w.get("GetSalesHomeStaticData",D.value).then(t=>{$(t)=="success"&&(u.value=t.data.data),a.value=!1}).catch(t=>{console.error(t)})},Y=async()=>{a.value=!0,await w.get("GetSalesCommonProductsData",D.value).then(t=>{$(t)=="success"&&(p.value=t.data.data.slice(0,4).reverse(),console.log(p.value,"HomeData")),a.value=!1}).catch(t=>{console.error(t)})},E=async(t=0,i=0)=>{a.value=!0;try{console.log(`Fetching data for monthId: ${t}`);const A=await w.get(`AverageShoppingCartSize?type=0&filterByMonth=${t}&year=${f.value}`,D.value);if($(A)==="success"){const S=A.data.data;if(t===0)o.value=[S.marketData.map(V=>V.value),S.storeDataData.map(V=>V.value)];else{const V={market:S.storeDataData.map(U=>U.value),store:S.marketData.map(U=>U.value)};n.value[t]=V,console.log("Updated manualMonthlyData:",n.value)}h.value=S}}catch(A){console.error("Error fetching data:",A)}finally{a.value=!1}},ue=async(t=0)=>{a.value=!0;try{console.log(`Fetching data for monthId: ${t}`);const i=await w.get(`GetSalesChartData?type=0&filterByMonth=${t}&year=${f.value}`,D.value);if($(i)==="success"){const A=i.data.data;if(t===0)l.value=[A.marketData.map(S=>S.value),A.storeDataData.map(S=>S.value)];else{const S={market:A.storeDataData.map(V=>V.value),store:A.marketData.map(V=>V.value)};c.value[t]=S,console.log("Updated manualMonthlyData:",c.value)}h.value=A}}catch(i){console.error("Error fetching data:",i)}finally{a.value=!1}},ke=async()=>{a.value=!0;try{const t=await w.get("DemographicDataChartData?GenderType=0",D.value);if($(t)==="success"){const i=t.data.data;Array.isArray(i)?(b.value=i,console.log("Updated Source Data:",b.value)):console.error("demographicData is not an array:",i)}}catch(t){console.error("Error fetching demographic data:",t)}finally{a.value=!1}},me=async(t,i=f.value)=>{C.value=t,console.log(`Month: ${t}, Year: ${i}`),await E(t,i)},he=async(t,i=f.value)=>{C.value=t,console.log(`Month: ${t}, Year: ${i}`),await ue(t)};return Z(async()=>{await E(0),await ue(0),await ke(),await T(),await Y()}),Ce(()=>{x.value=!0,m.value={xAxis:d.value,series:[40,50,60,70,65,75,85,80,90,95,110,115]}}),(t,i)=>{var pe,ve,_e,ye;const A=W,S=Oe("font-awesome-icon"),V=Ee,U=Ke,$e=Fe,Ae=ra,Se=ya,Me=Ye;return G(),j("div",null,[e("main",null,[e("div",xa,[e("div",wa,[e("div",ba,[e("div",Ca,[e("div",Da,[i[2]||(i[2]=e("img",{src:fa,alt:"Store Icon"},null,-1)),e("div",ka,[i[1]||(i[1]=e("span",{class:"main-cl main-title bold mb-2"},"معدل بيع المنتجات للمتجر",-1)),!((pe=r(u))!=null&&pe.length)&&!r(a)?(G(),j("h2",$a,[we(z((ve=r(u))==null?void 0:ve.storeSalesPercent)+" ",1),i[0]||(i[0]=e("div",{class:"hint-present"},"%",-1))])):q("",!0),(_e=r(u))!=null&&_e.length||r(a)?(G(),be(A,{key:1,class:"mt-3",width:"5rem",height:".5rem"})):q("",!0)])]),e("h4",Aa,"نسبة بيع المنتج الواحد من الكمية الكلية المتوفرة ترجمة الرقم: أنه اذا كانت الكمية الكلية للمنتج هي 100 اذن تم بيع "+z((ye=r(u))==null?void 0:ye.storeSalesPercent)+" تقريبا",1)])]),e("div",Sa,[_(V,{to:"/salesDetails",class:"info-box-item cart-clients gap-3 flex-wrap justify-content-between"},{default:X(()=>{var fe,ge,xe;return[e("div",Ma,[i[5]||(i[5]=e("img",{src:ga,alt:"User Icon"},null,-1)),e("div",Ea,[i[4]||(i[4]=e("span",null,"متوسط السلات المتروكة للمتجر",-1)),!((fe=r(u))!=null&&fe.length)&&!r(a)?(G(),j("h2",Ga,[we(z((ge=r(u))==null?void 0:ge.abondendCartAverage)+" ",1),i[3]||(i[3]=e("div",{class:"hint-span"},"سلة",-1))])):q("",!0),(xe=r(u))!=null&&xe.length||r(a)?(G(),be(A,{key:1,class:"mt-2",width:"5rem",height:".5rem"})):q("",!0)])]),_(S,{class:"fa-2x",icon:["fas","angle-left"]})]}),_:1})]),e("div",La,[e("div",Oa,[e("h3",Va,z(t.$t("Global.sales")),1),_(U,{initialMonths:r(M),initialAllMonths:r(d),initialMonthlyData:r(c),initialSeriesData:r(l),onRental_change:he,loading:r(a),showAllOption:!0,initialYears:r(P),onYear_change:R},null,8,["initialMonths","initialAllMonths","initialMonthlyData","initialSeriesData","loading","initialYears"])])]),e("div",Fa,[e("div",Ya,[e("h3",ja,z(t.$t("Global.commercial_Products")),1),e("h3",Pa,z(t.$t("Global.highest_Sales")),1),_($e,{"data-ready":r(x),"products-data":r(k)},null,8,["data-ready","products-data"])])]),e("div",qa,[e("div",Ra,[i[6]||(i[6]=e("h3",{class:"main-title text-center fw-normal mb-4"},"وقت الذروة",-1)),_(Ae,{apiEndpoint:"GetPeakTime"})])]),e("div",Ta,[e("div",Ba,[i[7]||(i[7]=e("h3",{class:"main-title fw-normal text-center mb-3"},"معدل الطلبات",-1)),_(Se,{apiEndpoint:"GetRequestRateChartData"})])]),e("div",Ua,[e("div",za,[i[8]||(i[8]=e("h3",{class:"main-title text-center fw-normal mb-4"},"التحليل الديموغرافي",-1)),_(Me,{"rental-names":r(L),"placeholder-text":r(F),"source-data":r(b)},null,8,["rental-names","placeholder-text","source-data"])])]),e("div",Na,[e("div",Ha,[i[9]||(i[9]=e("h3",{class:"main-title fw-normal text-center mb-4"},"متوسط حجم سلة الشراء",-1)),_(U,{initialMonths:r(M),initialAllMonths:r(d),initialMonthlyData:r(n),initialSeriesData:r(o),loading:r(a),onRental_change:me,showAllOption:!1,initialYears:r(P),onYear_change:g},null,8,["initialMonths","initialAllMonths","initialMonthlyData","initialSeriesData","loading","initialYears"])])])])])])])}}},it=Le(Ia,[["__scopeId","data-v-1db90e8c"]]);export{it as default};
