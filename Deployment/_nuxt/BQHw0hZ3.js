import{_ as D}from"./C8bX-7w0.js";import{e as B,r as t,s as M,c as h,a as e,t as u,b as R,f as F,g as y,v as b,u as d,i as g,n as P,d as U,h as j,o as A,j as q}from"./CaDz3XmI.js";import{_ as z}from"./BFZIU_pA.js";import{u as E,a as G,r as H}from"./DSoeTSnF.js";import{t as J}from"./VBNMALfX.js";const K={class:"container"},L={class:"auth-layout flex-column"},O={class:"main-title bold lg mb-5"},Q={class:"layout-form md custom-width"},W={class:"row"},X={class:"col-12 col-md-10 mr-auto"},Y={class:"main-title bold mb-4"},Z={class:"form-group"},x={class:"label"},ss={class:"main_input with_icon"},es=["type","placeholder"],os={class:"form-group"},ts={class:"label"},as={class:"main_input with_icon"},ns=["type","placeholder"],ls={class:"custom-btn mr-auto"},is={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},fs={__name:"confirmPassword",setup(rs){const{t:p}=B({useScope:"global"}),a=t([]),n=t(""),l=t(""),{response:N}=H(),{successToast:$,errorToast:m}=J(),T=E(),V=G(),{user:S,newemail:w}=M(V),f=t(!1),k=t(null),i=t({definitelyNewPassword:!1,definitelyNewPassword_2:!1});function C(){a.value=[];let o=document.querySelectorAll(".validInputs");for(let s=0;s<o.length;s++)o[s].value===""&&a.value.push(p(`validation.${o[s].name}`)),n.value!==l.value&&a.value.push(p("validation.confirmPassword"))}const _=o=>i.value[o]?"text":"password",v=o=>{i.value[o]=!i.value[o]},I=async()=>{var o;if(console.log(w.value,"user"),C(),a.value.length){m(a.value[0]);return}f.value=!0;try{const s={accountType:((o=S.value)==null?void 0:o.accountType)??0,email:w.value??"",newPassword:n.value,confirmPassword:l.value},c=await T.post("ChangePassword",s);N(c)==="success"?($(p("Auth.confirm_new_password")),q("/Auth/passwordResets")):m(c.data.message)}catch(s){console.error(s),m("An error occurred. Please try again.")}finally{f.value=!1}};return(o,s)=>{const c=D;return A(),h("div",K,[e("div",L,[e("h1",O,u(o.$t("Auth.forgot_password")),1),e("div",Q,[s[6]||(s[6]=e("img",{src:z,alt:"logo",class:"Auth-logo mb-5"},null,-1)),R(c,{activeSteps:[3,2,1]}),e("form",{onSubmit:F(I,["prevent"]),ref_key:"confirmPasswordForm",ref:k},[e("div",W,[e("div",X,[e("p",Y,u(o.$t("Auth.new_password")),1),e("div",Z,[e("label",x,u(o.$t("Auth.password_2")),1),e("div",ss,[y(e("input",{type:_("definitelyNewPassword"),name:"password","onUpdate:modelValue":s[0]||(s[0]=r=>g(n)?n.value=r:null),class:"custum-input-icon validInputs",placeholder:o.$t("Auth.password_2")},null,8,es),[[b,d(n)]]),e("button",{class:P(["static-btn with_eye",{active_class:d(i).definitelyNewPassword}]),type:"button",onClick:s[1]||(s[1]=r=>v("definitelyNewPassword"))},s[4]||(s[4]=[e("i",{class:"far fa-eye icon"},null,-1)]),2)])]),e("div",os,[e("label",ts,u(o.$t("Auth.confirm_password")),1),e("div",as,[y(e("input",{type:_("definitelyNewPassword_2"),name:"password_confirmation","onUpdate:modelValue":s[2]||(s[2]=r=>g(l)?l.value=r:null),class:"custum-input-icon validInputs",placeholder:o.$t("Auth.confirm_password")},null,8,ns),[[b,d(l)]]),e("button",{class:P(["static-btn with_eye",{active_class:d(i).definitelyNewPassword_2}]),type:"button",onClick:s[3]||(s[3]=r=>v("definitelyNewPassword_2"))},s[5]||(s[5]=[e("i",{class:"far fa-eye icon"},null,-1)]),2)])]),e("button",ls,[U(u(o.$t("Auth.save"))+" ",1),d(f)?(A(),h("span",is)):j("",!0)])])])],544)])])])}}};export{fs as default};
