const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./B7GuJRMc.js","./Cb7c7zvG.js","./BGhcUSDw.js","./entry.B0b_3z4T.css"])))=>i.map(i=>d[i]);
import{_ as M}from"./btND38K4.js";import{s as N,h as j,A as z,B as F,l as E,r as o,e as V,m as I,o as A,c as C,a as t,b as c,g as B,w as O,_ as U,J as q,u as p}from"./BGhcUSDw.js";import J from"./DJNix3lG.js";import{s as K}from"./DJDYPqyP.js";import{i as W,a as H,b as Q,c as X,f as Y,d as Z,_ as ee,u as ae}from"./Cb7c7zvG.js";import{u as R,r as L}from"./DXutHP6I.js";import{u as P}from"./Cy6-FToT.js";import{i as T}from"./6-Z3GeuQ.js";import{_ as te}from"./3C680dnv.js";import{_ as se}from"./T4PrpvV9.js";import"./EicXGnO2.js";import"./CSD--ZUF.js";import"./BWMl8hyR.js";import"./BNAr4kL3.js";const oe=Z(ee),ne={key:0,class:"skeleton-chart"},re={class:"skeleton-bars"},le={class:"d-flex align-items-center gap-3 justify-content-end"},ie={key:0,class:"w-100"},ce={class:"d-flex align-items-center justify-content-center gap-4"},de={class:"with_cun_select custom-select"},ue={class:"flex justify-content-center dropdown_card"},me={__name:"Orders",props:{apiEndpoint:{type:String,required:!0}},async setup(S){let d,v;const _=R(),{response:$}=L(),{token:u}=N(P());j();const b=S,y=([d,v]=z(()=>F(()=>import("./B7GuJRMc.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),d=await d,v(),d);y.use([T,W,H,Q,X]);const k=E(()=>({headers:{Authorization:`Bearer ${u.value}`}})),f=o(!1),g=o(null),m=o(null),x=o([]),h=o([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),s=o({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{interval:0,rotate:45}},yAxis:{type:"value",show:!1},series:[{type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#4681f4"},itemStyle:{color:"#013660"},areaStyle:{color:new y.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(247, 92, 92, 0.6)"},{offset:1,color:"rgba(247, 92, 92, 0.2)"}])},data:[]}]}),w=async(a=0)=>{var e,i;f.value=!0;try{const l=await _.get(`${b.apiEndpoint}${a?`?filterByMonth=${a}`:""}`,k.value);if(console.log("API Response:",l.data),$(l)==="success"){if(!((e=l.data)!=null&&e.data)){console.log("No data found in response"),s.value.xAxis.data=[],s.value.series[0].data=[];return}const r=l.data.data;console.log("Chart Data 222:",r),x.value=r;try{a===0?(s.value.xAxis.data=r.map(n=>n.month),s.value.series[0].data=r.map(n=>n.value)):(s.value.xAxis.data=r.map(n=>`اليوم ${n.month}`),s.value.series[0].data=r.map(n=>n.value)),(i=m.value)!=null&&i.chart&&m.value.chart.setOption(s.value,!0)}catch(n){console.error("Error mapping data:",n),console.log("Data structure:",r),s.value.xAxis.data=[],s.value.series[0].data=[]}}}catch(l){console.error("Error fetching peak time data:",l),s.value.xAxis.data=[],s.value.series[0].data=[]}finally{f.value=!1}},D=async a=>{var i;const e=(i=a.value)==null?void 0:i.id;e!==void 0&&await w(e)};return V(async()=>{g.value=h.value[0],await w()}),I(x,()=>{var a;(a=m.value)!=null&&a.chart&&m.value.chart.setOption(s.value,!0)},{deep:!0}),(a,e)=>{const i=J,l=K,r=oe,n=Y;return A(),C("div",null,[f.value?(A(),C("div",ne,[t("div",re,[t("div",le,[c(i,{width:"5rem",height:".5rem"}),e[1]||(e[1]=t("div",{class:"skeleton-bar",style:{width:"80%"}},null,-1))])])])):B("",!0),c(n,null,{default:O(()=>[f.value?B("",!0):(A(),C("div",ie,[t("div",ce,[t("div",de,[t("div",ue,[c(l,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=G=>g.value=G),onChange:D,options:h.value,optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),c(r,{ref_key:"chart",ref:m,class:"custom-chart",option:s.value,style:{height:"300px",width:"100%",display:"block"}},null,8,["option"])]))]),_:1})])}}},pe=""+new URL("cart-2._ylNWnxK.svg",import.meta.url).href,_e={class:"container"},fe={class:"info-box-item cart-clients gap-5 flex-wrap mb-4"},he={class:"layout-form chart_layout mb-3"},ve={class:"layout-form chart_layout mb-3"},ye={class:"layout-form chart_layout mb-3"},ge={__name:"salesDetails",setup(S){ae([T]);const{response:d}=L(),v=R(),_=o([]),{token:$}=N(P()),u=o(!1),b=o(!1),y=E(()=>({headers:{Authorization:`Bearer ${$.value}`}})),k=o("تحديد الجنس"),f=o({showAll:"الكل",males:"الذكور",females:"الإناث"}),g=o("معدل الترك"),m=o({males:"الأقسام",females:"المنتجات"}),x=E(()=>_.value?{labels:_.value.map(a=>({id:a.id,text:a.name,image:a.logo})),series:_.value.map(a=>Number(a.precentage.toFixed(2))),colors:{text:"#ffffff"}}:{labels:[],series:[],colors:{bar:"#f75c5c",text:"#ffffff"}}),h=o([]),s=a=>{w(a)},w=async(a=1)=>{u.value=!0,await v.get(`DropoutRate?filter=${a}`,y.value).then(e=>{d(e)=="success"&&(_.value=e.data.data,x.value.colors.bar=a===2?"#e5254a":"#013660"),u.value=!1}).catch(e=>{console.error(e),u.value=!1})},D=async()=>{u.value=!0;try{const a=await v.get("AbandonedCartRateForGender?GenderType=0",y.value);if(d(a)==="success"){const e=a.data.data;Array.isArray(e)?(h.value=e,console.log("Updated Source Data:",h.value)):console.error("demographicData is not an array:",e)}}catch(a){console.error("Error fetching demographic data:",a)}finally{u.value=!1}};return V(async()=>{await D(),await w()}),q(()=>{b.value=!0}),(a,e)=>{const i=M,l=me,r=te,n=se;return A(),C("div",_e,[t("div",fe,[e[1]||(e[1]=t("div",{class:"d-flex gap-3 justify-content-center flex-grow-1 align-items-center"},[t("img",{src:pe,alt:"User Icon"}),t("div",{class:"info-content"},[t("span",null,"إجمالي قيمة السلات المتروكة للمتجر:"),t("h2",null,"99000 ريال")])],-1)),c(i,{to:"/sales"},{default:O(()=>e[0]||(e[0]=[t("i",{class:"fas fa-chevron-right sales-icon"},null,-1)])),_:1})]),t("div",he,[e[2]||(e[2]=t("h1",{class:"main-title fw-normal text-center mb-5"},"متوسط حجم السلات المتروكة",-1)),c(l,{apiEndpoint:"AverageAbandonedCartSize"})]),t("div",ve,[c(r,{"data-ready":p(b),"products-data":p(x),"rental-names":p(m),"placeholder-text":p(g),"show-select":!0,onFilterChange:s},null,8,["data-ready","products-data","rental-names","placeholder-text"])]),t("div",ye,[e[3]||(e[3]=t("h1",{class:"main-title fw-normal text-center mb-4"},"التحليل الديموغرافي",-1)),c(n,{"rental-names":p(f),"placeholder-text":p(k),"source-data":p(h)},null,8,["rental-names","placeholder-text","source-data"])])])}}},Re=U(ge,[["__scopeId","data-v-e43fb98a"]]);export{Re as default};
