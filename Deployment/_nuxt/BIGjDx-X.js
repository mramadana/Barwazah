import ts from"./Cnjz13GW.js";import es from"./F7b-IcHV.js";import{_ as os,s as as,h as ls,r as n,l as ns,J as is,c as G,a as s,t as l,u as o,x as H,g as f,b as O,w as P,i as v,o as h,f as cs,j as rs,p as ds,d as us,k as U}from"./t6dwkVRB.js";import{_ as ms}from"./Bkg-pnzE.js";import{_ as _s}from"./CRNCPBld.js";import{u as L}from"./C5EdPX3e.js";import{u as ps,r as hs}from"./DXutHP6I.js";import{t as fs}from"./DPhQ6a4G.js";const vs={class:"container"},bs={class:"row"},gs={class:"col-12 col-md-6 mb-4"},ys={class:"settings-card"},ws={class:"store-info"},ks={class:"store-name mb-2"},Ss={class:"store-category"},xs={class:"col-12 col-md-6 mb-4"},As={class:"settings-card black"},$s={class:"store-image"},Ns=["src"],Ts={class:"store-info"},Cs={class:"store-name mb-2"},Es={class:"social-icons"},Bs=["href"],Ds=["href"],Fs=["href"],Is=["href"],Vs={class:"row layout-form chart_layout accordion accordion-flush"},Ms={class:"col-12 col-xl-4 col-md-6 mb-4"},Gs={class:"accordion-item"},Hs={id:"flush-collapseOne",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},Os={class:"accordion-body"},Ps={class:"col-12 col-xl-4 col-md-6 mb-4"},Us={class:"accordion-item"},Ls={id:"flush-collapseSector",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},Rs={class:"accordion-body"},js={class:"col-12 col-xl-4 col-md-6 mb-4"},qs={class:"accordion-item"},zs={id:"flush-collapseEmail",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushExample"},Js={class:"accordion-body"},Ks={class:"col-12 col-xl-4 col-md-6 mb-4"},Qs={class:"text-center"},Ws={class:"main-title bold mb-5"},Xs={class:"form-group"},Ys={class:"label"},Zs=["placeholder"],st={class:"section-btns mt-4"},tt={type:"submit",class:"custom-btn sm d-inline-flex"},et={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ot={class:"text-center"},at={class:"main-title bold mb-4"},lt={class:"main-title normal mb-4"},nt={class:"section-btns mt-5"},it={__name:"settings",setup(ct){const{token:R,user:j,newemail:q}=as(L()),{response:b}=hs(),{successToast:g,errorToast:d}=fs(),y=ps(),z=L(),{deleteAccountHandler:J}=z,{t:K}=ls({useScope:"global"}),c=n(""),w=n(null),u=n(!1),m=n([]),_=n(!0),Q=n(!1),r=n(!1),a=n({}),p=n(!1),W=ns(()=>({headers:{Authorization:`Bearer ${R.value}`}}));function X(){let e=document.querySelectorAll(".validInputs");for(let t=0;t<e.length;t++)e[t].value===""&&m.value.push(K(`validation.${e[t].name}`))}const Y=async()=>{_.value=!0,await y.get("SettingHome",W.value).then(e=>{b(e)=="success"&&(a.value=e.data.data,console.log(a.value,"settingsData")),_.value=!1}).catch(e=>{console.error(e)})},Z=async()=>{try{u.value=!0;const e=new FormData(w.value);if(X(),m.value.length){d(m.value[0]);return}const t=await y.post(`SendCode?email=${c.value}&accountType=${j.value.platformType}`);b(t)==="success"?(g(t.data.message),U("/emailActivateCode"),q.value=c.value):d(t.data.msg)}catch(e){console.error(e),u.value=!0,d("An error occurred. Please try again.")}finally{u.value=!1,m.value=[]}};is(async()=>{await Y()});const ss=async()=>{Q.value=!0,r.value=!1,localStorage.clear();const e=await J();e.status=="success"?g(e.msg):d(e.msg),U("/Auth/register")};return(e,t)=>{var x,A,$,N,T,C,E,B,D,F,I,V,M;const k=ts,S=es;return h(),G("div",null,[s("div",vs,[s("div",bs,[s("div",gs,[s("div",ys,[t[5]||(t[5]=s("div",{class:"store-image"},[s("img",{src:ms,alt:"Store Logo"})],-1)),s("div",ws,[s("div",ks,"المتجر: "+l((x=o(a))==null?void 0:x.storeName),1),(A=o(a))!=null&&A.length||o(_)?(h(),H(k,{key:0,class:"mt-2",width:"5rem",height:".5rem"})):f("",!0),s("div",Ss,"الفئة: "+l(($=o(a))==null?void 0:$.store_category),1),(N=o(a))!=null&&N.length||o(_)?(h(),H(k,{key:1,class:"mt-2",width:"5rem",height:".5rem"})):f("",!0)])])]),s("div",xs,[s("div",As,[s("div",$s,[s("img",{src:(T=o(a))==null?void 0:T.userImage,alt:"Store Logo"},null,8,Ns)]),s("div",Ts,[s("div",Cs,"التاجر: "+l((C=o(a))==null?void 0:C.userName),1),s("div",Es,[s("a",{href:(E=o(a))==null?void 0:E.instagram,target:"_blank"},t[6]||(t[6]=[s("i",{class:"fab fa-instagram"},null,-1)]),8,Bs),s("a",{href:(B=o(a))==null?void 0:B.twitter,target:"_blank"},t[7]||(t[7]=[s("img",{src:_s,alt:"twitter"},null,-1)]),8,Ds),s("a",{href:(D=o(a))==null?void 0:D.snapchat,target:"_blank"},t[8]||(t[8]=[s("i",{class:"fab fa-snapchat-ghost"},null,-1)]),8,Fs),s("a",{href:(F=o(a))==null?void 0:F.facebook,target:"_blank"},t[9]||(t[9]=[s("i",{class:"fab fa-facebook-f"},null,-1)]),8,Is)])])])])]),s("div",Vs,[s("div",Ms,[s("div",Gs,[t[10]||(t[10]=s("h2",{class:"accordion-header"},[s("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne"},[s("span",{class:"hint-accordion"},"رقم الهاتف")])],-1)),s("div",Hs,[s("div",Os,l((I=o(a))==null?void 0:I.phoneNumber),1)])])]),s("div",Ps,[s("div",Us,[t[11]||(t[11]=s("h2",{class:"accordion-header"},[s("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseSector","aria-expanded":"false","aria-controls":"flush-collapseSector"},[s("span",{class:"hint-accordion"},"القطاع الخاص بك")])],-1)),s("div",Ls,[s("div",Rs,l((V=o(a))==null?void 0:V.nisheName),1)])])]),s("div",js,[s("div",qs,[t[12]||(t[12]=s("h2",{class:"accordion-header"},[s("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseEmail","aria-expanded":"false","aria-controls":"flush-collapseEmail"},[s("span",null,"البريد الإلكتروني")])],-1)),s("div",zs,[s("div",Js,l((M=o(a))==null?void 0:M.email),1)])])]),s("div",Ks,[s("div",{class:"settings-card blue-bg",onClick:t[0]||(t[0]=i=>p.value=!0)},t[13]||(t[13]=[s("div",{class:"card-content"},[s("span",{class:"card-label"},"تغيير كلمة السر")],-1),s("button",{class:"edit-button"},"***",-1)]))])])]),O(S,{visible:o(p),"onUpdate:visible":t[2]||(t[2]=i=>v(p)?p.value=i:null),modal:"",class:"custum_dialog_width auth-daialog",draggable:!1},{default:P(()=>[s("div",Qs,[s("h1",Ws,l(e.$t("Auth.change_password")),1),s("form",{onSubmit:cs(Z,["prevent"]),ref_key:"forgetForm",ref:w},[s("div",Xs,[s("label",Ys,l(e.$t("Auth.email")),1),rs(s("input",{type:"email",class:"main_input validInputs",valid:"email",name:"email","onUpdate:modelValue":t[1]||(t[1]=i=>v(c)?c.value=i:null),placeholder:e.$t("Auth.enter_email")},null,8,Zs),[[ds,o(c)]])]),s("div",st,[s("button",tt,[us(l(e.$t("Auth.confirmation"))+" ",1),o(u)?(h(),G("span",et)):f("",!0)])])],544)])]),_:1},8,["visible"]),O(S,{visible:o(r),"onUpdate:visible":t[4]||(t[4]=i=>v(r)?r.value=i:null),modal:"",class:"custum_dialog_width",draggable:!1},{default:P(()=>[s("div",ot,[s("h1",at,l(e.$t("Global.sure_delete_account")),1),s("h1",lt,l(e.$t("Global.delete_account_info")),1),s("div",nt,[s("button",{type:"button",class:"custom-btn sm d-inline-flex",onClick:t[3]||(t[3]=i=>r.value=!1)},l(e.$t("Home.retreat")),1),s("button",{type:"button",class:"custom-btn logout sm d-inline-flex",onClick:ss},l(e.$t("Global.delete")),1)])])]),_:1},8,["visible"])])}}},vt=os(it,[["__scopeId","data-v-0022efea"]]);export{vt as default};
