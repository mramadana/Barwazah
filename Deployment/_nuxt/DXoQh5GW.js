const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BTn7DjtC.js","./S1gSilvU.js","./5Np3j6Vc.js","./entry.B0b_3z4T.css"])))=>i.map(i=>d[i]);
import Z from"./CjxOShH7.js";import{_ as Ee}from"./C6bM45Yu.js";import{y as W,r as o,e as H,l as N,I as Ce,x as I,o as M,c as F,a as e,b as g,h as q,z as J,s as K,k as U,w as Q,u as i,i as Ge,_ as Le,H as Oe,d as we,t as V,q as be}from"./5Np3j6Vc.js";import{s as X}from"./B6TW6AyZ.js";import{d as ee,_ as ae,i as te,a as se,b as oe,c as ne,f as De,u as Fe}from"./S1gSilvU.js";import{_ as Pe}from"./DVrd_pIh.js";import{u as le,a as ie,r as re}from"./CxbVBdwo.js";import{i as ce}from"./Bu3szolT.js";import{_ as je}from"./-fd5DTZx.js";import"./gp46qaL5.js";import"./B_2mYMwp.js";import"./UHuAScf9.js";import"./BuoIj8Nu.js";const qe=ee(ae),Re={key:0,class:"w-100"},Te={class:"radio-container"},Ye=["id","name"],Be=["for"],Ve=["id","name"],ze=["for"],Ne=["id","name"],Ue=["for"],He={class:"d-flex align-items-center justify-content-center gap-4"},Ie={class:"with_cun_select custom-select"},Ze={class:"flex justify-content-center dropdown_card"},We={__name:"GradientArea",props:{initialMonths:{type:Array,required:!0},initialAllMonths:{type:Array,required:!0},initialOption:{type:Object,required:!0},initialMonthlyData:{type:Object,required:!0},initialSeriesData:{type:Array,required:!0},initialYears:{type:Array,required:!0}},emits:["rental_change","year_change"],async setup(Y,{emit:y}){let b,P;const R=([b,P]=W(()=>J(()=>import("./BTn7DjtC.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),b=await b,P(),b),f=Y,$=y;o({id:0}),o(f.initialYears);const _=o(Math.random().toString(36).substr(2,9)),{t:w}=H(),E=o(!1),u=o({id:0}),x=o(f.initialMonths),C=o(f.initialAllMonths),G=o(f.initialMonthlyData),r=o(null),A=n=>Array.from({length:n},()=>0),j=()=>{var a;if(console.log("handleMonthChange triggered",u.value),!u.value||typeof u.value.id>"u"){console.error("Invalid selected month: ",u.value);return}$("rental_change",u.value.id),console.log("Emitted rental_change with ID:",u.value.id);const n=u.value.id;if(n===0)s.value.xAxis.data=C.value,s.value.series[0].data=f.initialSeriesData[0]||[],s.value.series[1].data=f.initialSeriesData[1]||[];else{const d=x.value.find(p=>p.id===n);if(!d){console.error("Invalid month ID: ",n);return}const m=d.days,h=Array.from({length:m},(p,S)=>`اليوم ${S+1}`);s.value.xAxis={type:"category",boundaryGap:!1,data:h,axisLabel:{interval:0,rotate:45}};const v=G.value[n];v?(s.value.series[0].data=v.store||[],s.value.series[1].data=v.market||[]):(s.value.series[0].data=A(m),s.value.series[1].data=A(m))}(a=r.value)!=null&&a.chart?r.value.chart.setOption(s.value,!0):console.error("Chart instance is not ready.")},s=o({legend:{top:"5%",show:!1,selected:{[w("Global.marketData")]:!0,[w("Global.storeDataData")]:!0}},tooltip:{trigger:"axis",padding:[10,20],textStyle:{fontSize:13,color:"#333",fontFamily:"Arial"},borderWidth:2,axisPointer:{type:"cross",type:"none",label:{backgroundColor:"#6a7985"}},formatter:function(n){let a='<div style="text-align: right; direction: rtl;">';return n.forEach(d=>{a+=`
          <div style="
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
          ">
            <span style="
              display: inline-block;
              width: 12px;
              height: 12px;
              background: ${d.color};
              border-radius: 2px;
            "></span>
            <strong>${d.seriesName}:</strong>
            <span>${d.value} ريال</span>
          </div>
        `}),a+="</div>",a}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisPointer:{type:"none"}},yAxis:{type:"value",show:!1,axisPointer:{type:"none"}},series:[{name:w("Global.marketData"),type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#4681f4"},itemStyle:{color:"#013660"},areaStyle:{color:new R.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(70, 129, 244, 0.6)"},{offset:1,color:"rgba(70, 129, 244, 0.2)"}])},data:[]},{name:w("Global.storeDataData"),type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#f75c5c"},itemStyle:{color:"#e5254a"},areaStyle:{color:new R.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(247, 92, 92, 0.6)"},{offset:1,color:"rgba(247, 92, 92, 0.2)"}])},data:[]}]}),c=n=>{var d;const a={id:Number(n.target.value)};if(a){const m=(d=r.value)==null?void 0:d.chart;if(!m)return;switch(a.id){case 0:s.value.legend.selected[w("Global.marketData")]=!0,s.value.legend.selected[w("Global.storeDataData")]=!0;break;case 1:s.value.legend.selected[w("Global.marketData")]=!1,s.value.legend.selected[w("Global.storeDataData")]=!0;break;case 2:s.value.legend.selected[w("Global.marketData")]=!0,s.value.legend.selected[w("Global.storeDataData")]=!1;break}m.setOption(s.value,!0)}};return N(()=>f.initialMonthlyData,n=>{var a;if(u.value&&u.value.id!==0){const d=u.value.id,m=n[d];m&&(s.value.series[0].data=m.store||[],s.value.series[1].data=m.market||[],(a=r.value)!=null&&a.chart&&r.value.chart.setOption(s.value,!0))}},{deep:!0}),N(()=>f.initialSeriesData,n=>{var a;n&&Array.isArray(n)&&n.length>0&&(s.value.series[0].data=n[0]||[],s.value.series[1].data=n[1]||[],(a=r.value)!=null&&a.chart&&r.value.chart.setOption(s.value,!0))},{deep:!0,immediate:!0}),Ce(()=>{E.value=!0,s.value.xAxis.data=C.value,Array.isArray(f.initialSeriesData)&&f.initialSeriesData.length>=2&&(s.value.series[0].data=f.initialSeriesData[0]||[],s.value.series[1].data=f.initialSeriesData[1]||[])}),I(()=>{var n;(n=r.value)!=null&&n.chart&&r.value.chart.setOption(s.value,!0)}),(n,a)=>{const d=X,m=qe;return E.value?(M(),F("div",Re,[e("div",Te,[e("input",{type:"radio",id:`radio1-${_.value}`,name:`slider-${_.value}`,value:"1",onChange:c},null,40,Ye),e("label",{for:`radio1-${_.value}`,class:"cl-red"},"للمتجر",8,Be),e("input",{type:"radio",id:`radio2-${_.value}`,name:`slider-${_.value}`,value:"0",onChange:c,checked:""},null,40,Ve),e("label",{for:`radio2-${_.value}`},"الكل",8,ze),e("input",{type:"radio",id:`radio3-${_.value}`,name:`slider-${_.value}`,value:"2",onChange:c},null,40,Ne),e("label",{for:`radio3-${_.value}`,class:"main-cl"},"للسوق",8,Ue),a[1]||(a[1]=e("div",{class:"marker"},null,-1))]),e("div",He,[e("div",Ie,[e("div",Ze,[g(d,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=h=>u.value=h),onChange:j,options:x.value,optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),g(m,{ref_key:"chart",ref:r,option:s.value,style:{height:"250px",width:"100%",display:"block"}},null,8,["option"])])):q("",!0)}}},Je=ee(ae),Ke={key:0,class:"skeleton-chart"},Qe={class:"skeleton-bars"},Xe={class:"d-flex align-items-center gap-3 justify-content-end"},ea={key:0,class:"w-100"},aa={class:"d-flex align-items-center justify-content-center gap-4"},ta={class:"with_cun_select custom-select"},sa={class:"flex justify-content-center dropdown_card"},oa={__name:"TimeLimit",props:{apiEndpoint:{type:String,required:!0},initialYears:{type:Array,default:()=>[{name:"2024",id:2024},{name:"2025",id:2025}]}},async setup(Y){let y,b;const P=le(),{response:R}=re(),{token:f}=K(ie());H();const $=Y,_=o($.initialYears),w=o(_.value[0]),E=async()=>{var m,h;const a=((m=r.value)==null?void 0:m.id)||0,d=((h=w.value)==null?void 0:h.id)||0;await n(a,d)},u=async a=>{r.value=a.value,await E()},x=([y,b]=W(()=>J(()=>import("./BTn7DjtC.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),y=await y,b(),y);x.use([ce,te,se,oe,ne]);const C=U(()=>({headers:{Authorization:`Bearer ${f.value}`}})),G=o(!1),r=o(null),A=o(null),j=o([]),s=o([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),c=o({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"},type:"none"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{interval:0,rotate:45}},yAxis:{type:"value",show:!1},series:[{type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#4681f4"},itemStyle:{color:"#013660"},areaStyle:{color:new x.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(70, 129, 244, 0.6)"},{offset:1,color:"rgba(70, 129, 244, 0.2)"}])},data:[]}]}),n=async(a=0,d=0)=>{var m,h,v;G.value=!0;try{let p=$.apiEndpoint;const S=[];a>0&&S.push(`filterByMonth=${a}`),d>0&&S.push(`year=${d}`),S.length>0&&(p+=`?${S.join("&")}`);const z=await P.get(p,C.value);if(R(z)==="success"){if(!((h=(m=z.data)==null?void 0:m.data)!=null&&h.peakTimeData)){c.value.xAxis.data=[],c.value.series[0].data=[];return}const T=z.data.data.peakTimeData;j.value=T;try{a===0?(c.value.xAxis.data=T.map(L=>L.month),c.value.series[0].data=T.map(L=>L.value)):(c.value.xAxis.data=T.map(L=>`اليوم ${L.day}`),c.value.series[0].data=T.map(L=>L.value)),(v=A.value)!=null&&v.chart&&A.value.chart.setOption(c.value,!0)}catch(L){console.error("Error mapping data:",L),console.log("Data structure:",T),c.value.xAxis.data=[],c.value.series[0].data=[]}}}catch(p){console.error("Error fetching peak time data:",p),c.value.xAxis.data=[],c.value.series[0].data=[]}finally{G.value=!1}};return I(async()=>{await n()}),N(j,()=>{var a;(a=A.value)!=null&&a.chart&&A.value.chart.setOption(c.value,!0)},{deep:!0}),(a,d)=>{const m=Z,h=X,v=Je,p=De;return M(),F("div",null,[G.value?(M(),F("div",Ke,[e("div",Qe,[e("div",Xe,[g(m,{width:"5rem",height:".5rem"}),d[1]||(d[1]=e("div",{class:"skeleton-bar",style:{width:"80%"}},null,-1))])])])):q("",!0),g(p,null,{default:Q(()=>[G.value?q("",!0):(M(),F("div",ea,[e("div",aa,[e("div",ta,[e("div",sa,[g(h,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=S=>r.value=S),onChange:u,options:s.value,optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),g(v,{ref_key:"chart",ref:A,class:"custom-chart",option:c.value,style:{height:"265px",width:"100%",display:"block"}},null,8,["option"])]))]),_:1})])}}},na=ee(ae),la={key:0,class:"skeleton-chart"},ia={class:"skeleton-bars"},ra={class:"d-flex align-items-center gap-3 justify-content-end"},ca={key:0,class:"w-100"},da={class:"d-flex align-items-center justify-content-center gap-4"},ua={class:"with_cun_select custom-select"},ma={class:"flex justify-content-center dropdown_card"},ha={__name:"getOrders",props:{apiEndpoint:{type:String,required:!0}},async setup(Y){let y,b;const P=le(),{response:R}=re(),{token:f}=K(ie());H();const $=Y,_=([y,b]=W(()=>J(()=>import("./BTn7DjtC.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),y=await y,b(),y);_.use([ce,te,se,oe,ne]);const w=U(()=>({headers:{Authorization:`Bearer ${f.value}`}})),E=o(!1),u=o(null),x=o(null),C=o([]),G=o([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),r=o({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"},type:"none"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{interval:0,rotate:45}},yAxis:{type:"value",show:!1},series:[{type:"line",smooth:!0,symbol:"square",symbolSize:7,showSymbol:!0,lineStyle:{width:2,color:"#e5254a"},itemStyle:{color:"#e5254a"},areaStyle:{color:new _.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(247, 92, 92, 0.6)"},{offset:1,color:"rgba(247, 92, 92, 0.2)"}])},data:[]}]}),A=async(s=0)=>{var c,n,a,d,m;E.value=!0;try{const h=await P.get(`${$.apiEndpoint}${s?`?filterByMonth=${s}`:""}`,w.value);if(console.log("API Response:",h.data),R(h)==="success"){const v=((n=(c=h.data)==null?void 0:c.data)==null?void 0:n.peakTimeData)||((d=(a=h.data)==null?void 0:a.data)==null?void 0:d.requestRateData);if(!v){console.log("No data found in response"),r.value.xAxis.data=[],r.value.series[0].data=[];return}console.log("Chart Data:",v),C.value=v;try{s===0?(r.value.xAxis.data=v.map(p=>p.month),r.value.series[0].data=v.map(p=>p.value)):(r.value.xAxis.data=v.map(p=>`اليوم ${p.day}`),r.value.series[0].data=v.map(p=>p.value)),(m=x.value)!=null&&m.chart&&x.value.chart.setOption(r.value,!0)}catch(p){console.error("Error mapping data:",p),console.log("Data structure:",v),r.value.xAxis.data=[],r.value.series[0].data=[]}}}catch(h){console.error("Error fetching peak time data:",h),r.value.xAxis.data=[],r.value.series[0].data=[]}finally{E.value=!1}},j=async s=>{var n;const c=(n=s.value)==null?void 0:n.id;c!==void 0&&await A(c)};return I(async()=>{u.value=G.value[0],await A()}),N(C,()=>{var s;(s=x.value)!=null&&s.chart&&x.value.chart.setOption(r.value,!0)},{deep:!0}),(s,c)=>{const n=Z,a=X,d=na,m=De;return M(),F("div",null,[i(E)?(M(),F("div",la,[e("div",ia,[e("div",ra,[g(n,{width:"5rem",height:".5rem"}),c[1]||(c[1]=e("div",{class:"skeleton-bar",style:{width:"80%"}},null,-1))])])])):q("",!0),g(m,null,{default:Q(()=>[i(E)?q("",!0):(M(),F("div",ca,[e("div",da,[e("div",ua,[e("div",ma,[g(a,{modelValue:i(u),"onUpdate:modelValue":c[0]||(c[0]=h=>Ge(u)?u.value=h:null),onChange:j,options:i(G),optionLabel:"name",placeholder:"اختر الشهر",class:"w-full md:w-14rem custum-dropdown"},null,8,["modelValue","options"])])])]),g(d,{ref_key:"chart",ref:x,class:"custom-chart",option:i(r),style:{height:"300px",width:"100%",display:"block"}},null,8,["option"])]))]),_:1})])}}},pa="data:image/svg+xml,%3csvg%20width='67'%20height='65'%20viewBox='0%200%2067%2065'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='1.5'%20y='1.5'%20width='52'%20height='52'%20rx='12.5'%20stroke='%23E5254A'%20stroke-width='3'/%3e%3crect%20x='13.5'%20y='11.5'%20width='52'%20height='52'%20rx='12.5'%20fill='white'%20stroke='%23E5254A'%20stroke-width='3'/%3e%3c/svg%3e",va="data:image/svg+xml,%3csvg%20width='90'%20height='88'%20viewBox='0%200%2090%2088'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M28.3258%2023.2449H79.3447C80.7369%2023.2449%2082.1105%2023.5858%2083.3592%2024.2413C84.6078%2024.8967%2085.6981%2025.8492%2086.5456%2027.0249C87.3931%2028.2007%2087.9752%2029.5682%2088.2469%2031.0217C88.5185%2032.4752%2088.4724%2033.9758%2088.1121%2035.4073L83.6202%2053.2521C82.7419%2056.7413%2080.8066%2059.8245%2078.1143%2062.0235C75.422%2064.2225%2072.1233%2065.4145%2068.7298%2065.4145H38.9407C35.5472%2065.4145%2032.2485%2064.2225%2029.5562%2062.0235C26.8639%2059.8245%2024.9285%2056.7413%2024.0502%2053.2521L19.5584%2035.4073C19.1981%2033.9758%2019.1519%2032.4752%2019.4235%2031.0217C19.6951%2029.5682%2020.2772%2028.2007%2021.1248%2027.0249C21.9723%2025.8492%2023.0625%2024.8967%2024.3112%2024.2413C25.5599%2023.5858%2026.9336%2023.2449%2028.3258%2023.2449Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M21.1621%2041.7777L13.682%2012.0615C12.2046%206.19243%207.20811%202.11133%201.5%202.11133'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M42.6199%2081.8802C42.6199%2082.4066%2042.5225%2082.9278%2042.3332%2083.4142C42.144%2083.9005%2041.8667%2084.3424%2041.517%2084.7146C41.1673%2085.0868%2040.7522%2085.3821%2040.2953%2085.5835C39.8384%2085.7849%2039.3488%2085.8886%2038.8543%2085.8886C38.3598%2085.8886%2037.8702%2085.7849%2037.4133%2085.5835C36.9564%2085.3821%2036.5413%2085.0868%2036.1916%2084.7146C35.8419%2084.3424%2035.5646%2083.9005%2035.3753%2083.4142C35.1861%2082.9278%2035.0886%2082.4066%2035.0886%2081.8802C35.0886%2081.3538%2035.1861%2080.8326%2035.3753%2080.3463C35.5646%2079.86%2035.8419%2079.4181%2036.1916%2079.0459C36.5413%2078.6736%2036.9564%2078.3784%2037.4133%2078.177C37.8702%2077.9755%2038.3598%2077.8718%2038.8543%2077.8718C39.3488%2077.8718%2039.8384%2077.9755%2040.2953%2078.177C40.7522%2078.3784%2041.1673%2078.6736%2041.517%2079.0459C41.8667%2079.4181%2042.144%2079.86%2042.3332%2080.3463C42.5225%2080.8326%2042.6199%2081.3538%2042.6199%2081.8802Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M70.2618%2081.8802C70.2618%2082.4066%2070.1645%2082.9278%2069.9752%2083.4142C69.786%2083.9005%2069.5085%2084.3424%2069.1588%2084.7146C68.8091%2085.0868%2068.3941%2085.3821%2067.9373%2085.5835C67.4804%2085.7849%2066.9906%2085.8886%2066.4961%2085.8886C66.0016%2085.8886%2065.512%2085.7849%2065.0551%2085.5835C64.5982%2085.3821%2064.1831%2085.0868%2063.8334%2084.7146C63.4837%2084.3424%2063.2064%2083.9005%2063.0172%2083.4142C62.8279%2082.9278%2062.7305%2082.4066%2062.7305%2081.8802C62.7305%2081.3538%2062.8279%2080.8326%2063.0172%2080.3463C63.2064%2079.86%2063.4837%2079.4181%2063.8334%2079.0459C64.1831%2078.6736%2064.5982%2078.3784%2065.0551%2078.177C65.512%2077.9755%2066.0016%2077.8718%2066.4961%2077.8718C66.9906%2077.8718%2067.4804%2077.9755%2067.9373%2078.177C68.3941%2078.3784%2068.8091%2078.6736%2069.1588%2079.0459C69.5085%2079.4181%2069.786%2079.86%2069.9752%2080.3463C70.1645%2080.8326%2070.2618%2081.3538%2070.2618%2081.8802Z'%20stroke='%23ECF5FC'%20stroke-width='3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3ccircle%20cx='45.0089'%20cy='39.4178'%20r='1.56401'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3ccircle%20cx='62.1673'%20cy='39.4178'%20r='1.56401'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3cmask%20id='mask0_1093_3777'%20style='mask-type:alpha'%20maskUnits='userSpaceOnUse'%20x='24'%20y='3'%20width='60'%20height='60'%3e%3ccircle%20cx='54.2009'%20cy='32.6771'%20r='29.4145'%20fill='%23E5254A'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_1093_3777)'%3e%3ccircle%20cx='54.2009'%20cy='78.0243'%20r='27.9145'%20stroke='%23ECF5FC'%20stroke-width='3'/%3e%3c/g%3e%3c/svg%3e",_a={class:"container"},ya={class:"row"},fa={class:"col-12 col-lg-6 mb-3 info-box"},ga={class:"info-box-item info-box-item align-items-center store-clients gap-3 flex-column-sm"},xa={class:"d-flex"},wa={class:"info-content"},ba={key:0,class:"d-flex align-items-end"},Ca={class:"hint-card"},Da={class:"col-12 col-lg-6 mb-3 info-box"},ka={class:"d-flex align-items-center gap-3"},$a={class:"info-content"},Aa={key:0,class:"d-flex align-items-end"},Sa={class:"col-12 mb-3"},Ma={class:"layout-form chart_layout"},Ea={class:"main-title text-center fw-normal mb-4"},Ga={class:"col-12 col-lg-6 mb-3"},La={class:"layout-form chart_layout"},Oa={class:"main-title text-center fw-normal mb-3"},Fa={class:"desc text-center mb-0"},Pa={class:"col-12 col-lg-6 mb-3"},ja={class:"layout-form chart_layout"},qa={class:"col-12 col-lg-6 mb-3"},Ra={class:"layout-form chart_layout"},Ta={class:"col-12 col-lg-6 mb-3"},Ya={class:"layout-form"},Ba={class:"col-12 mb-5"},Va={class:"layout-form chart_layout"},za={__name:"sales",setup(Y){H();const y=o(2025),b=o(0),P=o([{name:"2024",id:2024},{name:"2025",id:2025}]),R=t=>{y.value=t,he(b.value,t)},f=t=>{y.value=t,me(b.value,t)},{response:$}=re(),_=le(),w=o("تحديد الجنس"),E=o({showAll:"الكل",males:"الذكور",females:"الإناث"}),u=o([]),x=o([]),C=U(()=>({headers:{Authorization:`Bearer ${r.value}`}}));Fe([ce,te,se,oe,ne]);const G=ie(),{token:r,user:A}=K(G);o([[40,50,60,70,65,75,85,80,90,95,110,115],[30,40,55,50,55,60,75,72,78,82,90,95]]);const j=o([{name:"عرض الكل",id:0},{name:"يناير",id:1,days:31},{name:"فبراير",id:2,days:28},{name:"مارس",id:3,days:31},{name:"أبريل",id:4,days:30},{name:"مايو",id:5,days:31},{name:"يونيو",id:6,days:30},{name:"يوليو",id:7,days:31},{name:"أغسطس",id:8,days:31},{name:"سبتمبر",id:9,days:30},{name:"أكتوبر",id:10,days:31},{name:"نوفمبر",id:11,days:30},{name:"ديسمبر",id:12,days:31}]),s=o(["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]),c=o(!1),n=o({xAxis:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],series:null}),a=o(!0),d=o(null),m=o([[],[]]),h=o([[],[]]),v=o({}),p=o({}),S=o([]),z=U(()=>x.value?{labels:x.value.map(t=>({id:t.id,text:t.name,image:t.logo})),series:x.value.map(t=>Number(t.saleRate.toFixed(2))),colors:{bar:"#E5254A",text:"#ffffff"}}:{labels:[],series:[],colors:{bar:"#E5254A",text:"#ffffff"}}),T=async()=>{a.value=!0,await _.get("GetSalesHomeStaticData",C.value).then(t=>{$(t)=="success"&&(u.value=t.data.data),a.value=!1}).catch(t=>{console.error(t)})},L=async()=>{a.value=!0,await _.get("GetSalesCommonProductsData",C.value).then(t=>{$(t)=="success"&&(x.value=t.data.data.slice(0,4).reverse(),console.log(x.value,"HomeData")),a.value=!1}).catch(t=>{console.error(t)})},de=async(t=0,l=0)=>{a.value=!0;try{console.log(`Fetching data for monthId: ${t}`);const D=await _.get(`AverageShoppingCartSize?type=0&filterByMonth=${t}&year=${y.value}`,C.value);if($(D)==="success"){const k=D.data.data;if(t===0)m.value=[k.marketData.map(O=>O.value),k.storeDataData.map(O=>O.value)];else{const O={market:k.storeDataData.map(B=>B.value),store:k.marketData.map(B=>B.value)};v.value[t]=O,console.log("Updated manualMonthlyData:",v.value)}d.value=k}}catch(D){console.error("Error fetching data:",D)}finally{a.value=!1}},ue=async(t=0)=>{a.value=!0;try{console.log(`Fetching data for monthId: ${t}`);const l=await _.get(`GetSalesChartData?type=0&filterByMonth=${t}&year=${y.value}`,C.value);if($(l)==="success"){const D=l.data.data;if(t===0)h.value=[D.marketData.map(k=>k.value),D.storeDataData.map(k=>k.value)];else{const k={market:D.storeDataData.map(O=>O.value),store:D.marketData.map(O=>O.value)};p.value[t]=k,console.log("Updated manualMonthlyData:",p.value)}d.value=D}}catch(l){console.error("Error fetching data:",l)}finally{a.value=!1}},ke=async()=>{a.value=!0;try{const t=await _.get("DemographicDataChartData?GenderType=0",C.value);if($(t)==="success"){const l=t.data.data;Array.isArray(l)?(S.value=l,console.log("Updated Source Data:",S.value)):console.error("demographicData is not an array:",l)}}catch(t){console.error("Error fetching demographic data:",t)}finally{a.value=!1}},me=async(t,l=y.value)=>{b.value=t,console.log(`Month: ${t}, Year: ${l}`),await de(t,l)},he=async(t,l=y.value)=>{b.value=t,console.log(`Month: ${t}, Year: ${l}`),await ue(t)};return I(async()=>{await de(0),await ue(0),await ke(),await T(),await L()}),Ce(()=>{c.value=!0,n.value={xAxis:s.value,series:[40,50,60,70,65,75,85,80,90,95,110,115]}}),(t,l)=>{var pe,ve,_e,ye;const D=Z,k=Oe("font-awesome-icon"),O=Ee,B=We,$e=Pe,Ae=oa,Se=ha,Me=je;return M(),F("div",null,[e("main",null,[e("div",_a,[e("div",ya,[e("div",fa,[e("div",ga,[e("div",xa,[l[2]||(l[2]=e("img",{src:pa,alt:"Store Icon"},null,-1)),e("div",wa,[l[1]||(l[1]=e("span",{class:"main-cl main-title bold mb-2"},"معدل بيع المنتجات للمتجر",-1)),!((pe=i(u))!=null&&pe.length)&&!i(a)?(M(),F("h2",ba,[we(V((ve=i(u))==null?void 0:ve.storeSalesPercent)+" ",1),l[0]||(l[0]=e("div",{class:"hint-present"},"%",-1))])):q("",!0),(_e=i(u))!=null&&_e.length||i(a)?(M(),be(D,{key:1,class:"mt-3",width:"5rem",height:".5rem"})):q("",!0)])]),e("h4",Ca,"نسبة بيع المنتج الواحد من الكمية الكلية المتوفرة ترجمة الرقم: أنه اذا كانت الكمية الكلية للمنتج هي 100 اذن تم بيع "+V((ye=i(u))==null?void 0:ye.storeSalesPercent)+" تقريبا",1)])]),e("div",Da,[g(O,{to:"/salesDetails",class:"info-box-item cart-clients gap-3 flex-wrap justify-content-between"},{default:Q(()=>{var fe,ge,xe;return[e("div",ka,[l[5]||(l[5]=e("img",{src:va,alt:"User Icon"},null,-1)),e("div",$a,[l[4]||(l[4]=e("span",null,"متوسط السلات المتروكة للمتجر",-1)),!((fe=i(u))!=null&&fe.length)&&!i(a)?(M(),F("h2",Aa,[we(V((ge=i(u))==null?void 0:ge.abondendCartAverage)+" ",1),l[3]||(l[3]=e("div",{class:"hint-span"},"سلة",-1))])):q("",!0),(xe=i(u))!=null&&xe.length||i(a)?(M(),be(D,{key:1,class:"mt-2",width:"5rem",height:".5rem"})):q("",!0)])]),g(k,{class:"fa-2x",icon:["fas","angle-left"]})]}),_:1})]),e("div",Sa,[e("div",Ma,[e("h3",Ea,V(t.$t("Global.sales")),1),g(B,{initialMonths:i(j),initialAllMonths:i(s),initialMonthlyData:i(p),initialSeriesData:i(h),onRental_change:he,loading:i(a),showAllOption:!0,initialYears:i(P),onYear_change:R},null,8,["initialMonths","initialAllMonths","initialMonthlyData","initialSeriesData","loading","initialYears"])])]),e("div",Ga,[e("div",La,[e("h3",Oa,V(t.$t("Global.commercial_Products")),1),e("h3",Fa,V(t.$t("Global.highest_Sales")),1),g($e,{"data-ready":i(c),"products-data":i(z)},null,8,["data-ready","products-data"])])]),e("div",Pa,[e("div",ja,[l[6]||(l[6]=e("h3",{class:"main-title text-center fw-normal mb-4"},"وقت الذروة",-1)),g(Ae,{apiEndpoint:"GetPeakTime"})])]),e("div",qa,[e("div",Ra,[l[7]||(l[7]=e("h3",{class:"main-title fw-normal text-center mb-3"},"معدل الطلبات",-1)),g(Se,{apiEndpoint:"GetRequestRateChartData"})])]),e("div",Ta,[e("div",Ya,[l[8]||(l[8]=e("h3",{class:"main-title text-center fw-normal mb-4"},"التحليل الديموغرافي",-1)),g(Me,{"rental-names":i(E),"placeholder-text":i(w),"source-data":i(S)},null,8,["rental-names","placeholder-text","source-data"])])]),e("div",Ba,[e("div",Va,[l[9]||(l[9]=e("h3",{class:"main-title fw-normal text-center mb-4"},"متوسط حجم سلة الشراء",-1)),g(B,{initialMonths:i(j),initialAllMonths:i(s),initialMonthlyData:i(v),initialSeriesData:i(m),loading:i(a),onRental_change:me,showAllOption:!1,initialYears:i(P),onYear_change:f},null,8,["initialMonths","initialAllMonths","initialMonthlyData","initialSeriesData","loading","initialYears"])])])])])])])}}},st=Le(za,[["__scopeId","data-v-90d7ef67"]]);export{st as default};
